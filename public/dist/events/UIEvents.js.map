{"version":3,"file":"UIEvents.js","sources":["../../../../src/events/UIEvents.ts"],"sourcesContent":["// File: events/UIEvents.js\n\nimport {\n\tDOMElements,\n\tServicesInterface,\n\tUtilitiesInterface\n} from '../types/index.js';\nimport { EventManager } from './EventManager.js';\nimport { data } from '../data/index.js';\n\nconst classes = data.dom.classes;\nconst ids = data.dom.ids;\n\nexport class UIEvents {\n\tprivate log: ServicesInterface['log'];\n\tprivate elements: DOMElements;\n\n\tconstructor(\n\t\tprivate services: ServicesInterface,\n\t\tprivate utils: UtilitiesInterface\n\t) {\n\t\tthis.services = services;\n\t\tthis.utils = utils;\n\t\tthis.log = this.services.log;\n\n\t\tconst validatedElements = this.utils.dom.getValidatedDOMElements(ids);\n\t\tif (!validatedElements) {\n\t\t\tthrow new Error(\n\t\t\t\t`Critical UI elements not found. Application cannot start`\n\t\t\t);\n\t\t}\n\t\tthis.elements = validatedElements;\n\t}\n\n\tpublic init() {\n\t\tEventManager.add(document, 'click', event => {\n\t\t\tconst target = event.target as HTMLElement;\n\n\t\t\t// open modal\n\t\t\tif (target.matches(classes.modalTrigger)) {\n\t\t\t\tconst modal = this.utils.core.getElement(\n\t\t\t\t\ttarget.dataset.modalID!\n\t\t\t\t);\n\t\t\t\tmodal?.classList.remove(classes.hidden);\n\t\t\t}\n\n\t\t\t// close modal when clicking outside\n\t\t\tif (target.matches(classes.modal)) {\n\t\t\t\ttarget.classList.add(classes.hidden);\n\t\t\t}\n\t\t});\n\n\t\t// handle 'Esc' key press to close modals\n\t\tEventManager.add(document, 'keydown', ((event: KeyboardEvent) => {\n\t\t\tif (event.key === 'Escape') {\n\t\t\t\tconst openModals = this.utils.core.getAllElements(\n\t\t\t\t\tclasses.modal\n\t\t\t\t);\n\t\t\t\topenModals.forEach(modal =>\n\t\t\t\t\tmodal.classList.add(classes.hidden)\n\t\t\t\t);\n\t\t\t}\n\t\t}) as EventListener);\n\t}\n\n\tpublic initButtons(): void {\n\t\t// desaturate button (Placeholder logic)\n\t\tEventManager.add(this.elements.btns.desaturate, 'click', (e: Event) => {\n\t\t\te.preventDefault();\n\t\t\tthis.log(\n\t\t\t\t'debug',\n\t\t\t\t'Desaturate button clicked',\n\t\t\t\t'UIEvents.initButtons',\n\t\t\t\t5\n\t\t\t);\n\t\t\tthis.log(\n\t\t\t\t'debug',\n\t\t\t\t'Desaturation logic not implemented!',\n\t\t\t\t'UIEvents.initButtons',\n\t\t\t\t2\n\t\t\t);\n\t\t});\n\n\t\t// export button (Placeholder logic)\n\t\tEventManager.add(this.elements.btns.export, 'click', (e: Event) => {\n\t\t\te.preventDefault();\n\t\t\tthis.log(\n\t\t\t\t'debug',\n\t\t\t\t'Export button clicked',\n\t\t\t\t'UIEvents.initButtons()',\n\t\t\t\t5\n\t\t\t);\n\t\t\tthis.log(\n\t\t\t\t'debug',\n\t\t\t\t'Export logic not implemented!',\n\t\t\t\t'UIEvents.initButtons()',\n\t\t\t\t2\n\t\t\t);\n\t\t});\n\n\t\t// generate button (Placeholder logic)\n\t\tEventManager.add(this.elements.btns.generate, 'click', (e: Event) => {\n\t\t\te.preventDefault();\n\t\t\tthis.log(\n\t\t\t\t'debug',\n\t\t\t\t'Generate button clicked',\n\t\t\t\t'UIEvents.initButtons()',\n\t\t\t\t5\n\t\t\t);\n\t\t\tthis.log(\n\t\t\t\t'debug',\n\t\t\t\t'Palette generation logic not implemented!',\n\t\t\t\t'UIEvents.initButtons()',\n\t\t\t\t2\n\t\t\t);\n\t\t});\n\n\t\tEventManager.add(document, 'click', this.handleWindowClick.bind(this));\n\t}\n\n\tpublic attachTooltipListener(id: string, tooltipText: string): void {\n\t\tconst element = this.utils.core.getElement(id);\n\t\tif (!element) return;\n\n\t\tEventManager.add(element, 'mouseenter', () => {\n\t\t\tthis.utils.dom.createTooltip(element, tooltipText);\n\t\t});\n\n\t\tEventManager.add(element, 'mouseleave', () => {\n\t\t\tthis.utils.dom.removeTooltip(element);\n\t\t});\n\t}\n\n\tprivate handleWindowClick(event: Event): void {\n\t\tconst target = event.target as HTMLElement;\n\n\t\tif (target === this.elements.divs.helpMenu) {\n\t\t\tthis.elements.divs.helpMenu.classList.add(classes.hidden);\n\t\t}\n\n\t\tif (target === this.elements.divs.historyMenu) {\n\t\t\tthis.elements.divs.historyMenu.classList.add(classes.hidden);\n\t\t}\n\t}\n}\n"],"names":[],"mappings":"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"}