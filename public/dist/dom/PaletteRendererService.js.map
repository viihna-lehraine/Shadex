{"version":3,"file":"PaletteRendererService.js","sources":["../../../../src/dom/PaletteRendererService.ts"],"sourcesContent":["import {\n\tAllColors,\n\tCommonFunctions,\n\tGenerateHuesFnGroup,\n\tGeneratePaletteFn,\n\tGeneratePaletteFnGroup,\n\tHelpers,\n\tServices,\n\tState,\n\tUtilities\n} from '../types/index.js';\nimport { PaletteHistoryManager } from '../palette/PaletteHistoryManager.js';\nimport { StateManager } from '../state/StateManager.js';\nimport { DOMStore } from './DOMStore.js';\nimport { domConfig, domIndex } from '../config/index.js';\n\nconst caller = 'PaletteRendererService';\n\nexport interface PaletteRendererContract {\n\trenderColumns(columns: State['paletteContainer']['columns']): void;\n\trenderNewPalette(): Promise<void>;\n\trenderPaletteFromState(): Promise<void>;\n}\n\nexport class PaletteRendererService implements PaletteRendererContract {\n\tstatic #instance: PaletteRendererService | null = null;\n\n\t#common: CommonFunctions;\n\t#domStore: DOMStore;\n\t#errors: Services['errors'];\n\t#log: Services['log'];\n\t#helpers: Helpers;\n\t#paletteHistoryManager: PaletteHistoryManager;\n\t#stateManager: StateManager;\n\t#utils: Utilities;\n\n\t#generatePalette: GeneratePaletteFn;\n\t#generatePaletteFns: GeneratePaletteFnGroup;\n\t#generateHues: GenerateHuesFnGroup;\n\n\tprivate constructor(\n\t\tcommon: CommonFunctions,\n\t\tdomStore: DOMStore,\n\t\tgenerateHues: GenerateHuesFnGroup,\n\t\tgeneratePaletteFnGroup: GeneratePaletteFnGroup,\n\t\tgeneratePalette: GeneratePaletteFn,\n\t\tstateManager: StateManager\n\t) {\n\t\ttry {\n\t\t\tcommon.services.log.info(\n\t\t\t\t`Constructing PaletteRendererService instance.`,\n\t\t\t\t`${caller}.constructor`\n\t\t\t);\n\n\t\t\tthis.#common = common;\n\t\t\tthis.#domStore = domStore;\n\t\t\tthis.#errors = common.services.errors;\n\t\t\tthis.#helpers = common.helpers;\n\t\t\tthis.#log = common.services.log;\n\t\t\tthis.#utils = common.utils;\n\n\t\t\tthis.#generatePalette = generatePalette;\n\t\t\tthis.#generatePaletteFns = generatePaletteFnGroup;\n\t\t\tthis.#generateHues = generateHues;\n\n\t\t\tthis.#paletteHistoryManager = PaletteHistoryManager.getInstance(\n\t\t\t\tcommon.helpers,\n\t\t\t\tcommon.services\n\t\t\t);\n\t\t\tthis.#stateManager = stateManager;\n\t\t} catch (error) {\n\t\t\tthrow new Error(\n\t\t\t\t`[${caller}.constructor]: ${\n\t\t\t\t\terror instanceof Error ? error.message : error\n\t\t\t\t}`\n\t\t\t);\n\t\t}\n\t}\n\n\tstatic getInstance(\n\t\tcommon: CommonFunctions,\n\t\tdomStore: DOMStore,\n\t\tgenerateHues: GenerateHuesFnGroup,\n\t\tgeneratePaletteFnGroup: GeneratePaletteFnGroup,\n\t\tgeneratePalette: GeneratePaletteFn,\n\t\tstateManager: StateManager\n\t): PaletteRendererService {\n\t\treturn common.services.errors.handleSync(() => {\n\t\t\tif (!PaletteRendererService.#instance) {\n\t\t\t\tcommon.services.log.info(\n\t\t\t\t\t`Creating PaletteRendererService instance.`,\n\t\t\t\t\t`${caller}.getInstance`\n\t\t\t\t);\n\n\t\t\t\treturn new PaletteRendererService(\n\t\t\t\t\tcommon,\n\t\t\t\t\tdomStore,\n\t\t\t\t\tgenerateHues,\n\t\t\t\t\tgeneratePaletteFnGroup,\n\t\t\t\t\tgeneratePalette,\n\t\t\t\t\tstateManager\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn PaletteRendererService.#instance;\n\t\t}, `[${caller}.getInstance]: Failed to create PaletteRendererService instance.`);\n\t}\n\n\trenderColumns(columns: State['paletteContainer']['columns']): void {\n\t\tconst container = this.#domStore.getElement('divs', 'paletteContainer');\n\n\t\tif (!container) {\n\t\t\tthis.#log.warn(\n\t\t\t\t'Palette container not found.',\n\t\t\t\t`${caller}.renderColumns`\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tconst allColumns = Array.from(\n\t\t\tcontainer.querySelectorAll(`.${domIndex.classes.paletteColumn}`)\n\t\t);\n\n\t\t// ensure exactly 5 columns exist\n\t\tif (allColumns.length !== 5) {\n\t\t\tthis.#log.error(\n\t\t\t\t`Expected 5 columns, but found ${allColumns.length}`,\n\t\t\t\t`${caller}.renderColumns`\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tconst latestPalette = this.#paletteHistoryManager.getCurrentPalette();\n\t\tif (!latestPalette) {\n\t\t\tthis.#log.warn(\n\t\t\t\t'No saved palettes in history. Cannot render column colors.',\n\t\t\t\t`${caller}.renderColumns`\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\t// map color values to column IDs\n\t\tconst colorMap = new Map<number, string>();\n\t\tlatestPalette.items.forEach(item => {\n\t\t\tcolorMap.set(item.itemID, item.css.hex);\n\t\t});\n\n\t\t// render each column with the correct color\n\t\tallColumns.forEach((columnElement, index) => {\n\t\t\tconst columnData = columns[index];\n\n\t\t\tif (!columnData) {\n\t\t\t\tthis.#log.warn(\n\t\t\t\t\t`No column data found for index ${index}`,\n\t\t\t\t\t`${caller}.renderColumns`\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst typedColumnElement = columnElement as HTMLElement;\n\n\t\t\ttypedColumnElement.style.width = `${columnData.size}%`;\n\n\t\t\t// retrieve color from palette history\n\t\t\tconst columnColor = colorMap.get(columnData.id) ?? '';\n\n\t\t\ttypedColumnElement.style.backgroundColor = columnColor;\n\t\t\ttypedColumnElement.classList.toggle('locked', columnData.isLocked);\n\t\t});\n\n\t\tthis.#log.debug(\n\t\t\t`Rendered ${columns.length} columns with colors.`,\n\t\t\t`${caller}.renderColumns`\n\t\t);\n\t}\n\n\tasync renderNewPalette(): Promise<void> {\n\t\treturn await this.#errors.handleAsync(async () => {\n\t\t\tconst paletteContainer = this.#domStore.getElement(\n\t\t\t\t'divs',\n\t\t\t\t'paletteContainer'\n\t\t\t);\n\n\t\t\tif (!paletteContainer) {\n\t\t\t\tthrow new Error('Palette container not found');\n\t\t\t}\n\n\t\t\t// retrieve palette generation options\n\t\t\tconst options = this.#utils.palette.getPaletteOptionsFromUI();\n\t\t\tthis.#log.debug(\n\t\t\t\t`Palette options: ${JSON.stringify(options)}`,\n\t\t\t\t`${caller}.renderNewPalette`\n\t\t\t);\n\n\t\t\t// store the old palette in history\n\t\t\tconst paletteHistory =\n\t\t\t\tthis.#paletteHistoryManager.getCurrentPalette();\n\t\t\tconst oldPalette = (\n\t\t\t\tArray.isArray(paletteHistory) ? paletteHistory : []\n\t\t\t).at(-1);\n\t\t\tif (oldPalette) this.#paletteHistoryManager.addPalette(oldPalette);\n\n\t\t\t// clear the existing palette\n\t\t\tpaletteContainer.innerHTML = '';\n\n\t\t\t// generate a new palette\n\t\t\tconst newPalette = this.#generatePalette(\n\t\t\t\toptions,\n\t\t\t\tthis.#common,\n\t\t\t\tthis.#generateHues,\n\t\t\t\tthis.#generatePaletteFns\n\t\t\t);\n\n\t\t\t// ensure valid palette before storing\n\t\t\tif (!this.#helpers.typeGuards.isPalette(newPalette)) {\n\t\t\t\tthrow new Error('Generated palette is invalid.');\n\t\t\t}\n\n\t\t\tthis.#paletteHistoryManager.addPalette(newPalette);\n\t\t\tawait this.#stateManager.saveState();\n\n\t\t\tconst allColumns =\n\t\t\t\tpaletteContainer.querySelectorAll('.palette-column');\n\t\t\tconst columnWidth = 100 / newPalette.items.length;\n\n\t\t\tnewPalette.items.forEach((item, index) => {\n\t\t\t\tconst column = allColumns[index];\n\t\t\t\tif (!column) return;\n\n\t\t\t\tconst columnID = index + 1;\n\t\t\t\tconst colorValue = item.css.hex;\n\n\t\t\t\tconst columnElement = column as HTMLElement;\n\n\t\t\t\tcolumnElement.style.backgroundColor = colorValue;\n\t\t\t\tcolumnElement.classList.remove('hidden');\n\t\t\t\tcolumnElement.style.width = `${columnWidth}%`;\n\n\t\t\t\t// update UI elements inside the column\n\t\t\t\tthis.#renderPaletteColumn(columnElement, columnID, colorValue);\n\t\t\t});\n\n\t\t\tconst normalizedColumns = newPalette.items.map((item, index) => ({\n\t\t\t\tid: index + 1,\n\t\t\t\tisLocked: false,\n\t\t\t\tposition: index + 1,\n\t\t\t\tsize: 100 / 5, // each column gets 20%\n\t\t\t\tcolor: item.colors,\n\t\t\t\tcss: item.css\n\t\t\t}));\n\n\t\t\t// Update DOM elements\n\t\t\tallColumns.forEach((columnElement, index) => {\n\t\t\t\tconst columnData = normalizedColumns[index];\n\n\t\t\t\tconst typedColumnElement = columnElement as HTMLElement;\n\n\t\t\t\ttypedColumnElement.style.width = `${columnData.size}%`;\n\t\t\t\ttypedColumnElement.style.backgroundColor =\n\t\t\t\t\tcolumnData.color?.hex.hex ?? '';\n\t\t\t});\n\n\t\t\t// Update state\n\t\t\tawait this.#stateManager.batchUpdate(state => ({\n\t\t\t\tpaletteContainer: {\n\t\t\t\t\t...state.paletteContainer,\n\t\t\t\t\tcolumns: normalizedColumns\n\t\t\t\t}\n\t\t\t}));\n\t\t}, `[${caller}]: Failed to render a new palette.`);\n\t}\n\n\tasync renderPaletteFromState(): Promise<void> {\n\t\treturn await this.#errors.handleAsync(async () => {\n\t\t\tawait this.#stateManager.ensureStateReady();\n\t\t\tconst paletteContainer = this.#domStore.getElement(\n\t\t\t\t'divs',\n\t\t\t\t'paletteContainer'\n\t\t\t);\n\t\t\tif (!paletteContainer) {\n\t\t\t\tthis.#log.warn(\n\t\t\t\t\t'Palette container not found',\n\t\t\t\t\t`${caller}.renderPaletteFromState`\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// get latest saved palette\n\t\t\tconst latestPalette =\n\t\t\t\tthis.#paletteHistoryManager.getCurrentPalette();\n\t\t\tif (!latestPalette) {\n\t\t\t\tthis.#log.warn(\n\t\t\t\t\t'No saved palettes in history. Cannot render.',\n\t\t\t\t\t`${caller}.renderPaletteFromState`\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst columnCount = latestPalette.metadata.columnCount;\n\t\t\tconst columnWidth = 100 / columnCount;\n\t\t\tconst allColumns =\n\t\t\t\tpaletteContainer.querySelectorAll('.palette-column');\n\n\t\t\tlatestPalette.items.forEach((item, index) => {\n\t\t\t\tconst column = allColumns[index];\n\t\t\t\tif (!column) return;\n\n\t\t\t\tconst columnID = item.itemID;\n\t\t\t\tconst colorValue = item.css.hex;\n\n\t\t\t\tconst columnElement = column as HTMLElement;\n\n\t\t\t\tcolumnElement.style.backgroundColor = colorValue;\n\t\t\t\tcolumnElement.classList.remove('hidden');\n\t\t\t\tcolumnElement.style.width = `${columnWidth}%`;\n\n\t\t\t\t// update column UI elements\n\t\t\t\tthis.#renderPaletteColumn(columnElement, columnID, colorValue);\n\t\t\t});\n\n\t\t\t// hide any extra columns\n\t\t\tconst normalizedColumns = latestPalette.items.map(\n\t\t\t\t(item, index) => ({\n\t\t\t\t\tid: index + 1,\n\t\t\t\t\tisLocked: false,\n\t\t\t\t\tposition: index + 1,\n\t\t\t\t\tsize: 100 / 5, // Ensure each column is evenly sized\n\t\t\t\t\tcolor: item.colors,\n\t\t\t\t\tcss: item.css\n\t\t\t\t})\n\t\t\t);\n\n\t\t\t// update DOM elements\n\t\t\tallColumns.forEach((columnElement, index) => {\n\t\t\t\tconst columnData = normalizedColumns[index];\n\n\t\t\t\tconst typedColumnElement = columnElement as HTMLElement;\n\n\t\t\t\ttypedColumnElement.style.width = `${columnData.size}%`;\n\t\t\t\ttypedColumnElement.style.backgroundColor =\n\t\t\t\t\tcolumnData.color?.hex.hex ?? '';\n\t\t\t});\n\n\t\t\t// Update state\n\t\t\tawait this.#stateManager.batchUpdate(state => ({\n\t\t\t\tpaletteContainer: {\n\t\t\t\t\t...state.paletteContainer,\n\t\t\t\t\tcolumns: normalizedColumns\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tawait this.#stateManager.saveState();\n\t\t\tthis.#log.debug(\n\t\t\t\t`Restored ${columnCount} columns from saved state.`,\n\t\t\t\t`${caller}.renderPaletteFromState`\n\t\t\t);\n\t\t}, `[${caller}]: Failed to render palette from state.`);\n\t}\n\n\tasync updatePaletteColumnSize(\n\t\tcolumnID: number,\n\t\tnewSize: number\n\t): Promise<void> {\n\t\treturn this.#errors.handleAsync(async () => {\n\t\t\tconst paletteContainer = this.#stateManager.get(\n\t\t\t\t'paletteContainer'\n\t\t\t) as State['paletteContainer'];\n\t\t\tconst columns = paletteContainer.columns;\n\n\t\t\tconst columnIndex = columns.findIndex(col => col.id === columnID);\n\t\t\tif (columnIndex === -1) {\n\t\t\t\tthis.#log.warn(\n\t\t\t\t\t`Column with ID ${columnID} not found.`,\n\t\t\t\t\t`${caller}.updatePaletteColumnSize`\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// adjust size with min/max boundaries\n\t\t\tconst adjustedSize = Math.max(\n\t\t\t\tdomConfig.minColumnSize,\n\t\t\t\tMath.min(newSize, domConfig.maxColumnSize)\n\t\t\t);\n\n\t\t\tconst updatedColumns = columns.map(col =>\n\t\t\t\tcol.id === columnID ? { ...col, size: newSize } : col\n\t\t\t);\n\n\t\t\t// Normalize sizes to ensure 100% total\n\t\t\tconst totalSize = updatedColumns.reduce(\n\t\t\t\t(sum, col) => sum + col.size,\n\t\t\t\t0\n\t\t\t);\n\t\t\tconst normalizedColumns = updatedColumns.map(col => ({\n\t\t\t\t...col,\n\t\t\t\tsize: col.size * (100 / totalSize)\n\t\t\t}));\n\n\t\t\tawait this.#stateManager.batchUpdate(state => ({\n\t\t\t\tpaletteContainer: {\n\t\t\t\t\t...state.paletteContainer,\n\t\t\t\t\tcolumns: normalizedColumns\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tthis.#log.debug(\n\t\t\t\t`Palette column size updated (ID: ${columnID}, New Size: ${adjustedSize}).`,\n\t\t\t\t`${caller}.updatePaletteColumnSize`\n\t\t\t);\n\t\t}, `[${caller}]: Failed to update palette column size.`);\n\t}\n\n\tasync updatePaletteItemColor(\n\t\tcolumnID: number,\n\t\tnewColor: string,\n\t\tstate: State\n\t): Promise<void> {\n\t\treturn this.#errors.handleAsync(\n\t\t\tasync () => {\n\t\t\t\tconst currentState = this.#helpers.data.deepClone(state);\n\t\t\t\tconst latestPalette =\n\t\t\t\t\tthis.#paletteHistoryManager.getCurrentPalette();\n\n\t\t\t\tif (!latestPalette) return;\n\n\t\t\t\t// find the PaletteItem corresponding to this column\n\t\t\t\tconst updatedItems = latestPalette.items.map(item => {\n\t\t\t\t\tif (item.itemID !== columnID) return item;\n\n\t\t\t\t\tconst parsedNewColor =\n\t\t\t\t\t\tthis.#utils.color.formatCSSAsColor(newColor);\n\t\t\t\t\tif (!parsedNewColor) throw new Error('Invalid color value');\n\n\t\t\t\t\t// ensure color is in HSL format\n\t\t\t\t\tconst hslColor =\n\t\t\t\t\t\tparsedNewColor.format === 'hsl'\n\t\t\t\t\t\t\t? parsedNewColor\n\t\t\t\t\t\t\t: this.#utils.color.convertToHSL(parsedNewColor);\n\n\t\t\t\t\t// generate all color representations (ensuring correct branded types)\n\t\t\t\t\tconst allColors: AllColors =\n\t\t\t\t\t\tthis.#utils.palette.generateAllColorValues(hslColor);\n\n\t\t\t\t\t// ensure CSS representations match expected format\n\t\t\t\t\tconst structuredCSS = {\n\t\t\t\t\t\tcmyk: this.#utils.color.formatColorAsCSS(\n\t\t\t\t\t\t\tallColors.cmyk\n\t\t\t\t\t\t),\n\t\t\t\t\t\thex: this.#utils.color.formatColorAsCSS(allColors.hex),\n\t\t\t\t\t\thsl: this.#utils.color.formatColorAsCSS(allColors.hsl),\n\t\t\t\t\t\thsv: this.#utils.color.formatColorAsCSS(allColors.hsv),\n\t\t\t\t\t\tlab: this.#utils.color.formatColorAsCSS(allColors.lab),\n\t\t\t\t\t\trgb: this.#utils.color.formatColorAsCSS(allColors.rgb),\n\t\t\t\t\t\txyz: this.#utils.color.formatColorAsCSS(allColors.xyz)\n\t\t\t\t\t};\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...item,\n\t\t\t\t\t\tcolors: allColors,\n\t\t\t\t\t\tcss: structuredCSS\n\t\t\t\t\t};\n\t\t\t\t});\n\n\t\t\t\t// ensure column state is updated\n\t\t\t\tconst updatedColumns = updatedItems.map((item, index) => ({\n\t\t\t\t\tid: item.itemID,\n\t\t\t\t\tisLocked:\n\t\t\t\t\t\tcurrentState.paletteContainer.columns[index].isLocked,\n\t\t\t\t\tposition: index + 1,\n\t\t\t\t\tsize: currentState.paletteContainer.columns[index].size\n\t\t\t\t}));\n\n\t\t\t\t// update state history with type assertions\n\t\t\t\tawait this.#stateManager.batchUpdate(state => ({\n\t\t\t\t\tpaletteContainer: {\n\t\t\t\t\t\t...state.paletteContainer,\n\t\t\t\t\t\tcolumns: updatedColumns\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t},\n\t\t\t`[${caller}]: Failed to update palette item color.`,\n\t\t\t{ context: { columnID, newColor } }\n\t\t);\n\t}\n\n\tasync #renderPaletteColumn(\n\t\tcolumn: HTMLElement,\n\t\tcolumnID: number,\n\t\tcolorValue: string\n\t): Promise<void> {\n\t\treturn this.#errors.handleAsync(\n\t\t\tasync () => {\n\t\t\t\tconst preferences = this.#stateManager.get(\n\t\t\t\t\t'preferences'\n\t\t\t\t) as State['preferences'];\n\t\t\t\tconst colorSpace = preferences.colorSpace;\n\n\t\t\t\tif (!this.#utils.validate.colorInput(colorValue)) {\n\t\t\t\t\tthis.#log.warn(\n\t\t\t\t\t\t`Invalid color value: ${colorValue}. Unable to render column UI.`,\n\t\t\t\t\t\t`${caller}.#createColumnInUI`\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst validColorSpace = ['hex', 'hsl', 'rgb'].includes(\n\t\t\t\t\tcolorSpace\n\t\t\t\t)\n\t\t\t\t\t? colorSpace\n\t\t\t\t\t: 'hex';\n\n\t\t\t\tcolumn.style.backgroundColor = colorValue;\n\n\t\t\t\t// create color display input\n\t\t\t\tconst colorDisplay = document.createElement('input');\n\t\t\t\tcolorDisplay.id = `color-display-${columnID}`;\n\t\t\t\tcolorDisplay.className = 'color-display';\n\t\t\t\tcolorDisplay.type = 'text';\n\t\t\t\tcolorDisplay.value = colorValue;\n\t\t\t\tcolorDisplay.setAttribute('data-format', validColorSpace);\n\n\t\t\t\t// create color input button\n\t\t\t\tconst colorInputBtn = document.createElement('button');\n\t\t\t\tcolorInputBtn.id = `color-input-btn-${columnID}`;\n\t\t\t\tcolorInputBtn.className = 'color-input-btn';\n\t\t\t\tcolorInputBtn.textContent = 'Change Color';\n\n\t\t\t\t// create lock button\n\t\t\t\tconst lockBtn = document.createElement('button');\n\t\t\t\tlockBtn.id = `lock-btn-${columnID}`;\n\t\t\t\tlockBtn.className = 'lock-btn';\n\t\t\t\tlockBtn.textContent = 'Lock 🔒';\n\n\t\t\t\t// create drag handle button\n\t\t\t\tconst dragHandle = document.createElement('button');\n\t\t\t\tdragHandle.id = `drag-handle-${columnID}`;\n\t\t\t\tdragHandle.className = 'drag-handle';\n\t\t\t\tdragHandle.textContent = 'Move ☰';\n\n\t\t\t\t// create resize handle\n\t\t\t\tconst resizeHandle = document.createElement('div');\n\t\t\t\tresizeHandle.id = `resize-handle-${columnID}`;\n\t\t\t\tresizeHandle.className = 'resize-handle';\n\n\t\t\t\t// create color input modal\n\t\t\t\tconst colorInputModal = document.createElement('div');\n\t\t\t\tcolorInputModal.id = `color-input-modal-${columnID}`;\n\t\t\t\tcolorInputModal.className = 'color-input-modal hidden';\n\n\t\t\t\t// create color input inside the modal\n\t\t\t\tconst colorInput = document.createElement('input');\n\t\t\t\tcolorInput.id = `color-input-${columnID}`;\n\t\t\t\tcolorInput.className = 'color-input';\n\t\t\t\tcolorInput.type = 'color';\n\t\t\t\tcolorInput.value = colorValue;\n\n\t\t\t\t// append elements to their parent\n\t\t\t\tcolorInputModal.appendChild(colorInput);\n\t\t\t\tcolumn.appendChild(colorDisplay);\n\t\t\t\tcolumn.appendChild(colorInputBtn);\n\t\t\t\tcolumn.appendChild(lockBtn);\n\t\t\t\tcolumn.appendChild(dragHandle);\n\t\t\t\tcolumn.appendChild(resizeHandle);\n\t\t\t\tcolumn.appendChild(colorInputModal);\n\t\t\t},\n\t\t\t`[${caller}]: Failed to create column UI elements.`,\n\t\t\t{ context: { columnID, colorValue } }\n\t\t);\n\t}\n}\n"],"names":[],"mappings":"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"}