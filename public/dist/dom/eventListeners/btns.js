// File: dom/eventListeners/btns.js
import { createLogger } from '../../logger/factory.js';
import { domData } from '../../data/dom.js';
import { modeData as mode } from '../../data/mode.js';
import { parse as parseDom } from '../parse.js';
import { uiFn } from '../../ui/main.js';
import { utils as domUtils } from '../utils.js';
const btnIds = domData.ids.static.btns;
const divElements = domData.elements.static.divs;
const logMode = mode.logging;
const selectionElements = domData.elements.static.selects;
const thisModule = 'dom/eventListeners/groups/btns.js';
const addConversionListener = domUtils.event.addConversionListener;
const addEventListener = domUtils.event.addEventListener;
const logger = await createLogger();
async function initBtnEventListeners(uiManager) {
    // 1. DESATURATE BUTTON
    addEventListener(btnIds.desaturate, 'click', async (e) => {
        e.preventDefault();
        const selectedColor = selectionElements.swatch
            ? parseInt(selectionElements.swatch.value, 10)
            : 0;
        if (!mode.quiet && logMode.clicks)
            logger.info('desaturateButton clicked', `${thisModule} > desaturateButton click event`);
        uiManager.desaturateColor(selectedColor);
    });
    // 2. EXPORT BUTTON
    addEventListener(btnIds.export, 'click', async (e) => {
        e.preventDefault();
        const format = parseDom.paletteExportFormat();
        if (mode.debug && logMode.info && logMode.verbosity > 1)
            logger.info(`Export Button click event: Export format selected: ${format}`, `${thisModule} > exportButton click event`);
        if (!format) {
            if (logMode.error && !mode.quiet && logMode.verbosity > 1) {
                logger.error('Export format not selected', `${thisModule} > exportButton click event`);
                return;
            }
        }
        else {
            uiManager.handleExport(format);
        }
    });
    // 3. GENERATE BUTTON
    addEventListener(btnIds.generate, 'click', async (e) => {
        e.preventDefault();
        const { type, swatches, limitDark, limitGray, limitLight } = uiManager.pullParamsFromUI();
        if (logMode.info && logMode.verbosity > 1)
            logger.info('Generate Button click event: Retrieved parameters from UI.', `${thisModule} > generateButton click event`);
        if (logMode.info && mode.debug && logMode.verbosity > 1)
            logger.info(`Type: ${type}\nSwatches: ${swatches}\nLimit Dark: ${limitDark}\nLimit Gray: ${limitGray}\nLimit Light${limitLight}.`, `${thisModule} > generateButton click event`);
        const paletteOptions = {
            flags: {
                limitDark,
                limitGray,
                limitLight
            },
            swatches,
            type
        };
        await uiFn.startPaletteGeneration(paletteOptions);
    });
    // 4. HELP MENU BUTTON
    addEventListener(btnIds.helpMenu, 'click', async (e) => {
        e.preventDefault();
        divElements.helpMenu?.classList.remove('hidden');
    });
    // 5. HISTORY MENU BUTTON
    addEventListener(btnIds.historyMenu, 'click', async (e) => {
        e.preventDefault();
        divElements.historyMenu?.classList.remove('hidden');
    });
    // 6. SATURATE BUTTON
    addEventListener(btnIds.saturate, 'click', async (e) => {
        e.preventDefault();
        if (!selectionElements.swatch) {
            throw new Error('Selected color option not found');
        }
        const selectedColor = selectionElements.swatch
            ? parseInt(selectionElements.swatch.value, 10)
            : 0;
        uiManager.saturateColor(selectedColor);
    });
}
function initConversionBtnEventListeners() {
    addConversionListener(String(btnIds.showAsCMYK), 'cmyk');
    addConversionListener(String(btnIds.showAsHex), 'hex');
    addConversionListener(String(btnIds.showAsHSL), 'hsl');
    addConversionListener(String(btnIds.showAsHSV), 'hsv');
    addConversionListener(String(btnIds.showAsLAB), 'lab');
    addConversionListener(String(btnIds.showAsRGB), 'rgb');
}
export const btnListeners = {
    initialize: {
        conversionBtns: initConversionBtnEventListeners,
        main: initBtnEventListeners
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnRucy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9kb20vZXZlbnRMaXN0ZW5lcnMvYnRucy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxtQ0FBbUM7QUFJbkMsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQ3ZELE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUM1QyxPQUFPLEVBQUUsUUFBUSxJQUFJLElBQUksRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBQ3RELE9BQU8sRUFBRSxLQUFLLElBQUksUUFBUSxFQUFFLE1BQU0sYUFBYSxDQUFDO0FBQ2hELE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUN4QyxPQUFPLEVBQUUsS0FBSyxJQUFJLFFBQVEsRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUVoRCxNQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUM7QUFDdkMsTUFBTSxXQUFXLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDO0FBQ2pELE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUM7QUFDN0IsTUFBTSxpQkFBaUIsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUM7QUFFMUQsTUFBTSxVQUFVLEdBQUcsbUNBQW1DLENBQUM7QUFFdkQsTUFBTSxxQkFBcUIsR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDLHFCQUFxQixDQUFDO0FBQ25FLE1BQU0sZ0JBQWdCLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQztBQUV6RCxNQUFNLE1BQU0sR0FBRyxNQUFNLFlBQVksRUFBRSxDQUFDO0FBRXBDLEtBQUssVUFBVSxxQkFBcUIsQ0FBQyxTQUFvQjtJQUN4RCx1QkFBdUI7SUFDdkIsZ0JBQWdCLENBQUMsTUFB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QUFNLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ3ZELHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDdkQscUJBQXFCLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUN2RCxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQ3hELENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxZQUFZLEdBQUc7SUFDM0IsVUFBVSxFQUFFO1FBQ1gsY0FBYyxFQUFFLCtCQUErQjtRQUMvQyxJQUFJLEVBQUUscUJBQXFCO0tBQzNCO0NBQ0QsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEZpbGU6IGRvbS9ldmVudExpc3RlbmVycy9idG5zLmpzXG5cbmltcG9ydCB7IFBhbGV0dGVPcHRpb25zIH0gZnJvbSAnLi4vLi4vdHlwZXMvaW5kZXguanMnO1xuaW1wb3J0IHR5cGUgeyBVSU1hbmFnZXIgfSBmcm9tICcuLi8uLi91aS9VSU1hbmFnZXIuanMnO1xuaW1wb3J0IHsgY3JlYXRlTG9nZ2VyIH0gZnJvbSAnLi4vLi4vbG9nZ2VyL2ZhY3RvcnkuanMnO1xuaW1wb3J0IHsgZG9tRGF0YSB9IGZyb20gJy4uLy4uL2RhdGEvZG9tLmpzJztcbmltcG9ydCB7IG1vZGVEYXRhIGFzIG1vZGUgfSBmcm9tICcuLi8uLi9kYXRhL21vZGUuanMnO1xuaW1wb3J0IHsgcGFyc2UgYXMgcGFyc2VEb20gfSBmcm9tICcuLi9wYXJzZS5qcyc7XG5pbXBvcnQgeyB1aUZuIH0gZnJvbSAnLi4vLi4vdWkvbWFpbi5qcyc7XG5pbXBvcnQgeyB1dGlscyBhcyBkb21VdGlscyB9IGZyb20gJy4uL3V0aWxzLmpzJztcblxuY29uc3QgYnRuSWRzID0gZG9tRGF0YS5pZHMuc3RhdGljLmJ0bnM7XG5jb25zdCBkaXZFbGVtZW50cyA9IGRvbURhdGEuZWxlbWVudHMuc3RhdGljLmRpdnM7XG5jb25zdCBsb2dNb2RlID0gbW9kZS5sb2dnaW5nO1xuY29uc3Qgc2VsZWN0aW9uRWxlbWVudHMgPSBkb21EYXRhLmVsZW1lbnRzLnN0YXRpYy5zZWxlY3RzO1xuXG5jb25zdCB0aGlzTW9kdWxlID0gJ2RvbS9ldmVudExpc3RlbmVycy9ncm91cHMvYnRucy5qcyc7XG5cbmNvbnN0IGFkZENvbnZlcnNpb25MaXN0ZW5lciA9IGRvbVV0aWxzLmV2ZW50LmFkZENvbnZlcnNpb25MaXN0ZW5lcjtcbmNvbnN0IGFkZEV2ZW50TGlzdGVuZXIgPSBkb21VdGlscy5ldmVudC5hZGRFdmVudExpc3RlbmVyO1xuXG5jb25zdCBsb2dnZXIgPSBhd2FpdCBjcmVhdGVMb2dnZXIoKTtcblxuYXN5bmMgZnVuY3Rpb24gaW5pdEJ0bkV2ZW50TGlzdGVuZXJzKHVpTWFuYWdlcjogVUlNYW5hZ2VyKTogUHJvbWlzZTx2b2lkPiB7XG5cdC8vIDEuIERFU0FUVVJBVEUgQlVUVE9OXG5cdGFkZEV2ZW50TGlzdGVuZXIoYnRuSWRzLmRlc2F0dXJhdGUsICdjbGljaycsIGFzeW5jIChlOiBNb3VzZUV2ZW50KSA9PiB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0Y29uc3Qgc2VsZWN0ZWRDb2xvciA9IHNlbGVjdGlvbkVsZW1lbnRzLnN3YXRjaFxuXHRcdFx0PyBwYXJzZUludChzZWxlY3Rpb25FbGVtZW50cy5zd2F0Y2gudmFsdWUsIDEwKVxuXHRcdFx0OiAwO1xuXG5cdFx0aWYgKCFtb2RlLnF1aWV0ICYmIGxvZ01vZGUuY2xpY2tzKVxuXHRcdFx0bG9nZ2VyLmluZm8oXG5cdFx0XHRcdCdkZXNhdHVyYXRlQnV0dG9uIGNsaWNrZWQnLFxuXHRcdFx0XHRgJHt0aGlzTW9kdWxlfSA+IGRlc2F0dXJhdGVCdXR0b24gY2xpY2sgZXZlbnRgXG5cdFx0XHQpO1xuXG5cdFx0dWlNYW5hZ2VyIS5kZXNhdHVyYXRlQ29sb3Ioc2VsZWN0ZWRDb2xvcik7XG5cdH0pO1xuXG5cdC8vIDIuIEVYUE9SVCBCVVRUT05cblx0YWRkRXZlbnRMaXN0ZW5lcihidG5JZHMuZXhwb3J0LCAnY2xpY2snLCBhc3luYyAoZTogTW91c2VFdmVudCkgPT4ge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdGNvbnN0IGZvcm1hdCA9IHBhcnNlRG9tLnBhbGV0dGVFeHBvcnRGb3JtYXQoKTtcblxuXHRcdGlmIChtb2RlLmRlYnVnICYmIGxvZ01vZGUuaW5mbyAmJiBsb2dNb2RlLnZlcmJvc2l0eSA+IDEpXG5cdFx0XHRsb2dnZXIuaW5mbyhcblx0XHRcdFx0YEV4cG9ydCBCdXR0b24gY2xpY2sgZXZlbnQ6IEV4cG9ydCBmb3JtYXQgc2VsZWN0ZWQ6ICR7Zm9ybWF0fWAsXG5cdFx0XHRcdGAke3RoaXNNb2R1bGV9ID4gZXhwb3J0QnV0dG9uIGNsaWNrIGV2ZW50YFxuXHRcdFx0KTtcblxuXHRcdGlmICghZm9ybWF0KSB7XG5cdFx0XHRpZiAobG9nTW9kZS5lcnJvciAmJiAhbW9kZS5xdWlldCAmJiBsb2dNb2RlLnZlcmJvc2l0eSA+IDEpIHtcblx0XHRcdFx0bG9nZ2VyLmVycm9yKFxuXHRcdFx0XHRcdCdFeHBvcnQgZm9ybWF0IG5vdCBzZWxlY3RlZCcsXG5cdFx0XHRcdFx0YCR7dGhpc01vZHVsZX0gPiBleHBvcnRCdXR0b24gY2xpY2sgZXZlbnRgXG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR1aU1hbmFnZXIhLmhhbmRsZUV4cG9ydChmb3JtYXQpO1xuXHRcdH1cblx0fSk7XG5cblx0Ly8gMy4gR0VORVJBVEUgQlVUVE9OXG5cdGFkZEV2ZW50TGlzdGVuZXIoYnRuSWRzLmdlbmVyYXRlLCAnY2xpY2snLCBhc3luYyAoZTogTW91c2VFdmVudCkgPT4ge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdGNvbnN0IHsgdHlwZSwgc3dhdGNoZXMsIGxpbWl0RGFyaywgbGltaXRHcmF5LCBsaW1pdExpZ2h0IH0gPVxuXHRcdFx0dWlNYW5hZ2VyIS5wdWxsUGFyYW1zRnJvbVVJKCk7XG5cblx0XHRpZiAobG9nTW9kZS5pbmZvICYmIGxvZ01vZGUudmVyYm9zaXR5ID4gMSlcblx0XHRcdGxvZ2dlci5pbmZvKFxuXHRcdFx0XHQnR2VuZXJhdGUgQnV0dG9uIGNsaWNrIGV2ZW50OiBSZXRyaWV2ZWQgcGFyYW1ldGVycyBmcm9tIFVJLicsXG5cdFx0XHRcdGAke3RoaXNNb2R1bGV9ID4gZ2VuZXJhdGVCdXR0b24gY2xpY2sgZXZlbnRgXG5cdFx0XHQpO1xuXG5cdFx0aWYgKGxvZ01vZGUuaW5mbyAmJiBtb2RlLmRlYnVnICYmIGxvZ01vZGUudmVyYm9zaXR5ID4gMSlcblx0XHRcdGxvZ2dlci5pbmZvKFxuXHRcdFx0XHRgVHlwZTogJHt0eXBlfVxcblN3YXRjaGVzOiAke3N3YXRjaGVzfVxcbkxpbWl0IERhcms6ICR7bGltaXREYXJrfVxcbkxpbWl0IEdyYXk6ICR7bGltaXRHcmF5fVxcbkxpbWl0IExpZ2h0JHtsaW1pdExpZ2h0fS5gLFxuXHRcdFx0XHRgJHt0aGlzTW9kdWxlfSA+IGdlbmVyYXRlQnV0dG9uIGNsaWNrIGV2ZW50YFxuXHRcdFx0KTtcblxuXHRcdGNvbnN0IHBhbGV0dGVPcHRpb25zOiBQYWxldHRlT3B0aW9ucyA9IHtcblx0XHRcdGZsYWdzOiB7XG5cdFx0XHRcdGxpbWl0RGFyayxcblx0XHRcdFx0bGltaXRHcmF5LFxuXHRcdFx0XHRsaW1pdExpZ2h0XG5cdFx0XHR9LFxuXHRcdFx0c3dhdGNoZXMsXG5cdFx0XHR0eXBlXG5cdFx0fTtcblxuXHRcdGF3YWl0IHVpRm4uc3RhcnRQYWxldHRlR2VuZXJhdGlvbihwYWxldHRlT3B0aW9ucyk7XG5cdH0pO1xuXG5cdC8vIDQuIEhFTFAgTUVOVSBCVVRUT05cblx0YWRkRXZlbnRMaXN0ZW5lcihidG5JZHMuaGVscE1lbnUsICdjbGljaycsIGFzeW5jIChlOiBNb3VzZUV2ZW50KSA9PiB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0ZGl2RWxlbWVudHMuaGVscE1lbnU/LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuXHR9KTtcblxuXHQvLyA1LiBISVNUT1JZIE1FTlUgQlVUVE9OXG5cdGFkZEV2ZW50TGlzdGVuZXIoYnRuSWRzLmhpc3RvcnlNZW51LCAnY2xpY2snLCBhc3luYyAoZTogTW91c2VFdmVudCkgPT4ge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdGRpdkVsZW1lbnRzLmhpc3RvcnlNZW51Py5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcblx0fSk7XG5cblx0Ly8gNi4gU0FUVVJBVEUgQlVUVE9OXG5cdGFkZEV2ZW50TGlzdGVuZXIoYnRuSWRzLnNhdHVyYXRlLCAnY2xpY2snLCBhc3luYyAoZTogTW91c2VFdmVudCkgPT4ge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdGlmICghc2VsZWN0aW9uRWxlbWVudHMuc3dhdGNoKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ1NlbGVjdGVkIGNvbG9yIG9wdGlvbiBub3QgZm91bmQnKTtcblx0XHR9XG5cblx0XHRjb25zdCBzZWxlY3RlZENvbG9yID0gc2VsZWN0aW9uRWxlbWVudHMuc3dhdGNoXG5cdFx0XHQ/IHBhcnNlSW50KHNlbGVjdGlvbkVsZW1lbnRzLnN3YXRjaC52YWx1ZSwgMTApXG5cdFx0XHQ6IDA7XG5cblx0XHR1aU1hbmFnZXIhLnNhdHVyYXRlQ29sb3Ioc2VsZWN0ZWRDb2xvcik7XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBpbml0Q29udmVyc2lvbkJ0bkV2ZW50TGlzdGVuZXJzKCk6IHZvaWQge1xuXHRhZGRDb252ZXJzaW9uTGlzdGVuZXIoU3RyaW5nKGJ0bklkcy5zaG93QXNDTVlLKSwgJ2NteWsnKTtcblx0YWRkQ29udmVyc2lvbkxpc3RlbmVyKFN0cmluZyhidG5JZHMuc2hvd0FzSGV4KSwgJ2hleCcpO1xuXHRhZGRDb252ZXJzaW9uTGlzdGVuZXIoU3RyaW5nKGJ0bklkcy5zaG93QXNIU0wpLCAnaHNsJyk7XG5cdGFkZENvbnZlcnNpb25MaXN0ZW5lcihTdHJpbmcoYnRuSWRzLnNob3dBc0hTViksICdoc3YnKTtcblx0YWRkQ29udmVyc2lvbkxpc3RlbmVyKFN0cmluZyhidG5JZHMuc2hvd0FzTEFCKSwgJ2xhYicpO1xuXHRhZGRDb252ZXJzaW9uTGlzdGVuZXIoU3RyaW5nKGJ0bklkcy5zaG93QXNSR0IpLCAncmdiJyk7XG59XG5cbmV4cG9ydCBjb25zdCBidG5MaXN0ZW5lcnMgPSB7XG5cdGluaXRpYWxpemU6IHtcblx0XHRjb252ZXJzaW9uQnRuczogaW5pdENvbnZlcnNpb25CdG5FdmVudExpc3RlbmVycyxcblx0XHRtYWluOiBpbml0QnRuRXZlbnRMaXN0ZW5lcnNcblx0fVxufTtcbiJdfQ==