{"version":3,"file":"LocalStorageManager.js","sources":["../../../../src/storage/LocalStorageManager.ts"],"sourcesContent":["// File: storage/LocalStorageManager.js\n\nimport { ServicesInterface } from '../types/index.js';\n\nexport class LocalStorageManager {\n\tprivate static instance: LocalStorageManager | null = null;\n\tprivate log: ServicesInterface['log'];\n\n\tprivate constructor(services: ServicesInterface) {\n\t\tthis.log = services.log;\n\t}\n\n\tpublic static getInstance(\n\t\tservices: ServicesInterface\n\t): LocalStorageManager {\n\t\tif (!LocalStorageManager.instance) {\n\t\t\tLocalStorageManager.instance = new LocalStorageManager(services);\n\t\t}\n\n\t\treturn LocalStorageManager.instance;\n\t}\n\n\tpublic async init(): Promise<boolean> {\n\t\tthis.log(\n\t\t\t'warn',\n\t\t\t'Using LocalStorage as a fallback.',\n\t\t\t'LocalStorageManager.init()',\n\t\t\t2\n\t\t);\n\t\treturn true;\n\t}\n\n\tpublic async clear(): Promise<void> {\n\t\tlocalStorage.clear();\n\t}\n\n\tpublic async getItem<T>(key: string): Promise<T | null> {\n\t\ttry {\n\t\t\tconst value = localStorage.getItem(key);\n\t\t\treturn value ? JSON.parse(value) : null;\n\t\t} catch (error) {\n\t\t\tthis.log(\n\t\t\t\t'error',\n\t\t\t\t`Failed to get item: ${key}`,\n\t\t\t\t'LocalStorageManager.getItem()'\n\t\t\t);\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tpublic async removeItem(key: string): Promise<void> {\n\t\tlocalStorage.removeItem(key);\n\t}\n\n\tpublic async setItem(key: string, value: unknown): Promise<void> {\n\t\ttry {\n\t\t\tlocalStorage.setItem(key, JSON.stringify(value));\n\t\t\tthis.log(\n\t\t\t\t'info',\n\t\t\t\t`Stored item: ${key}`,\n\t\t\t\t'LocalStorageManager.setItem()'\n\t\t\t);\n\t\t} catch (error) {\n\t\t\tthis.log(\n\t\t\t\t'error',\n\t\t\t\t`Failed to store item: ${key}`,\n\t\t\t\t'LocalStorageManager.setItem()'\n\t\t\t);\n\t\t}\n\t}\n}\n"],"names":[],"mappings":"AAAA;MAIa,mBAAmB,CAAA;AACvB,IAAA,OAAO,QAAQ,GAA+B,IAAI;AAClD,IAAA,GAAG;AAEX,IAAA,WAAA,CAAoB,QAA2B,EAAA;AAC9C,QAAA,IAAI,CAAC,GAAG,GAAG,QAAQ,CAAC,GAAG;;IAGjB,OAAO,WAAW,CACxB,QAA2B,EAAA;AAE3B,QAAA,IAAI,CAAC,mBAAmB,CAAC,QAAQ,EAAE;YAClC,mBAAmB,CAAC,QAAQ,GAAG,IAAI,mBAAmB,CAAC,QAAQ,CAAC;;QAGjE,OAAO,mBAAmB,CAAC,QAAQ;;AAG7B,IAAA,MAAM,IAAI,GAAA;QAChB,IAAI,CAAC,GAAG,CACP,MAAM,EACN,mCAAmC,EACnC,4BAA4B,EAC5B,CAAC,CACD;AACD,QAAA,OAAO,IAAI;;AAGL,IAAA,MAAM,KAAK,GAAA;QACjB,YAAY,CAAC,KAAK,EAAE;;IAGd,MAAM,OAAO,CAAI,GAAW,EAAA;AAClC,QAAA,IAAI;YACH,MAAM,KAAK,GAAG,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC;AACvC,YAAA,OAAO,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,IAAI;;QACtC,OAAO,KAAK,EAAE;YACf,IAAI,CAAC,GAAG,CACP,OAAO,EACP,CAAuB,oBAAA,EAAA,GAAG,CAAE,CAAA,EAC5B,+BAA+B,CAC/B;AACD,YAAA,OAAO,IAAI;;;IAIN,MAAM,UAAU,CAAC,GAAW,EAAA;AAClC,QAAA,YAAY,CAAC,UAAU,CAAC,GAAG,CAAC;;AAGtB,IAAA,MAAM,OAAO,CAAC,GAAW,EAAE,KAAc,EAAA;AAC/C,QAAA,IAAI;AACH,YAAA,YAAY,CAAC,OAAO,CAAC,GAAG,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;YAChD,IAAI,CAAC,GAAG,CACP,MAAM,EACN,CAAgB,aAAA,EAAA,GAAG,CAAE,CAAA,EACrB,+BAA+B,CAC/B;;QACA,OAAO,KAAK,EAAE;YACf,IAAI,CAAC,GAAG,CACP,OAAO,EACP,CAAyB,sBAAA,EAAA,GAAG,CAAE,CAAA,EAC9B,+BAA+B,CAC/B;;;;;;;"}