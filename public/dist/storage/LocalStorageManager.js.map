{"version":3,"file":"LocalStorageManager.js","sources":["../../../../src/storage/LocalStorageManager.ts"],"sourcesContent":["// File: storage/LocalStorageManager.js\n\nimport {\n\tLocalStorageManagerClassInterface,\n\tServicesInterface\n} from '../types/index.js';\n\nexport class LocalStorageManager implements LocalStorageManagerClassInterface {\n\tprivate static instance: LocalStorageManager | null = null;\n\tprivate log: ServicesInterface['log'];\n\tprivate errors: ServicesInterface['errors'];\n\n\tprivate constructor(services: ServicesInterface) {\n\t\tthis.log = services.log;\n\t\tthis.errors = services.errors;\n\t}\n\n\tpublic static getInstance(\n\t\tservices: ServicesInterface\n\t): LocalStorageManager {\n\t\tif (!LocalStorageManager.instance) {\n\t\t\tLocalStorageManager.instance = new LocalStorageManager(services);\n\t\t}\n\n\t\treturn LocalStorageManager.instance;\n\t}\n\n\tpublic async init(): Promise<boolean> {\n\t\tthis.log(\n\t\t\t'warn',\n\t\t\t'Using LocalStorage as a fallback.',\n\t\t\t'LocalStorageManager.init()',\n\t\t\t2\n\t\t);\n\t\treturn true;\n\t}\n\n\tpublic async clear(): Promise<void> {\n\t\tawait this.errors.handleAsync(\n\t\t\tasync () => localStorage.clear(),\n\t\t\t'Failed to clear LocalStorage',\n\t\t\t'LocalStorageManager.clear()'\n\t\t);\n\t}\n\n\tpublic async getItem<T>(key: string): Promise<T | null> {\n\t\treturn this.errors.handleAsync(\n\t\t\tasync () => {\n\t\t\t\tconst value = localStorage.getItem(key);\n\t\t\t\treturn value ? JSON.parse(value) : null;\n\t\t\t},\n\t\t\t`Failed to get item ${key} from LocalStorage`,\n\t\t\t'LocalStorageManager.getItem()'\n\t\t);\n\t}\n\n\tpublic async removeItem(key: string): Promise<void> {\n\t\tawait this.errors.handleAsync(\n\t\t\tasync () => localStorage.removeItem(key),\n\t\t\t`Failed to remove item ${key} from LocalStorage`,\n\t\t\t'LocalStorageManager.removeItem()'\n\t\t);\n\t}\n\n\tpublic async setItem(key: string, value: unknown): Promise<void> {\n\t\tawait this.errors.handleAsync(\n\t\t\tasync () => {\n\t\t\t\tlocalStorage.setItem(key, JSON.stringify(value));\n\t\t\t\tthis.log(\n\t\t\t\t\t'info',\n\t\t\t\t\t`Stored item: ${key}`,\n\t\t\t\t\t'LocalStorageManager.setItem()'\n\t\t\t\t);\n\t\t\t},\n\t\t\t`Failed to store item ${key} in LocalStorage`,\n\t\t\t'LocalStorageManager.setItem()'\n\t\t);\n\t}\n}\n"],"names":[],"mappings":"AAAA;MAOa,mBAAmB,CAAA;AACvB,IAAA,OAAO,QAAQ,GAA+B,IAAI;AAClD,IAAA,GAAG;AACH,IAAA,MAAM;AAEd,IAAA,WAAA,CAAoB,QAA2B,EAAA;AAC9C,QAAA,IAAI,CAAC,GAAG,GAAG,QAAQ,CAAC,GAAG;AACvB,QAAA,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,MAAM;;IAGvB,OAAO,WAAW,CACxB,QAA2B,EAAA;AAE3B,QAAA,IAAI,CAAC,mBAAmB,CAAC,QAAQ,EAAE;YAClC,mBAAmB,CAAC,QAAQ,GAAG,IAAI,mBAAmB,CAAC,QAAQ,CAAC;;QAGjE,OAAO,mBAAmB,CAAC,QAAQ;;AAG7B,IAAA,MAAM,IAAI,GAAA;QAChB,IAAI,CAAC,GAAG,CACP,MAAM,EACN,mCAAmC,EACnC,4BAA4B,EAC5B,CAAC,CACD;AACD,QAAA,OAAO,IAAI;;AAGL,IAAA,MAAM,KAAK,GAAA;AACjB,QAAA,MAAM,IAAI,CAAC,MAAM,CAAC,WAAW,CAC5B,YAAY,YAAY,CAAC,KAAK,EAAE,EAChC,8BAA8B,EAC9B,6BAA6B,CAC7B;;IAGK,MAAM,OAAO,CAAI,GAAW,EAAA;QAClC,OAAO,IAAI,CAAC,MAAM,CAAC,WAAW,CAC7B,YAAW;YACV,MAAM,KAAK,GAAG,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC;AACvC,YAAA,OAAO,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,IAAI;AACxC,SAAC,EACD,CAAsB,mBAAA,EAAA,GAAG,oBAAoB,EAC7C,+BAA+B,CAC/B;;IAGK,MAAM,UAAU,CAAC,GAAW,EAAA;QAClC,MAAM,IAAI,CAAC,MAAM,CAAC,WAAW,CAC5B,YAAY,YAAY,CAAC,UAAU,CAAC,GAAG,CAAC,EACxC,CAAA,sBAAA,EAAyB,GAAG,CAAoB,kBAAA,CAAA,EAChD,kCAAkC,CAClC;;AAGK,IAAA,MAAM,OAAO,CAAC,GAAW,EAAE,KAAc,EAAA;QAC/C,MAAM,IAAI,CAAC,MAAM,CAAC,WAAW,CAC5B,YAAW;AACV,YAAA,YAAY,CAAC,OAAO,CAAC,GAAG,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;YAChD,IAAI,CAAC,GAAG,CACP,MAAM,EACN,CAAgB,aAAA,EAAA,GAAG,CAAE,CAAA,EACrB,+BAA+B,CAC/B;AACF,SAAC,EACD,CAAwB,qBAAA,EAAA,GAAG,kBAAkB,EAC7C,+BAA+B,CAC/B;;;;;;"}