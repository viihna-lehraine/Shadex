{"version":3,"file":"LocalStorageManager.js","sources":["../../../../src/storage/LocalStorageManager.ts"],"sourcesContent":["// File: storage/LocalStorageManager.js\n\nimport {\n\tLocalStorageManagerInterface,\n\tServicesInterface\n} from '../types/index.js';\n\nexport class LocalStorageManager implements LocalStorageManagerInterface {\n\tprivate static instance: LocalStorageManager | null = null;\n\tprivate log: ServicesInterface['log'];\n\tprivate errors: ServicesInterface['errors'];\n\n\tprivate constructor(services: ServicesInterface) {\n\t\tthis.log = services.log;\n\t\tthis.errors = services.errors;\n\t}\n\n\tpublic static getInstance(\n\t\tservices: ServicesInterface\n\t): LocalStorageManager {\n\t\tif (!LocalStorageManager.instance) {\n\t\t\tLocalStorageManager.instance = new LocalStorageManager(services);\n\t\t}\n\n\t\treturn LocalStorageManager.instance;\n\t}\n\n\tpublic async init(): Promise<boolean> {\n\t\tthis.log('Using LocalStorage as a fallback.', 'warn');\n\t\treturn true;\n\t}\n\n\tpublic async clear(): Promise<void> {\n\t\tawait this.errors.handleAsync(\n\t\t\tasync () => localStorage.clear(),\n\t\t\t'Failed to clear LocalStorage'\n\t\t);\n\t}\n\n\tpublic async getItem<T>(key: string): Promise<T | null> {\n\t\treturn this.errors.handleAsync(async () => {\n\t\t\tconst value = localStorage.getItem(key);\n\t\t\treturn value ? JSON.parse(value) : null;\n\t\t}, `Failed to get item ${key} from LocalStorage`);\n\t}\n\n\tpublic async removeItem(key: string): Promise<void> {\n\t\tawait this.errors.handleAsync(\n\t\t\tasync () => localStorage.removeItem(key),\n\t\t\t`Failed to remove item ${key} from LocalStorage`\n\t\t);\n\t}\n\n\tpublic async setItem(key: string, value: unknown): Promise<void> {\n\t\tawait this.errors.handleAsync(async () => {\n\t\t\tlocalStorage.setItem(key, JSON.stringify(value));\n\t\t\tthis.log(`Stored item: ${key}`);\n\t\t}, `Failed to store item ${key} in LocalStorage`);\n\t}\n}\n"],"names":[],"mappings":"AAAA;MAOa,mBAAmB,CAAA;AACvB,IAAA,OAAO,QAAQ,GAA+B,IAAI;AAClD,IAAA,GAAG;AACH,IAAA,MAAM;AAEd,IAAA,WAAA,CAAoB,QAA2B,EAAA;AAC9C,QAAA,IAAI,CAAC,GAAG,GAAG,QAAQ,CAAC,GAAG;AACvB,QAAA,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,MAAM;;IAGvB,OAAO,WAAW,CACxB,QAA2B,EAAA;AAE3B,QAAA,IAAI,CAAC,mBAAmB,CAAC,QAAQ,EAAE;YAClC,mBAAmB,CAAC,QAAQ,GAAG,IAAI,mBAAmB,CAAC,QAAQ,CAAC;;QAGjE,OAAO,mBAAmB,CAAC,QAAQ;;AAG7B,IAAA,MAAM,IAAI,GAAA;AAChB,QAAA,IAAI,CAAC,GAAG,CAAC,mCAAmC,EAAE,MAAM,CAAC;AACrD,QAAA,OAAO,IAAI;;AAGL,IAAA,MAAM,KAAK,GAAA;AACjB,QAAA,MAAM,IAAI,CAAC,MAAM,CAAC,WAAW,CAC5B,YAAY,YAAY,CAAC,KAAK,EAAE,EAChC,8BAA8B,CAC9B;;IAGK,MAAM,OAAO,CAAI,GAAW,EAAA;QAClC,OAAO,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,YAAW;YACzC,MAAM,KAAK,GAAG,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC;AACvC,YAAA,OAAO,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,IAAI;AACxC,SAAC,EAAE,CAAA,mBAAA,EAAsB,GAAG,CAAA,kBAAA,CAAoB,CAAC;;IAG3C,MAAM,UAAU,CAAC,GAAW,EAAA;QAClC,MAAM,IAAI,CAAC,MAAM,CAAC,WAAW,CAC5B,YAAY,YAAY,CAAC,UAAU,CAAC,GAAG,CAAC,EACxC,CAAyB,sBAAA,EAAA,GAAG,CAAoB,kBAAA,CAAA,CAChD;;AAGK,IAAA,MAAM,OAAO,CAAC,GAAW,EAAE,KAAc,EAAA;QAC/C,MAAM,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,YAAW;AACxC,YAAA,YAAY,CAAC,OAAO,CAAC,GAAG,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;AAChD,YAAA,IAAI,CAAC,GAAG,CAAC,gBAAgB,GAAG,CAAA,CAAE,CAAC;AAChC,SAAC,EAAE,CAAA,qBAAA,EAAwB,GAAG,CAAA,gBAAA,CAAkB,CAAC;;;;;;"}