{"version":3,"file":"LocalStorageManager.js","sources":["../../../../src/storage/LocalStorageManager.ts"],"sourcesContent":["// File: storage/LocalStorageManager.js\n\nimport { LocalStorageManagerInterface, Services } from '../types/index.js';\n\nexport class LocalStorageManager implements LocalStorageManagerInterface {\n\tstatic #instance: LocalStorageManager | null = null;\n\t#log: Services['log'];\n\t#errors: Services['errors'];\n\n\tprivate constructor(services: Services) {\n\t\tthis.#log = services.log;\n\t\tthis.#errors = services.errors;\n\t}\n\n\tstatic getInstance(services: Services): LocalStorageManager {\n\t\tif (!LocalStorageManager.#instance) {\n\t\t\tLocalStorageManager.#instance = new LocalStorageManager(services);\n\t\t}\n\n\t\treturn LocalStorageManager.#instance;\n\t}\n\n\tasync init(): Promise<boolean> {\n\t\tthis.#log('Using LocalStorage as a fallback.', 'warn');\n\t\treturn true;\n\t}\n\n\tasync clear(): Promise<void> {\n\t\tawait this.#errors.handleAsync(\n\t\t\tasync () => localStorage.clear(),\n\t\t\t'Failed to clear LocalStorage'\n\t\t);\n\t}\n\n\tasync getItem<T>(key: string): Promise<T | null> {\n\t\treturn this.#errors.handleAsync(async () => {\n\t\t\tconst value = localStorage.getItem(key);\n\t\t\treturn value ? JSON.parse(value) : null;\n\t\t}, `Failed to get item ${key} from LocalStorage`);\n\t}\n\n\tasync removeItem(key: string): Promise<void> {\n\t\tawait this.#errors.handleAsync(\n\t\t\tasync () => localStorage.removeItem(key),\n\t\t\t`Failed to remove item ${key} from LocalStorage`\n\t\t);\n\t}\n\n\tasync setItem(key: string, value: unknown): Promise<void> {\n\t\tawait this.#errors.handleAsync(async () => {\n\t\t\tlocalStorage.setItem(key, JSON.stringify(value));\n\t\t\tthis.#log(`Stored item: ${key}`);\n\t\t}, `Failed to store item ${key} in LocalStorage`);\n\t}\n}\n"],"names":[],"mappings":"AAAA;MAIa,mBAAmB,CAAA;AAC/B,IAAA,OAAO,SAAS,GAA+B,IAAI;AACnD,IAAA,IAAI;AACJ,IAAA,OAAO;AAEP,IAAA,WAAA,CAAoB,QAAkB,EAAA;AACrC,QAAA,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC,GAAG;AACxB,QAAA,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC,MAAM;;IAG/B,OAAO,WAAW,CAAC,QAAkB,EAAA;AACpC,QAAA,IAAI,CAAC,mBAAmB,CAAC,SAAS,EAAE;YACnC,mBAAmB,CAAC,SAAS,GAAG,IAAI,mBAAmB,CAAC,QAAQ,CAAC;;QAGlE,OAAO,mBAAmB,CAAC,SAAS;;AAGrC,IAAA,MAAM,IAAI,GAAA;AACT,QAAA,IAAI,CAAC,IAAI,CAAC,mCAAmC,EAAE,MAAM,CAAC;AACtD,QAAA,OAAO,IAAI;;AAGZ,IAAA,MAAM,KAAK,GAAA;AACV,QAAA,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAC7B,YAAY,YAAY,CAAC,KAAK,EAAE,EAChC,8BAA8B,CAC9B;;IAGF,MAAM,OAAO,CAAI,GAAW,EAAA;QAC3B,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,YAAW;YAC1C,MAAM,KAAK,GAAG,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC;AACvC,YAAA,OAAO,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,IAAI;AACxC,SAAC,EAAE,CAAA,mBAAA,EAAsB,GAAG,CAAA,kBAAA,CAAoB,CAAC;;IAGlD,MAAM,UAAU,CAAC,GAAW,EAAA;QAC3B,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAC7B,YAAY,YAAY,CAAC,UAAU,CAAC,GAAG,CAAC,EACxC,CAAyB,sBAAA,EAAA,GAAG,CAAoB,kBAAA,CAAA,CAChD;;AAGF,IAAA,MAAM,OAAO,CAAC,GAAW,EAAE,KAAc,EAAA;QACxC,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,YAAW;AACzC,YAAA,YAAY,CAAC,OAAO,CAAC,GAAG,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;AAChD,YAAA,IAAI,CAAC,IAAI,CAAC,gBAAgB,GAAG,CAAA,CAAE,CAAC;AACjC,SAAC,EAAE,CAAA,qBAAA,EAAwB,GAAG,CAAA,gBAAA,CAAkB,CAAC;;;;;;"}