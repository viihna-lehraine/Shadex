// File: palette/common/superUtils/create.js
import { coreConversionUtils, coreUtils, utils } from '../../../common/index.js';
import { helpers as paletteHelpers } from '../helpers/index.js';
const limits = paletteHelpers.limits;
const update = paletteHelpers.update;
const hslTo = coreConversionUtils.hslTo;
function baseColor(customColor) {
    const color = coreUtils.base.clone(customColor);
    return color;
}
async function paletteItem(color) {
    const clonedColor = coreUtils.base.clone(color);
    return {
        colors: {
            main: {
                cmyk: hslTo(clonedColor, 'cmyk').value,
                hex: hslTo(clonedColor, 'hex').value,
                hsl: clonedColor.value,
                hsv: hslTo(clonedColor, 'hsv').value,
                lab: hslTo(clonedColor, 'lab').value,
                rgb: hslTo(clonedColor, 'rgb').value,
                xyz: hslTo(clonedColor, 'xyz').value
            },
            stringProps: {
                cmyk: utils.color.colorToColorString(hslTo(clonedColor, 'cmyk')).value,
                hex: utils.color.colorToColorString(hslTo(clonedColor, 'hex')).value,
                hsl: utils.color.colorToColorString(clonedColor).value,
                hsv: utils.color.colorToColorString(hslTo(clonedColor, 'hsv')).value,
                lab: utils.color.colorToColorString(hslTo(clonedColor, 'lab')).value,
                rgb: utils.color.colorToColorString(hslTo(clonedColor, 'rgb')).value,
                xyz: utils.color.colorToColorString(hslTo(clonedColor, 'xyz')).value
            },
            css: {
                cmyk: await coreUtils.convert.colorToCSSColorString(hslTo(clonedColor, 'cmyk')),
                hex: await coreUtils.convert.colorToCSSColorString(hslTo(clonedColor, 'hex')),
                hsl: await coreUtils.convert.colorToCSSColorString(clonedColor),
                hsv: await coreUtils.convert.colorToCSSColorString(hslTo(clonedColor, 'hsv')),
                lab: await coreUtils.convert.colorToCSSColorString(hslTo(clonedColor, 'lab')),
                rgb: await coreUtils.convert.colorToCSSColorString(hslTo(clonedColor, 'rgb')),
                xyz: await coreUtils.convert.colorToCSSColorString(hslTo(clonedColor, 'xyz'))
            }
        }
    };
}
async function paletteItemArray(baseColor, hues, limitDark, limitGray, limitLight) {
    const paletteItems = [await paletteItem(baseColor)];
    for (const [i, hue] of hues.entries()) {
        let newColor = null;
        do {
            const sl = utils.random.sl();
            newColor = utils.conversion.genAllColorValues({
                value: {
                    hue: coreUtils.brand.asRadial(hue),
                    ...sl.value
                },
                format: 'hsl'
            }).hsl;
        } while (newColor &&
            ((limitGray && limits.isTooGray(newColor)) ||
                (limitDark && limits.isTooDark(newColor)) ||
                (limitLight && limits.isTooLight(newColor))));
        if (newColor) {
            const newPaletteItem = await paletteItem(newColor);
            paletteItems.push(newPaletteItem);
            update.colorBox(newColor, i + 1);
        }
    }
    return paletteItems;
}
export const create = {
    baseColor,
    paletteItem,
    paletteItemArray
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL3BhbGV0dGUvY29tbW9uL3N1cGVyVXRpbHMvY3JlYXRlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDRDQUE0QztBQW9CNUMsT0FBTyxFQUNOLG1CQUFtQixFQUNuQixTQUFTLEVBQ1QsS0FBSyxFQUNMLE1BQU0sMEJBQTBCLENBQUM7QUFDbEMsT0FBTyxFQUFFLE9BQU8sSUFBSSxjQUFjLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUVoRSxNQUFNLE1BQU0sR0FBRyxjQUFjLENBQUMsTUFBTSxDQUFDO0FBQ3JDLE1BQU0sTUFBTSxHQUFHLGNBQWMsQ0FBQyxNQUFNLENBQUM7QUFFckMsTUFBTSxLQUFLLEdBQUcsbUJBQW1CLENBQUMsS0FBSyxDQUFDO0FBRXhDLFNBQVMsU0FBUyxDQUFDLFdBQXVCO0lBQ3pDLE1BQU0sS0FBSyxHQUFHLFNBQVMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBRWhELE9BQU8sS0FBWSxDQUFDO0FBQ3JCLENBQUM7QUFFRCxLQUFLLFVBQVUsV0FBVyxDQUFDLEtBQVU7SUFDcEMsTUFBTSxXQUFXLEdBQUcsU0FBUyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFRLENBQUM7SUFFdkQsT0FBTztRQUNOLE1BQU0sRUFBRTtZQUNQLElBQUksRUFBRTtnQkFDTCxJQUFJLEVBQUcsS0FBSyxDQUFDLFdBQVcsRUFBRSxNQUFNLENBQVUsQ0FBQyxLQUFLO2dCQUNoRCxHQUFHLEVBQUcsS0FBSyxDQUFDLFdBQVcsRUFBRSxLQUFLLENBQVMsQ0FBQyxLQUFLO2dCQUM3QyxHQUFHLEVBQUUsV0FBVyxDQUFDLEtBQUs7Z0JBQ3RCLEdBQUcsRUFBRyxLQUFLLENBQUMsV0FBVyxFQUFFLEtBQUssQ0FBUyxDQUFDLEtBQUs7Z0JBQzdDLEdBQUcsRUFBRyxLQUFLLENBQUMsV0FBVyxFQUFFLEtB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aUJBQWlCLENBQUM7Z0JBQzdDLEtBQUssRUFBRTtvQkFDTixHQUFHLEVBQUUsU0FBUyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDO29CQUNsQyxHQUFHLEVBQUUsQ0FBQyxLQUFLO2lCQUNYO2dCQUNELE1BQU0sRUFBRSxLQUFLO2FBQ2IsQ0FBQyxDQUFDLEdBQVUsQ0FBQztRQUNmLENBQUMsUUFDQSxRQUFRO1lBQ1IsQ0FBQyxDQUFDLFNBQVMsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUN6QyxDQUFDLFNBQVMsSUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUN6QyxDQUFDLFVBQVUsSUFBSSxNQUFNLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFDNUM7UUFFRixJQUFJLFFBQVEsRUFBRSxDQUFDO1lBQ2QsTUFBTSxjQUFjLEdBQUcsTUFBTSxXQUFXLENBQUMsUUFBUSxDQUFDLENBQUM7WUFFbkQsWUFBWSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztZQUVsQyxNQUFNLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbEMsQ0FBQztJQUNGLENBQUM7SUFFRCxPQUFPLFlBQVksQ0FBQztBQUNyQixDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sTUFBTSxHQUFHO0lBQ3JCLFNBQVM7SUFDVCxXQUFXO0lBQ1gsZ0JBQWdCO0NBQ1AsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEZpbGU6IHBhbGV0dGUvY29tbW9uL3N1cGVyVXRpbHMvY3JlYXRlLmpzXG5cbmltcG9ydCB7XG5cdENNWUssXG5cdENNWUtfU3RyaW5nUHJvcHMsXG5cdEhleCxcblx0SGV4X1N0cmluZ1Byb3BzLFxuXHRIU0wsXG5cdEhTTF9TdHJpbmdQcm9wcyxcblx0SFNWLFxuXHRIU1ZfU3RyaW5nUHJvcHMsXG5cdExBQixcblx0TEFCX1N0cmluZ1Byb3BzLFxuXHRQYWxldHRlSXRlbSxcblx0UkdCLFxuXHRSR0JfU3RyaW5nUHJvcHMsXG5cdFNMLFxuXHRYWVosXG5cdFhZWl9TdHJpbmdQcm9wc1xufSBmcm9tICcuLi8uLi8uLi90eXBlcy9pbmRleC5qcyc7XG5pbXBvcnQge1xuXHRjb3JlQ29udmVyc2lvblV0aWxzLFxuXHRjb3JlVXRpbHMsXG5cdHV0aWxzXG59IGZyb20gJy4uLy4uLy4uL2NvbW1vbi9pbmRleC5qcyc7XG5pbXBvcnQgeyBoZWxwZXJzIGFzIHBhbGV0dGVIZWxwZXJzIH0gZnJvbSAnLi4vaGVscGVycy9pbmRleC5qcyc7XG5cbmNvbnN0IGxpbWl0cyA9IHBhbGV0dGVIZWxwZXJzLmxpbWl0cztcbmNvbnN0IHVwZGF0ZSA9IHBhbGV0dGVIZWxwZXJzLnVwZGF0ZTtcblxuY29uc3QgaHNsVG8gPSBjb3JlQ29udmVyc2lvblV0aWxzLmhzbFRvO1xuXG5mdW5jdGlvbiBiYXNlQ29sb3IoY3VzdG9tQ29sb3I6IEhTTCB8IG51bGwpOiBIU0wge1xuXHRjb25zdCBjb2xvciA9IGNvcmVVdGlscy5iYXNlLmNsb25lKGN1c3RvbUNvbG9yKTtcblxuXHRyZXR1cm4gY29sb3IgYXMgSFNMO1xufVxuXG5hc3luYyBmdW5jdGlvbiBwYWxldHRlSXRlbShjb2xvcjogSFNMKTogUHJvbWlzZTxQYWxldHRlSXRlbT4ge1xuXHRjb25zdCBjbG9uZWRDb2xvciA9IGNvcmVVdGlscy5iYXNlLmNsb25lKGNvbG9yKSBhcyBIU0w7XG5cblx0cmV0dXJuIHtcblx0XHRjb2xvcnM6IHtcblx0XHRcdG1haW46IHtcblx0XHRcdFx0Y215azogKGhzbFRvKGNsb25lZENvbG9yLCAnY215aycpIGFzIENNWUspLnZhbHVlLFxuXHRcdFx0XHRoZXg6IChoc2xUbyhjbG9uZWRDb2xvciwgJ2hleCcpIGFzIEhleCkudmFsdWUsXG5cdFx0XHRcdGhzbDogY2xvbmVkQ29sb3IudmFsdWUsXG5cdFx0XHRcdGhzdjogKGhzbFRvKGNsb25lZENvbG9yLCAnaHN2JykgYXMgSFNWKS52YWx1ZSxcblx0XHRcdFx0bGFiOiAoaHNsVG8oY2xvbmVkQ29sb3IsICdsYWInKSBhcyBMQUIpLnZhbHVlLFxuXHRcdFx0XHRyZ2I6IChoc2xUbyhjbG9uZWRDb2xvciwgJ3JnYicpIGFzIFJHQikudmFsdWUsXG5cdFx0XHRcdHh5ejogKGhzbFRvKGNsb25lZENvbG9yLCAneHl6JykgYXMgWFlaKS52YWx1ZVxuXHRcdFx0fSxcblx0XHRcdHN0cmluZ1Byb3BzOiB7XG5cdFx0XHRcdGNteWs6IChcblx0XHRcdFx0XHR1dGlscy5jb2xvci5jb2xvclRvQ29sb3JTdHJpbmcoXG5cdFx0XHRcdFx0XHRoc2xUbyhjbG9uZWRDb2xvciwgJ2NteWsnKVxuXHRcdFx0XHRcdCkgYXMgQ01ZS19TdHJpbmdQcm9wc1xuXHRcdFx0XHQpLnZhbHVlLFxuXHRcdFx0XHRoZXg6IChcblx0XHRcdFx0XHR1dGlscy5jb2xvci5jb2xvclRvQ29sb3JTdHJpbmcoXG5cdFx0XHRcdFx0XHRoc2xUbyhjbG9uZWRDb2xvciwgJ2hleCcpXG5cdFx0XHRcdFx0KSBhcyBIZXhfU3RyaW5nUHJvcHNcblx0XHRcdFx0KS52YWx1ZSxcblx0XHRcdFx0aHNsOiAoXG5cdFx0XHRcdFx0dXRpbHMuY29sb3IuY29sb3JUb0NvbG9yU3RyaW5nKFxuXHRcdFx0XHRcdFx0Y2xvbmVkQ29sb3Jcblx0XHRcdFx0XHQpIGFzIEhTTF9TdHJpbmdQcm9wc1xuXHRcdFx0XHQpLnZhbHVlLFxuXHRcdFx0XHRoc3Y6IChcblx0XHRcdFx0XHR1dGlscy5jb2xvci5jb2xvclRvQ29sb3JTdHJpbmcoXG5cdFx0XHRcdFx0XHRoc2xUbyhjbG9uZWRDb2xvciwgJ2hzdicpXG5cdFx0XHRcdFx0KSBhcyBIU1ZfU3RyaW5nUHJvcHNcblx0XHRcdFx0KS52YWx1ZSxcblx0XHRcdFx0bGFiOiAoXG5cdFx0XHRcdFx0dXRpbHMuY29sb3IuY29sb3JUb0NvbG9yU3RyaW5nKFxuXHRcdFx0XHRcdFx0aHNsVG8oY2xvbmVkQ29sb3IsICdsYWInKVxuXHRcdFx0XHRcdCkgYXMgTEFCX1N0cmluZ1Byb3BzXG5cdFx0XHRcdCkudmFsdWUsXG5cdFx0XHRcdHJnYjogKFxuXHRcdFx0XHRcdHV0aWxzLmNvbG9yLmNvbG9yVG9Db2xvclN0cmluZyhcblx0XHRcdFx0XHRcdGhzbFRvKGNsb25lZENvbG9yLCAncmdiJylcblx0XHRcdFx0XHQpIGFzIFJHQl9TdHJpbmdQcm9wc1xuXHRcdFx0XHQpLnZhbHVlLFxuXHRcdFx0XHR4eXo6IChcblx0XHRcdFx0XHR1dGlscy5jb2xvci5jb2xvclRvQ29sb3JTdHJpbmcoXG5cdFx0XHRcdFx0XHRoc2xUbyhjbG9uZWRDb2xvciwgJ3h5eicpXG5cdFx0XHRcdFx0KSBhcyBYWVpfU3RyaW5nUHJvcHNcblx0XHRcdFx0KS52YWx1ZVxuXHRcdFx0fSxcblx0XHRcdGNzczoge1xuXHRcdFx0XHRjbXlrOiBhd2FpdCBjb3JlVXRpbHMuY29udmVydC5jb2xvclRvQ1NTQ29sb3JTdHJpbmcoXG5cdFx0XHRcdFx0aHNsVG8oY2xvbmVkQ29sb3IsICdjbXlrJylcblx0XHRcdFx0KSxcblx0XHRcdFx0aGV4OiBhd2FpdCBjb3JlVXRpbHMuY29udmVydC5jb2xvclRvQ1NTQ29sb3JTdHJpbmcoXG5cdFx0XHRcdFx0aHNsVG8oY2xvbmVkQ29sb3IsICdoZXgnKVxuXHRcdFx0XHQpLFxuXHRcdFx0XHRoc2w6IGF3YWl0IGNvcmVVdGlscy5jb252ZXJ0LmNvbG9yVG9DU1NDb2xvclN0cmluZyhjbG9uZWRDb2xvciksXG5cdFx0XHRcdGhzdjogYXdhaXQgY29yZVV0aWxzLmNvbnZlcnQuY29sb3JUb0NTU0NvbG9yU3RyaW5nKFxuXHRcdFx0XHRcdGhzbFRvKGNsb25lZENvbG9yLCAnaHN2Jylcblx0XHRcdFx0KSxcblx0XHRcdFx0bGFiOiBhd2FpdCBjb3JlVXRpbHMuY29udmVydC5jb2xvclRvQ1NTQ29sb3JTdHJpbmcoXG5cdFx0XHRcdFx0aHNsVG8oY2xvbmVkQ29sb3IsICdsYWInKVxuXHRcdFx0XHQpLFxuXHRcdFx0XHRyZ2I6IGF3YWl0IGNvcmVVdGlscy5jb252ZXJ0LmNvbG9yVG9DU1NDb2xvclN0cmluZyhcblx0XHRcdFx0XHRoc2xUbyhjbG9uZWRDb2xvciwgJ3JnYicpXG5cdFx0XHRcdCksXG5cdFx0XHRcdHh5ejogYXdhaXQgY29yZVV0aWxzLmNvbnZlcnQuY29sb3JUb0NTU0NvbG9yU3RyaW5nKFxuXHRcdFx0XHRcdGhzbFRvKGNsb25lZENvbG9yLCAneHl6Jylcblx0XHRcdFx0KVxuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gcGFsZXR0ZUl0ZW1BcnJheShcblx0YmFzZUNvbG9yOiBIU0wsXG5cdGh1ZXM6IG51bWJlcltdLFxuXHRsaW1pdERhcms6IGJvb2xlYW4sXG5cdGxpbWl0R3JheTogYm9vbGVhbixcblx0bGltaXRMaWdodDogYm9vbGVhblxuKTogUHJvbWlzZTxQYWxldHRlSXRlbVtdPiB7XG5cdGNvbnN0IHBhbGV0dGVJdGVtczogUGFsZXR0ZUl0ZW1bXSA9IFthd2FpdCBwYWxldHRlSXRlbShiYXNlQ29sb3IpXTtcblxuXHRmb3IgKGNvbnN0IFtpLCBodWVdIG9mIGh1ZXMuZW50cmllcygpKSB7XG5cdFx0bGV0IG5ld0NvbG9yOiBIU0wgfCBudWxsID0gbnVsbDtcblxuXHRcdGRvIHtcblx0XHRcdGNvbnN0IHNsID0gdXRpbHMucmFuZG9tLnNsKCkgYXMgU0w7XG5cblx0XHRcdG5ld0NvbG9yID0gdXRpbHMuY29udmVyc2lvbi5nZW5BbGxDb2xvclZhbHVlcyh7XG5cdFx0XHRcdHZhbHVlOiB7XG5cdFx0XHRcdFx0aHVlOiBjb3JlVXRpbHMuYnJhbmQuYXNSYWRpYWwoaHVlKSxcblx0XHRcdFx0XHQuLi5zbC52YWx1ZVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRmb3JtYXQ6ICdoc2wnXG5cdFx0XHR9KS5oc2wgYXMgSFNMO1xuXHRcdH0gd2hpbGUgKFxuXHRcdFx0bmV3Q29sb3IgJiZcblx0XHRcdCgobGltaXRHcmF5ICYmIGxpbWl0cy5pc1Rvb0dyYXkobmV3Q29sb3IpKSB8fFxuXHRcdFx0XHQobGltaXREYXJrICYmIGxpbWl0cy5pc1Rvb0RhcmsobmV3Q29sb3IpKSB8fFxuXHRcdFx0XHQobGltaXRMaWdodCAmJiBsaW1pdHMuaXNUb29MaWdodChuZXdDb2xvcikpKVxuXHRcdCk7XG5cblx0XHRpZiAobmV3Q29sb3IpIHtcblx0XHRcdGNvbnN0IG5ld1BhbGV0dGVJdGVtID0gYXdhaXQgcGFsZXR0ZUl0ZW0obmV3Q29sb3IpO1xuXG5cdFx0XHRwYWxldHRlSXRlbXMucHVzaChuZXdQYWxldHRlSXRlbSk7XG5cblx0XHRcdHVwZGF0ZS5jb2xvckJveChuZXdDb2xvciwgaSArIDEpO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBwYWxldHRlSXRlbXM7XG59XG5cbmV4cG9ydCBjb25zdCBjcmVhdGUgPSB7XG5cdGJhc2VDb2xvcixcblx0cGFsZXR0ZUl0ZW0sXG5cdHBhbGV0dGVJdGVtQXJyYXlcbn0gYXMgY29uc3Q7XG4iXX0=