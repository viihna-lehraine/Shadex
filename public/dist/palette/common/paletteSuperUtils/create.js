// File: src/palette/common/paletteSuperUtils/create.js
import { convert, core, utils } from '../../../common/index.js';
import { paletteHelpers } from '../paletteHelpers/index.js';
const limits = paletteHelpers.limits;
const update = paletteHelpers.update;
const hslTo = convert.hslTo;
function baseColor(customColor, enableAlpha) {
    const color = core.base.clone(customColor ?? utils.random.hsl(enableAlpha));
    return color;
}
async function paletteItem(color, enableAlpha) {
    const clonedColor = core.base.clone(color);
    clonedColor.value.alpha = enableAlpha
        ? core.brand.asAlphaRange(Math.random())
        : core.brand.asAlphaRange(1);
    return {
        colors: {
            cmyk: hslTo(clonedColor, 'cmyk').value,
            hex: hslTo(clonedColor, 'hex').value,
            hsl: clonedColor.value,
            hsv: hslTo(clonedColor, 'hsv').value,
            lab: hslTo(clonedColor, 'lab').value,
            rgb: hslTo(clonedColor, 'rgb').value,
            xyz: hslTo(clonedColor, 'xyz').value
        },
        colorStrings: {
            cmykString: utils.color.colorToColorString(hslTo(clonedColor, 'cmyk')).value,
            hexString: utils.color.colorToColorString(hslTo(clonedColor, 'hex')).value,
            hslString: utils.color.colorToColorString(clonedColor).value,
            hsvString: utils.color.colorToColorString(hslTo(clonedColor, 'hsv')).value,
            labString: utils.color.colorToColorString(hslTo(clonedColor, 'lab')).value,
            rgbString: utils.color.colorToColorString(hslTo(clonedColor, 'rgb')).value,
            xyzString: utils.color.colorToColorString(hslTo(clonedColor, 'xyz')).value
        },
        cssStrings: {
            cmykCSSString: await core.convert.colorToCSSColorString(hslTo(clonedColor, 'cmyk')),
            hexCSSString: await core.convert.colorToCSSColorString(hslTo(clonedColor, 'hex')),
            hslCSSString: await core.convert.colorToCSSColorString(clonedColor),
            hsvCSSString: await core.convert.colorToCSSColorString(hslTo(clonedColor, 'hsv')),
            labCSSString: await core.convert.colorToCSSColorString(hslTo(clonedColor, 'lab')),
            rgbCSSString: await core.convert.colorToCSSColorString(hslTo(clonedColor, 'rgb')),
            xyzCSSString: await core.convert.colorToCSSColorString(hslTo(clonedColor, 'xyz'))
        }
    };
}
async function paletteItemArray(baseColor, hues, enableAlpha, limitDark, limitGray, limitLight) {
    const paletteItems = [
        await paletteItem(baseColor, enableAlpha)
    ];
    for (const [i, hue] of hues.entries()) {
        let newColor = null;
        do {
            const sl = utils.random.sl(enableAlpha);
            newColor = utils.conversion.genAllColorValues({
                value: {
                    hue: core.brand.asRadial(hue),
                    ...sl.value
                },
                format: 'hsl'
            }).hsl;
        } while (newColor &&
            ((limitGray && limits.isTooGray(newColor)) ||
                (limitDark && limits.isTooDark(newColor)) ||
                (limitLight && limits.isTooLight(newColor))));
        if (newColor) {
            const newPaletteItem = await paletteItem(newColor, enableAlpha);
            paletteItems.push(newPaletteItem);
            update.colorBox(newColor, i + 1);
        }
    }
    return paletteItems;
}
export const create = {
    baseColor,
    paletteItem,
    paletteItemArray
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL3BhbGV0dGUvY29tbW9uL3BhbGV0dGVTdXBlclV0aWxzL2NyZWF0ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSx1REFBdUQ7QUFvQnZELE9BQU8sRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQ2hFLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUU1RCxNQUFNLE1BQU0sR0FBRyxjQUFjLENBQUMsTUFBTSxDQUFDO0FBQ3JDLE1BQU0sTUFBTSxHQUFHLGNBQWMsQ0FBQyxNQUFNLENBQUM7QUFFckMsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQztBQUU1QixTQUFTLFNBQVMsQ0FBQyxXQUF1QixFQUFFLFdBQW9CO0lBQy9ELE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsSUFBSSxLQUFLLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO0lBRTVFLE9BQU8sS0FBWSxDQUFDO0FBQ3JCLENBQUM7QUFFRCxLQUFLLFVBQVUsV0FBVyxDQUN6QixLQUFVLEVBQ1YsV0FBb0I7SUFFcEIsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFRLENBQUM7SUFFbEQsV0FBVyxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsV0FBVztRQUNwQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ3hDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUU5QixPQUFPO1FBQ04sTUFBTSxFQUFFO1lBQ1AsSUFBSSxFQUFHLEtBQUssQ0FB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LENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBGaWxlOiBzcmMvcGFsZXR0ZS9jb21tb24vcGFsZXR0ZVN1cGVyVXRpbHMvY3JlYXRlLmpzXG5cbmltcG9ydCB7XG5cdENNWUssXG5cdENNWUtTdHJpbmcsXG5cdEhleCxcblx0SGV4U3RyaW5nLFxuXHRIU0wsXG5cdEhTTFN0cmluZyxcblx0SFNWLFxuXHRIU1ZTdHJpbmcsXG5cdExBQixcblx0TEFCU3RyaW5nLFxuXHRQYWxldHRlSXRlbSxcblx0UkdCLFxuXHRSR0JTdHJpbmcsXG5cdFNMLFxuXHRYWVosXG5cdFhZWlN0cmluZ1xufSBmcm9tICcuLi8uLi8uLi90eXBlcy9pbmRleC5qcyc7XG5pbXBvcnQgeyBjb252ZXJ0LCBjb3JlLCB1dGlscyB9IGZyb20gJy4uLy4uLy4uL2NvbW1vbi9pbmRleC5qcyc7XG5pbXBvcnQgeyBwYWxldHRlSGVscGVycyB9IGZyb20gJy4uL3BhbGV0dGVIZWxwZXJzL2luZGV4LmpzJztcblxuY29uc3QgbGltaXRzID0gcGFsZXR0ZUhlbHBlcnMubGltaXRzO1xuY29uc3QgdXBkYXRlID0gcGFsZXR0ZUhlbHBlcnMudXBkYXRlO1xuXG5jb25zdCBoc2xUbyA9IGNvbnZlcnQuaHNsVG87XG5cbmZ1bmN0aW9uIGJhc2VDb2xvcihjdXN0b21Db2xvcjogSFNMIHwgbnVsbCwgZW5hYmxlQWxwaGE6IGJvb2xlYW4pOiBIU0wge1xuXHRjb25zdCBjb2xvciA9IGNvcmUuYmFzZS5jbG9uZShjdXN0b21Db2xvciA/PyB1dGlscy5yYW5kb20uaHNsKGVuYWJsZUFscGhhKSk7XG5cblx0cmV0dXJuIGNvbG9yIGFzIEhTTDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gcGFsZXR0ZUl0ZW0oXG5cdGNvbG9yOiBIU0wsXG5cdGVuYWJsZUFscGhhOiBib29sZWFuXG4pOiBQcm9taXNlPFBhbGV0dGVJdGVtPiB7XG5cdGNvbnN0IGNsb25lZENvbG9yID0gY29yZS5iYXNlLmNsb25lKGNvbG9yKSBhcyBIU0w7XG5cblx0Y2xvbmVkQ29sb3IudmFsdWUuYWxwaGEgPSBlbmFibGVBbHBoYVxuXHRcdD8gY29yZS5icmFuZC5hc0FscGhhUmFuZ2UoTWF0aC5yYW5kb20oKSlcblx0XHQ6IGNvcmUuYnJhbmQuYXNBbHBoYVJhbmdlKDEpO1xuXG5cdHJldHVybiB7XG5cdFx0Y29sb3JzOiB7XG5cdFx0XHRjbXlrOiAoaHNsVG8oY2xvbmVkQ29sb3IsICdjbXlrJykgYXMgQ01ZSykudmFsdWUsXG5cdFx0XHRoZXg6IChoc2xUbyhjbG9uZWRDb2xvciwgJ2hleCcpIGFzIEhleCkudmFsdWUsXG5cdFx0XHRoc2w6IGNsb25lZENvbG9yLnZhbHVlLFxuXHRcdFx0aHN2OiAoaHNsVG8oY2xvbmVkQ29sb3IsICdoc3YnKSBhcyBIU1YpLnZhbHVlLFxuXHRcdFx0bGFiOiAoaHNsVG8oY2xvbmVkQ29sb3IsICdsYWInKSBhcyBMQUIpLnZhbHVlLFxuXHRcdFx0cmdiOiAoaHNsVG8oY2xvbmVkQ29sb3IsICdyZ2InKSBhcyBSR0IpLnZhbHVlLFxuXHRcdFx0eHl6OiAoaHNsVG8oY2xvbmVkQ29sb3IsICd4eXonKSBhcyBYWVopLnZhbHVlXG5cdFx0fSxcblx0XHRjb2xvclN0cmluZ3M6IHtcblx0XHRcdGNteWtTdHJpbmc6IChcblx0XHRcdFx0dXRpbHMuY29sb3IuY29sb3JUb0NvbG9yU3RyaW5nKFxuXHRcdFx0XHRcdGhzbFRvKGNsb25lZENvbG9yLCAnY215aycpXG5cdFx0XHRcdCkgYXMgQ01ZS1N0cmluZ1xuXHRcdFx0KS52YWx1ZSxcblx0XHRcdGhleFN0cmluZzogKFxuXHRcdFx0XHR1dGlscy5jb2xvci5jb2xvclRvQ29sb3JTdHJpbmcoXG5cdFx0XHRcdFx0aHNsVG8oY2xvbmVkQ29sb3IsICdoZXgnKVxuXHRcdFx0XHQpIGFzIEhleFN0cmluZ1xuXHRcdFx0KS52YWx1ZSxcblx0XHRcdGhzbFN0cmluZzogKFxuXHRcdFx0XHR1dGlscy5jb2xvci5jb2xvclRvQ29sb3JTdHJpbmcoY2xvbmVkQ29sb3IpIGFzIEhTTFN0cmluZ1xuXHRcdFx0KS52YWx1ZSxcblx0XHRcdGhzdlN0cmluZzogKFxuXHRcdFx0XHR1dGlscy5jb2xvci5jb2xvclRvQ29sb3JTdHJpbmcoXG5cdFx0XHRcdFx0aHNsVG8oY2xvbmVkQ29sb3IsICdoc3YnKVxuXHRcdFx0XHQpIGFzIEhTVlN0cmluZ1xuXHRcdFx0KS52YWx1ZSxcblx0XHRcdGxhYlN0cmluZzogKFxuXHRcdFx0XHR1dGlscy5jb2xvci5jb2xvclRvQ29sb3JTdHJpbmcoXG5cdFx0XHRcdFx0aHNsVG8oY2xvbmVkQ29sb3IsICdsYWInKVxuXHRcdFx0XHQpIGFzIExBQlN0cmluZ1xuXHRcdFx0KS52YWx1ZSxcblx0XHRcdHJnYlN0cmluZzogKFxuXHRcdFx0XHR1dGlscy5jb2xvci5jb2xvclRvQ29sb3JTdHJpbmcoXG5cdFx0XHRcdFx0aHNsVG8oY2xvbmVkQ29sb3IsICdyZ2InKVxuXHRcdFx0XHQpIGFzIFJHQlN0cmluZ1xuXHRcdFx0KS52YWx1ZSxcblx0XHRcdHh5elN0cmluZzogKFxuXHRcdFx0XHR1dGlscy5jb2xvci5jb2xvclRvQ29sb3JTdHJpbmcoXG5cdFx0XHRcdFx0aHNsVG8oY2xvbmVkQ29sb3IsICd4eXonKVxuXHRcdFx0XHQpIGFzIFhZWlN0cmluZ1xuXHRcdFx0KS52YWx1ZVxuXHRcdH0sXG5cdFx0Y3NzU3RyaW5nczoge1xuXHRcdFx0Y215a0NTU1N0cmluZzogYXdhaXQgY29yZS5jb252ZXJ0LmNvbG9yVG9DU1NDb2xvclN0cmluZyhcblx0XHRcdFx0aHNsVG8oY2xvbmVkQ29sb3IsICdjbXlrJylcblx0XHRcdCksXG5cdFx0XHRoZXhDU1NTdHJpbmc6IGF3YWl0IGNvcmUuY29udmVydC5jb2xvclRvQ1NTQ29sb3JTdHJpbmcoXG5cdFx0XHRcdGhzbFRvKGNsb25lZENvbG9yLCAnaGV4Jylcblx0XHRcdCksXG5cdFx0XHRoc2xDU1NTdHJpbmc6IGF3YWl0IGNvcmUuY29udmVydC5jb2xvclRvQ1NTQ29sb3JTdHJpbmcoY2xvbmVkQ29sb3IpLFxuXHRcdFx0aHN2Q1NTU3RyaW5nOiBhd2FpdCBjb3JlLmNvbnZlcnQuY29sb3JUb0NTU0NvbG9yU3RyaW5nKFxuXHRcdFx0XHRoc2xUbyhjbG9uZWRDb2xvciwgJ2hzdicpXG5cdFx0XHQpLFxuXHRcdFx0bGFiQ1NTU3RyaW5nOiBhd2FpdCBjb3JlLmNvbnZlcnQuY29sb3JUb0NTU0NvbG9yU3RyaW5nKFxuXHRcdFx0XHRoc2xUbyhjbG9uZWRDb2xvciwgJ2xhYicpXG5cdFx0XHQpLFxuXHRcdFx0cmdiQ1NTU3RyaW5nOiBhd2FpdCBjb3JlLmNvbnZlcnQuY29sb3JUb0NTU0NvbG9yU3RyaW5nKFxuXHRcdFx0XHRoc2xUbyhjbG9uZWRDb2xvciwgJ3JnYicpXG5cdFx0XHQpLFxuXHRcdFx0eHl6Q1NTU3RyaW5nOiBhd2FpdCBjb3JlLmNvbnZlcnQuY29sb3JUb0NTU0NvbG9yU3RyaW5nKFxuXHRcdFx0XHRoc2xUbyhjbG9uZWRDb2xvciwgJ3h5eicpXG5cdFx0XHQpXG5cdFx0fVxuXHR9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBwYWxldHRlSXRlbUFycmF5KFxuXHRiYXNlQ29sb3I6IEhTTCxcblx0aHVlczogbnVtYmVyW10sXG5cdGVuYWJsZUFscGhhOiBib29sZWFuLFxuXHRsaW1pdERhcms6IGJvb2xlYW4sXG5cdGxpbWl0R3JheTogYm9vbGVhbixcblx0bGltaXRMaWdodDogYm9vbGVhblxuKTogUHJvbWlzZTxQYWxldHRlSXRlbVtdPiB7XG5cdGNvbnN0IHBhbGV0dGVJdGVtczogUGFsZXR0ZUl0ZW1bXSA9IFtcblx0XHRhd2FpdCBwYWxldHRlSXRlbShiYXNlQ29sb3IsIGVuYWJsZUFscGhhKVxuXHRdO1xuXG5cdGZvciAoY29uc3QgW2ksIGh1ZV0gb2YgaHVlcy5lbnRyaWVzKCkpIHtcblx0XHRsZXQgbmV3Q29sb3I6IEhTTCB8IG51bGwgPSBudWxsO1xuXG5cdFx0ZG8ge1xuXHRcdFx0Y29uc3Qgc2wgPSB1dGlscy5yYW5kb20uc2woZW5hYmxlQWxwaGEpIGFzIFNMO1xuXG5cdFx0XHRuZXdDb2xvciA9IHV0aWxzLmNvbnZlcnNpb24uZ2VuQWxsQ29sb3JWYWx1ZXMoe1xuXHRcdFx0XHR2YWx1ZToge1xuXHRcdFx0XHRcdGh1ZTogY29yZS5icmFuZC5hc1JhZGlhbChodWUpLFxuXHRcdFx0XHRcdC4uLnNsLnZhbHVlXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGZvcm1hdDogJ2hzbCdcblx0XHRcdH0pLmhzbCBhcyBIU0w7XG5cdFx0fSB3aGlsZSAoXG5cdFx0XHRuZXdDb2xvciAmJlxuXHRcdFx0KChsaW1pdEdyYXkgJiYgbGltaXRzLmlzVG9vR3JheShuZXdDb2xvcikpIHx8XG5cdFx0XHRcdChsaW1pdERhcmsgJiYgbGltaXRzLmlzVG9vRGFyayhuZXdDb2xvcikpIHx8XG5cdFx0XHRcdChsaW1pdExpZ2h0ICYmIGxpbWl0cy5pc1Rvb0xpZ2h0KG5ld0NvbG9yKSkpXG5cdFx0KTtcblxuXHRcdGlmIChuZXdDb2xvcikge1xuXHRcdFx0Y29uc3QgbmV3UGFsZXR0ZUl0ZW0gPSBhd2FpdCBwYWxldHRlSXRlbShuZXdDb2xvciwgZW5hYmxlQWxwaGEpO1xuXG5cdFx0XHRwYWxldHRlSXRlbXMucHVzaChuZXdQYWxldHRlSXRlbSk7XG5cblx0XHRcdHVwZGF0ZS5jb2xvckJveChuZXdDb2xvciwgaSArIDEpO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBwYWxldHRlSXRlbXM7XG59XG5cbmV4cG9ydCBjb25zdCBjcmVhdGUgPSB7XG5cdGJhc2VDb2xvcixcblx0cGFsZXR0ZUl0ZW0sXG5cdHBhbGV0dGVJdGVtQXJyYXlcbn0gYXMgY29uc3Q7XG4iXX0=