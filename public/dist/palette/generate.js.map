{"version":3,"file":"generate.js","sources":["../../../../src/palette/generate.ts"],"sourcesContent":["import {\n\tCommonFunctions,\n\tGenerateHuesFnGroup,\n\tGeneratePaletteFnGroup,\n\tHSL,\n\tPalette,\n\tSelectedPaletteOptions\n} from '../types/index.js';\nimport { defaults } from '../config/index.js';\n\nconst defaultPalette = defaults.palette;\n\nexport function generatePalette(\n\toptions: SelectedPaletteOptions,\n\tcommon: CommonFunctions,\n\tgenerateHuesFns: GenerateHuesFnGroup,\n\tgeneratePaletteFns: GeneratePaletteFnGroup\n): Palette {\n\tconst { log, errors } = common.services;\n\n\treturn errors.handleSync(\n\t\t() => {\n\t\t\tlog.debug(\n\t\t\t\t`Generating ${options.paletteType} palette with args ${JSON.stringify(options)}`,\n\t\t\t\t`[generatePalette]`\n\t\t\t);\n\n\t\t\tconst palette = (() => {\n\t\t\t\tswitch (options.paletteType) {\n\t\t\t\t\tcase 'analogous':\n\t\t\t\t\t\treturn generatePaletteFns.analogous(\n\t\t\t\t\t\t\toptions,\n\t\t\t\t\t\t\tcommon,\n\t\t\t\t\t\t\tgenerateHuesFns\n\t\t\t\t\t\t);\n\t\t\t\t\tcase 'complementary':\n\t\t\t\t\t\treturn generatePaletteFns.complementary(\n\t\t\t\t\t\t\toptions,\n\t\t\t\t\t\t\tcommon\n\t\t\t\t\t\t);\n\t\t\t\t\tcase 'diadic':\n\t\t\t\t\t\treturn generatePaletteFns.diadic(\n\t\t\t\t\t\t\toptions,\n\t\t\t\t\t\t\tcommon,\n\t\t\t\t\t\t\tgenerateHuesFns\n\t\t\t\t\t\t);\n\t\t\t\t\tcase 'hexadic':\n\t\t\t\t\t\treturn generatePaletteFns.hexadic(\n\t\t\t\t\t\t\toptions,\n\t\t\t\t\t\t\tcommon,\n\t\t\t\t\t\t\tgenerateHuesFns\n\t\t\t\t\t\t);\n\t\t\t\t\tcase 'monochromatic':\n\t\t\t\t\t\treturn generatePaletteFns.monochromatic(\n\t\t\t\t\t\t\toptions,\n\t\t\t\t\t\t\tcommon\n\t\t\t\t\t\t);\n\t\t\t\t\tcase 'random':\n\t\t\t\t\t\treturn generatePaletteFns.random(options, common);\n\t\t\t\t\tcase 'splitComplementary':\n\t\t\t\t\t\treturn generatePaletteFns.splitComplementary(\n\t\t\t\t\t\t\toptions,\n\t\t\t\t\t\t\tcommon\n\t\t\t\t\t\t);\n\t\t\t\t\tcase 'tetradic':\n\t\t\t\t\t\treturn generatePaletteFns.tetradic(\n\t\t\t\t\t\t\toptions,\n\t\t\t\t\t\t\tcommon,\n\t\t\t\t\t\t\tgenerateHuesFns\n\t\t\t\t\t\t);\n\t\t\t\t\tcase 'triadic':\n\t\t\t\t\t\treturn generatePaletteFns.triadic(\n\t\t\t\t\t\t\toptions,\n\t\t\t\t\t\t\tcommon,\n\t\t\t\t\t\t\tgenerateHuesFns\n\t\t\t\t\t\t);\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tlog.error(\n\t\t\t\t\t\t\t`Invalid palette type ${options.paletteType}`,\n\t\t\t\t\t\t\t`[generatePalette]`\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn defaultPalette;\n\t\t\t\t}\n\t\t\t})();\n\n\t\t\t// NEW: Show or hide palette columns based on the generated palette\n\t\t\tcommon.utils.palette.showPaletteColumns(palette.items.length);\n\n\t\t\treturn palette;\n\t\t},\n\t\t'Error generating palette',\n\t\t{ context: { options } }\n\t);\n}\n\nexport function generateHues(\n\tcolor: HSL,\n\toptions: SelectedPaletteOptions,\n\tcommon: CommonFunctions,\n\tgenerateHues: GenerateHuesFnGroup\n): number[] {\n\tconst {\n\t\thelpers,\n\t\tservices: { log, errors },\n\t\tutils\n\t} = common;\n\n\treturn errors.handleSync(\n\t\t() => {\n\t\t\tif (!utils.validate.colorValue(color)) {\n\t\t\t\tlog.error(\n\t\t\t\t\t`Invalid color value ${JSON.stringify(color)}`,\n\t\t\t\t\t`[generateHues]`\n\t\t\t\t);\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tconst clonedColor = helpers.data.deepClone(color) as HSL;\n\n\t\t\tswitch (options.paletteType) {\n\t\t\t\tcase 'analogous':\n\t\t\t\t\treturn generateHues.analogous(clonedColor, options, common);\n\t\t\t\tcase 'diadic':\n\t\t\t\t\treturn generateHues.diadic(clonedColor, options, common);\n\t\t\t\tcase 'hexadic':\n\t\t\t\t\treturn generateHues.hexadic(clonedColor, common);\n\t\t\t\tcase 'splitComplementary':\n\t\t\t\t\treturn generateHues.splitComplementary(clonedColor, common);\n\t\t\t\tcase 'tetradic':\n\t\t\t\t\treturn generateHues.tetradic(clonedColor, common);\n\t\t\t\tcase 'triadic':\n\t\t\t\t\treturn generateHues.triadic(clonedColor, common);\n\t\t\t\tdefault:\n\t\t\t\t\tlog.error(\n\t\t\t\t\t\t`Invalid hue type ${options.paletteType}`,\n\t\t\t\t\t\t`[generateHues]`\n\t\t\t\t\t);\n\t\t\t\t\treturn [];\n\t\t\t}\n\t\t},\n\t\t'Error generating hues',\n\t\t{ context: { color, options } }\n\t);\n}\n"],"names":[],"mappings":";;;AAUA,MAAM,cAAc,GAAG,QAAQ,CAAC,OAAO;AAEjC,SAAU,eAAe,CAC9B,OAA+B,EAC/B,MAAuB,EACvB,eAAoC,EACpC,kBAA0C,EAAA;IAE1C,MAAM,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,MAAM,CAAC,QAAQ;AAEvC,IAAA,OAAO,MAAM,CAAC,UAAU,CACvB,MAAK;AACJ,QAAA,GAAG,CAAC,KAAK,CACR,cAAc,OAAO,CAAC,WAAW,CAAsB,mBAAA,EAAA,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE,EAChF,CAAA,iBAAA,CAAmB,CACnB;AAED,QAAA,MAAM,OAAO,GAAG,CAAC,MAAK;AACrB,YAAA,QAAQ,OAAO,CAAC,WAAW;AAC1B,gBAAA,KAAK,WAAW;oBACf,OAAO,kBAAkB,CAAC,SAAS,CAClC,OAAO,EACP,MAAM,EACN,eAAe,CACf;AACF,gBAAA,KAAK,eAAe;oBACnB,OAAO,kBAAkB,CAAC,aAAa,CACtC,OAAO,EACP,MAAM,CACN;AACF,gBAAA,KAAK,QAAQ;oBACZ,OAAO,kBAAkB,CAAC,MAAM,CAC/B,OAAO,EACP,MAAM,EACN,eAAe,CACf;AACF,gBAAA,KAAK,SAAS;oBACb,OAAO,kBAAkB,CAAC,OAAO,CAChC,OAAO,EACP,MAAM,EACN,eAAe,CACf;AACF,gBAAA,KAAK,eAAe;oBACnB,OAAO,kBAAkB,CAAC,aAAa,CACtC,OAAO,EACP,MAAM,CACN;AACF,gBAAA,KAAK,QAAQ;oBACZ,OAAO,kBAAkB,CAAC,MAAM,CAAC,OAAO,EAAE,MAAM,CAAC;AAClD,gBAAA,KAAK,oBAAoB;oBACxB,OAAO,kBAAkB,CAAC,kBAAkB,CAC3C,OAAO,EACP,MAAM,CACN;AACF,gBAAA,KAAK,UAAU;oBACd,OAAO,kBAAkB,CAAC,QAAQ,CACjC,OAAO,EACP,MAAM,EACN,eAAe,CACf;AACF,gBAAA,KAAK,SAAS;oBACb,OAAO,kBAAkB,CAAC,OAAO,CAChC,OAAO,EACP,MAAM,EACN,eAAe,CACf;AACF,gBAAA;oBACC,GAAG,CAAC,KAAK,CACR,CAAwB,qBAAA,EAAA,OAAO,CAAC,WAAW,CAAE,CAAA,EAC7C,CAAmB,iBAAA,CAAA,CACnB;AACD,oBAAA,OAAO,cAAc;;SAEvB,GAAG;;AAGJ,QAAA,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,kBAAkB,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC;AAE7D,QAAA,OAAO,OAAO;KACd,EACD,0BAA0B,EAC1B,EAAE,OAAO,EAAE,EAAE,OAAO,EAAE,EAAE,CACxB;AACF;;;;"}