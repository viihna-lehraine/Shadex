import { defaults } from '../config/index.js';
const defaultPalette = defaults.palette;
export function generatePalette(options, common, generateHuesFns, generatePaletteFns) {
    const { log, errors } = common.services;
    return errors.handleSync(() => {
        log.debug(`Generating ${options.paletteType} palette with args ${JSON.stringify(options)}`, `[generatePalette]`);
        const palette = (() => {
            switch (options.paletteType) {
                case 'analogous':
                    return generatePaletteFns.analogous(options, common, generateHuesFns);
                case 'complementary':
                    return generatePaletteFns.complementary(options, common);
                case 'diadic':
                    return generatePaletteFns.diadic(options, common, generateHuesFns);
                case 'hexadic':
                    return generatePaletteFns.hexadic(options, common, generateHuesFns);
                case 'monochromatic':
                    return generatePaletteFns.monochromatic(options, common);
                case 'random':
                    return generatePaletteFns.random(options, common);
                case 'splitComplementary':
                    return generatePaletteFns.splitComplementary(options, common);
                case 'tetradic':
                    return generatePaletteFns.tetradic(options, common, generateHuesFns);
                case 'triadic':
                    return generatePaletteFns.triadic(options, common, generateHuesFns);
                default:
                    log.error(`Invalid palette type ${options.paletteType}`, `[generatePalette]`);
                    return defaultPalette;
            }
        })();
        // NEW: Show or hide palette columns based on the generated palette
        common.utils.palette.showPaletteColumns(palette.items.length);
        return palette;
    }, 'Error generating palette', { context: { options } });
}
export function generateHues(color, options, common, generateHues) {
    const { helpers, services: { log, errors }, utils } = common;
    return errors.handleSync(() => {
        if (!utils.validate.colorValue(color)) {
            log.error(`Invalid color value ${JSON.stringify(color)}`, `[generateHues]`);
            return [];
        }
        const clonedColor = helpers.data.deepClone(color);
        switch (options.paletteType) {
            case 'analogous':
                return generateHues.analogous(clonedColor, options, common);
            case 'diadic':
                return generateHues.diadic(clonedColor, options, common);
            case 'hexadic':
                return generateHues.hexadic(clonedColor, common);
            case 'splitComplementary':
                return generateHues.splitComplementary(clonedColor, common);
            case 'tetradic':
                return generateHues.tetradic(clonedColor, common);
            case 'triadic':
                return generateHues.triadic(clonedColor, common);
            default:
                log.error(`Invalid hue type ${options.paletteType}`, `[generateHues]`);
                return [];
        }
    }, 'Error generating hues', { context: { color, options } });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VuZXJhdGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvcGFsZXR0ZS9nZW5lcmF0ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFRQSxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFFOUMsTUFBTSxjQUFjLEdBQUcsUUFBUSxDQUFDLE9BQU8sQ0FBQztBQUV4QyxNQUFNLFVBQVUsZUFBZSxDQUM5QixPQUErQixFQUMvQixNQUF1QixFQUN2QixlQUFvQyxFQUNwQyxrQkFBMEM7SUFFMUMsTUFBTSxFQUFFLEdBQUcsRUFBRSxNQUFNLEVBQUUsR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDO0lBRXhDLE9BQU8sTUFBTSxDQUFDLFVBQVUsQ0FDdkIsR0FBRyxFQUFFO1FBQ0osR0FBRyxDQUFDLEtBQUssQ0FDUixjQUFjLE9BQU8sQ0FBQyxXQUFXLHNCQUFzQixJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQ2hGLG1CQUFtQixDQUNuQixDQUFDO1FBRUYsTUFBTSxPQUFPLEdBQUcsQ0FBQyxHQUFHLEVBQUU7WUFDckIsUUFBUSxPQUFPLENBQUMsV0FBVyxFQUFFLENBQUM7Z0JBQzdCLEtBQUssV0FBVztvQkFDZixPQUFPLGtCQUFrQixDQUFDLFNBQVMsQ0FDbEMsT0FBTyxFQUNQLE1BQU0sRUFDTixlQUFlLENBQ2YsQ0FBQztnQkFDSCxLQUFLLGVBQWU7b0JBQ25CLE9BQU8sa0JBQWtCLENBQUMsYUFBYSxDQUN0QyxPQUFPLEVBQ1AsTUFBTSxDQUNOLENBQUM7Z0JBQ0gsS0FBSyxRQUFRO29CQUNaLE9BQU8sa0JBQWtCLENBQUMsTUFBTSxDQUMvQixPQUFPLEVBQ1AsTUFBTSxFQUNOLGVBQWUsQ0FDZixDQUFDO2dCQUNILEtBQUssU0FBUztvQkFDYixPQUFPLGtCQUFrQixDQUFDLE9BQU8sQ0FDaEMsT0FBTyxFQUNQLE1BQU0sRUFDTixlQUFlLENBQ2YsQ0FBQztnQkFDSCxLQUFL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RUFDRCx1QkFBdUIsRUFDdkIsRUFBRSxPQUFPLEVBQUUsRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLEVBQUUsQ0FDL0IsQ0FBQztBQUNILENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuXHRDb21tb25GdW5jdGlvbnMsXG5cdEdlbmVyYXRlSHVlc0ZuR3JvdXAsXG5cdEdlbmVyYXRlUGFsZXR0ZUZuR3JvdXAsXG5cdEhTTCxcblx0UGFsZXR0ZSxcblx0U2VsZWN0ZWRQYWxldHRlT3B0aW9uc1xufSBmcm9tICcuLi90eXBlcy9pbmRleC5qcyc7XG5pbXBvcnQgeyBkZWZhdWx0cyB9IGZyb20gJy4uL2NvbmZpZy9pbmRleC5qcyc7XG5cbmNvbnN0IGRlZmF1bHRQYWxldHRlID0gZGVmYXVsdHMucGFsZXR0ZTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlUGFsZXR0ZShcblx0b3B0aW9uczogU2VsZWN0ZWRQYWxldHRlT3B0aW9ucyxcblx0Y29tbW9uOiBDb21tb25GdW5jdGlvbnMsXG5cdGdlbmVyYXRlSHVlc0ZuczogR2VuZXJhdGVIdWVzRm5Hcm91cCxcblx0Z2VuZXJhdGVQYWxldHRlRm5zOiBHZW5lcmF0ZVBhbGV0dGVGbkdyb3VwXG4pOiBQYWxldHRlIHtcblx0Y29uc3QgeyBsb2csIGVycm9ycyB9ID0gY29tbW9uLnNlcnZpY2VzO1xuXG5cdHJldHVybiBlcnJvcnMuaGFuZGxlU3luYyhcblx0XHQoKSA9PiB7XG5cdFx0XHRsb2cuZGVidWcoXG5cdFx0XHRcdGBHZW5lcmF0aW5nICR7b3B0aW9ucy5wYWxldHRlVHlwZX0gcGFsZXR0ZSB3aXRoIGFyZ3MgJHtKU09OLnN0cmluZ2lmeShvcHRpb25zKX1gLFxuXHRcdFx0XHRgW2dlbmVyYXRlUGFsZXR0ZV1gXG5cdFx0XHQpO1xuXG5cdFx0XHRjb25zdCBwYWxldHRlID0gKCgpID0+IHtcblx0XHRcdFx0c3dpdGNoIChvcHRpb25zLnBhbGV0dGVUeXBlKSB7XG5cdFx0XHRcdFx0Y2FzZSAnYW5hbG9nb3VzJzpcblx0XHRcdFx0XHRcdHJldHVybiBnZW5lcmF0ZVBhbGV0dGVGbnMuYW5hbG9nb3VzKFxuXHRcdFx0XHRcdFx0XHRvcHRpb25zLFxuXHRcdFx0XHRcdFx0XHRjb21tb24sXG5cdFx0XHRcdFx0XHRcdGdlbmVyYXRlSHVlc0Zuc1xuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRjYXNlICdjb21wbGVtZW50YXJ5Jzpcblx0XHRcdFx0XHRcdHJldHVybiBnZW5lcmF0ZVBhbGV0dGVGbnMuY29tcGxlbWVudGFyeShcblx0XHRcdFx0XHRcdFx0b3B0aW9ucyxcblx0XHRcdFx0XHRcdFx0Y29tbW9uXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdGNhc2UgJ2RpYWRpYyc6XG5cdFx0XHRcdFx0XHRyZXR1cm4gZ2VuZXJhdGVQYWxldHRlRm5zLmRpYWRpYyhcblx0XHRcdFx0XHRcdFx0b3B0aW9ucyxcblx0XHRcdFx0XHRcdFx0Y29tbW9uLFxuXHRcdFx0XHRcdFx0XHRnZW5lcmF0ZUh1ZXNGbnNcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0Y2FzZSAnaGV4YWRpYyc6XG5cdFx0XHRcdFx0XHRyZXR1cm4gZ2VuZXJhdGVQYWxldHRlRm5zLmhleGFkaWMoXG5cdFx0XHRcdFx0XHRcdG9wdGlvbnMsXG5cdFx0XHRcdFx0XHRcdGNvbW1vbixcblx0XHRcdFx0XHRcdFx0Z2VuZXJhdGVIdWVzRm5zXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdGNhc2UgJ21vbm9jaHJvbWF0aWMnOlxuXHRcdFx0XHRcdFx0cmV0dXJuIGdlbmVyYXRlUGFsZXR0ZUZucy5tb25vY2hyb21hdGljKFxuXHRcdFx0XHRcdFx0XHRvcHRpb25zLFxuXHRcdFx0XHRcdFx0XHRjb21tb25cblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0Y2FzZSAncmFuZG9tJzpcblx0XHRcdFx0XHRcdHJldHVybiBnZW5lcmF0ZVBhbGV0dGVGbnMucmFuZG9tKG9wdGlvbnMsIGNvbW1vbik7XG5cdFx0XHRcdFx0Y2FzZSAnc3BsaXRDb21wbGVtZW50YXJ5Jzpcblx0XHRcdFx0XHRcdHJldHVybiBnZW5lcmF0ZVBhbGV0dGVGbnMuc3BsaXRDb21wbGVtZW50YXJ5KFxuXHRcdFx0XHRcdFx0XHRvcHRpb25zLFxuXHRcdFx0XHRcdFx0XHRjb21tb25cblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0Y2FzZSAndGV0cmFkaWMnOlxuXHRcdFx0XHRcdFx0cmV0dXJuIGdlbmVyYXRlUGFsZXR0ZUZucy50ZXRyYWRpYyhcblx0XHRcdFx0XHRcdFx0b3B0aW9ucyxcblx0XHRcdFx0XHRcdFx0Y29tbW9uLFxuXHRcdFx0XHRcdFx0XHRnZW5lcmF0ZUh1ZXNGbnNcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0Y2FzZSAndHJpYWRpYyc6XG5cdFx0XHRcdFx0XHRyZXR1cm4gZ2VuZXJhdGVQYWxldHRlRm5zLnRyaWFkaWMoXG5cdFx0XHRcdFx0XHRcdG9wdGlvbnMsXG5cdFx0XHRcdFx0XHRcdGNvbW1vbixcblx0XHRcdFx0XHRcdFx0Z2VuZXJhdGVIdWVzRm5zXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRsb2cuZXJyb3IoXG5cdFx0XHRcdFx0XHRcdGBJbnZhbGlkIHBhbGV0dGUgdHlwZSAke29wdGlvbnMucGFsZXR0ZVR5cGV9YCxcblx0XHRcdFx0XHRcdFx0YFtnZW5lcmF0ZVBhbGV0dGVdYFxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdHJldHVybiBkZWZhdWx0UGFsZXR0ZTtcblx0XHRcdFx0fVxuXHRcdFx0fSkoKTtcblxuXHRcdFx0Ly8gTkVXOiBTaG93IG9yIGhpZGUgcGFsZXR0ZSBjb2x1bW5zIGJhc2VkIG9uIHRoZSBnZW5lcmF0ZWQgcGFsZXR0ZVxuXHRcdFx0Y29tbW9uLnV0aWxzLnBhbGV0dGUuc2hvd1BhbGV0dGVDb2x1bW5zKHBhbGV0dGUuaXRlbXMubGVuZ3RoKTtcblxuXHRcdFx0cmV0dXJuIHBhbGV0dGU7XG5cdFx0fSxcblx0XHQnRXJyb3IgZ2VuZXJhdGluZyBwYWxldHRlJyxcblx0XHR7IGNvbnRleHQ6IHsgb3B0aW9ucyB9IH1cblx0KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlSHVlcyhcblx0Y29sb3I6IEhTTCxcblx0b3B0aW9uczogU2VsZWN0ZWRQYWxldHRlT3B0aW9ucyxcblx0Y29tbW9uOiBDb21tb25GdW5jdGlvbnMsXG5cdGdlbmVyYXRlSHVlczogR2VuZXJhdGVIdWVzRm5Hcm91cFxuKTogbnVtYmVyW10ge1xuXHRjb25zdCB7XG5cdFx0aGVscGVycyxcblx0XHRzZXJ2aWNlczogeyBsb2csIGVycm9ycyB9LFxuXHRcdHV0aWxzXG5cdH0gPSBjb21tb247XG5cblx0cmV0dXJuIGVycm9ycy5oYW5kbGVTeW5jKFxuXHRcdCgpID0+IHtcblx0XHRcdGlmICghdXRpbHMudmFsaWRhdGUuY29sb3JWYWx1ZShjb2xvcikpIHtcblx0XHRcdFx0bG9nLmVycm9yKFxuXHRcdFx0XHRcdGBJbnZhbGlkIGNvbG9yIHZhbHVlICR7SlNPTi5zdHJpbmdpZnkoY29sb3IpfWAsXG5cdFx0XHRcdFx0YFtnZW5lcmF0ZUh1ZXNdYFxuXHRcdFx0XHQpO1xuXHRcdFx0XHRyZXR1cm4gW107XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IGNsb25lZENvbG9yID0gaGVscGVycy5kYXRhLmRlZXBDbG9uZShjb2xvcikgYXMgSFNMO1xuXG5cdFx0XHRzd2l0Y2ggKG9wdGlvbnMucGFsZXR0ZVR5cGUpIHtcblx0XHRcdFx0Y2FzZSAnYW5hbG9nb3VzJzpcblx0XHRcdFx0XHRyZXR1cm4gZ2VuZXJhdGVIdWVzLmFuYWxvZ291cyhjbG9uZWRDb2xvciwgb3B0aW9ucywgY29tbW9uKTtcblx0XHRcdFx0Y2FzZSAnZGlhZGljJzpcblx0XHRcdFx0XHRyZXR1cm4gZ2VuZXJhdGVIdWVzLmRpYWRpYyhjbG9uZWRDb2xvciwgb3B0aW9ucywgY29tbW9uKTtcblx0XHRcdFx0Y2FzZSAnaGV4YWRpYyc6XG5cdFx0XHRcdFx0cmV0dXJuIGdlbmVyYXRlSHVlcy5oZXhhZGljKGNsb25lZENvbG9yLCBjb21tb24pO1xuXHRcdFx0XHRjYXNlICdzcGxpdENvbXBsZW1lbnRhcnknOlxuXHRcdFx0XHRcdHJldHVybiBnZW5lcmF0ZUh1ZXMuc3BsaXRDb21wbGVtZW50YXJ5KGNsb25lZENvbG9yLCBjb21tb24pO1xuXHRcdFx0XHRjYXNlICd0ZXRyYWRpYyc6XG5cdFx0XHRcdFx0cmV0dXJuIGdlbmVyYXRlSHVlcy50ZXRyYWRpYyhjbG9uZWRDb2xvciwgY29tbW9uKTtcblx0XHRcdFx0Y2FzZSAndHJpYWRpYyc6XG5cdFx0XHRcdFx0cmV0dXJuIGdlbmVyYXRlSHVlcy50cmlhZGljKGNsb25lZENvbG9yLCBjb21tb24pO1xuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdGxvZy5lcnJvcihcblx0XHRcdFx0XHRcdGBJbnZhbGlkIGh1ZSB0eXBlICR7b3B0aW9ucy5wYWxldHRlVHlwZX1gLFxuXHRcdFx0XHRcdFx0YFtnZW5lcmF0ZUh1ZXNdYFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0cmV0dXJuIFtdO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0J0Vycm9yIGdlbmVyYXRpbmcgaHVlcycsXG5cdFx0eyBjb250ZXh0OiB7IGNvbG9yLCBvcHRpb25zIH0gfVxuXHQpO1xufVxuIl19