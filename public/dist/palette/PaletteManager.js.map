{"version":3,"file":"PaletteManager.js","sources":["../../../../src/palette/PaletteManager.ts"],"sourcesContent":["// File: palette/PaletteManager.js\n\nimport { StateManager } from '../state/StateManager.js';\nimport { StorageManager } from '../storage/StorageManager.js';\nimport {\n\tCommonFunctions,\n\tGenerateHuesFnGroup,\n\tGeneratePaletteFn,\n\tGeneratePaletteFnGroup,\n\tHelpers,\n\tPalette,\n\tPaletteItem,\n\tPaletteManagerInterface,\n\tServices,\n\tUtilities\n} from '../types/index.js';\nimport { defaults, domConfig, domIndex, regex } from '../config/index.js';\n\nconst ids = domIndex.ids;\n\nexport class PaletteManager implements PaletteManagerInterface {\n\t#generateHues: GenerateHuesFnGroup;\n\t#generatePaletteFns: GeneratePaletteFnGroup;\n\t#generatePalette: GeneratePaletteFn;\n\t#common: CommonFunctions;\n\t#helpers: Helpers;\n\t#utils: Utilities;\n\t#log: Services['log'];\n\t#errors: Services['errors'];\n\t#storage: StorageManager;\n\n\tconstructor(\n\t\tprivate stateManager: StateManager,\n\t\tcommon: CommonFunctions,\n\t\tgenerateHues: GenerateHuesFnGroup,\n\t\tgeneratePaletteFns: GeneratePaletteFnGroup,\n\t\tgeneratePalette: GeneratePaletteFn\n\t) {\n\t\tcommon.services.log(`Constructing PaletteManager.`, {\n\t\t\tcaller: '[PaletteManager constructor]',\n\t\t\tlevel: 'debug',\n\t\t\tverbosity: 3\n\t\t});\n\n\t\tthis.#log = common.services.log;\n\t\tthis.#generateHues = generateHues;\n\t\tthis.#generatePaletteFns = generatePaletteFns;\n\t\tthis.#generatePalette = generatePalette;\n\t\tthis.#common = common;\n\t\tthis.#errors = common.services.errors;\n\t\tthis.#helpers = common.helpers;\n\t\tthis.#utils = common.utils;\n\n\t\tthis.#storage = new StorageManager(this.#common.services);\n\n\t\tthis.#log('Completing Palette Manager initialization', {\n\t\t\tcaller: '[PaletteManager constructor]',\n\t\t\tlevel: 'debug'\n\t\t});\n\t}\n\n\textractPaletteFromDOM(): Palette | void {\n\t\treturn this.#errors.handleSync(() => {\n\t\t\tthis.#log('Extracting palette from DOM', {\n\t\t\t\tcaller: '[PaletteManager.extractPaletteFromDOM]',\n\t\t\t\tlevel: 'debug'\n\t\t\t});\n\n\t\t\tconst paletteColumns = document.querySelectorAll('.palette-column');\n\t\t\tif (paletteColumns.length === 0) {\n\t\t\t\tthis.#log('No palette columns found in DOM.', {\n\t\t\t\t\tcaller: '[PaletteManager.extractPaletteFromDOM]',\n\t\t\t\t\tlevel: 'warn'\n\t\t\t\t});\n\t\t\t\treturn defaults.palette;\n\t\t\t}\n\n\t\t\tconst extractedItems: PaletteItem[] = Array.from(\n\t\t\t\tpaletteColumns\n\t\t\t).map((col, index) => {\n\t\t\t\tconst input = col.querySelector(\n\t\t\t\t\t'.color-display'\n\t\t\t\t) as HTMLInputElement;\n\t\t\t\tconst color = input ? input.value.trim() : '#000000';\n\n\t\t\t\tthis.#log(\n\t\t\t\t\t`Extracted color from column ${index + 1}: ${color}`,\n\t\t\t\t\t{\n\t\t\t\t\t\tcaller: '[PaletteManager.extractPaletteFromDOM]',\n\t\t\t\t\t\tlevel: 'debug'\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\tif (!regex.dom.hex.test(color)) {\n\t\t\t\t\tthis.#log(\n\t\t\t\t\t\t`Invalid color format for column ${index + 1}: ${color}. Generating and using random HSL`,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcaller: '[PaletteManager.extractPaletteFromDOM]',\n\t\t\t\t\t\t\tlevel: 'warn'\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\n\t\t\t\t\tconst fallbackColor = this.#utils.color.generateRandomHSL();\n\n\t\t\t\t\treturn this.#utils.palette.createPaletteItem(\n\t\t\t\t\t\tfallbackColor,\n\t\t\t\t\t\tindex + 1\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tconst formattedColor =\n\t\t\t\t\tthis.#utils.color.formatCSSAsColor(color);\n\t\t\t\tif (!formattedColor) throw new Error(`Invalid color: ${color}`);\n\n\t\t\t\tconst hslColor =\n\t\t\t\t\tformattedColor.format === 'hsl'\n\t\t\t\t\t\t? formattedColor\n\t\t\t\t\t\t: this.#utils.color.convertToHSL(formattedColor);\n\n\t\t\t\tconst allColors =\n\t\t\t\t\tthis.#utils.palette.generateAllColorValues(hslColor);\n\n\t\t\t\treturn this.#utils.palette.createPaletteItem(\n\t\t\t\t\tallColors.hsl,\n\t\t\t\t\tindex + 1\n\t\t\t\t);\n\t\t\t});\n\n\t\t\tconst options = this.#utils.palette.getPaletteOptionsFromUI();\n\n\t\t\tthis.#log(`Extracted palette options: ${JSON.stringify(options)}`, {\n\t\t\t\tcaller: '[PaletteManager.extractPaletteFromDOM]',\n\t\t\t\tlevel: 'debug'\n\t\t\t});\n\n\t\t\treturn {\n\t\t\t\tid: `${options.paletteType}_${crypto.randomUUID()}`,\n\t\t\t\tmetadata: {\n\t\t\t\t\tname: 'EXTRACTED',\n\t\t\t\t\tcolumnCount: extractedItems.length,\n\t\t\t\t\tlimitDark: options.limitDark,\n\t\t\t\t\tlimitGray: options.limitGray,\n\t\t\t\t\tlimitLight: options.limitLight,\n\t\t\t\t\ttimestamp: this.#helpers.data.getFormattedTimestamp(),\n\t\t\t\t\ttype: options.paletteType\n\t\t\t\t},\n\t\t\t\titems: extractedItems\n\t\t\t};\n\t\t}, 'Failed to extract palette from DOM');\n\t}\n\n\tasync handleColumnLock(columnID: number): Promise<void> {\n\t\treturn this.#errors.handleAsync(async () => {\n\t\t\tconst currentState = await this.stateManager.getState();\n\t\t\tconst columns = currentState.paletteContainer.columns;\n\n\t\t\t// find column by ID\n\t\t\tconst columnIndex = columns.findIndex(col => col.id === columnID);\n\n\t\t\tif (columnIndex === -1) {\n\t\t\t\tthis.#log(`Column with ID ${columnID} not found.`, {\n\t\t\t\t\tcaller: '[PaletteManager.handleColumnLock]',\n\t\t\t\t\tlevel: 'warn'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// toggle lock state\n\t\t\tcolumns[columnIndex].isLocked = !columns[columnIndex].isLocked;\n\n\t\t\tthis.stateManager.updatePaletteColumns(columns, true, 2);\n\t\t}, `Failed to toggle lock for column ${columnID}`);\n\t}\n\n\tasync handleColumnResize(columnID: number, newSize: number): Promise<void> {\n\t\treturn this.#errors.handleAsync(async () => {\n\t\t\tconst currentState = await this.stateManager.getState();\n\t\t\tconst columns = currentState.paletteContainer.columns;\n\n\t\t\tconst columnIndex = columns.findIndex(col => col.id === columnID);\n\t\t\tif (columnIndex === -1) {\n\t\t\t\tthis.#log(`Column with ID ${columnID} not found.`, {\n\t\t\t\t\tcaller: '[PaletteManager.handleColumnResize]',\n\t\t\t\t\tlevel: 'warn'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst minSize = domConfig.minColumnSize;\n\t\t\tconst maxSize = domConfig.maxColumnSize;\n\t\t\tconst adjustedSize = Math.max(minSize, Math.min(newSize, maxSize));\n\n\t\t\tconst sizeDiff = adjustedSize - columns[columnIndex].size;\n\t\t\tcolumns[columnIndex].size = adjustedSize;\n\n\t\t\tconst unlockedColumns = columns.filter(\n\t\t\t\t(_, i) => i !== columnIndex && !columns[i].isLocked\n\t\t\t);\n\t\t\tconst distributeAmount = sizeDiff / unlockedColumns.length;\n\n\t\t\tunlockedColumns.forEach(col => {\n\t\t\t\tcol.size = Math.max(\n\t\t\t\t\tminSize,\n\t\t\t\t\tMath.min(col.size - distributeAmount, maxSize)\n\t\t\t\t);\n\t\t\t});\n\n\t\t\t// normalize to 100%\n\t\t\tconst totalSize = columns.reduce((sum, col) => sum + col.size, 0);\n\t\t\tconst correctionFactor = 100 / totalSize;\n\t\t\tcolumns.forEach(col => (col.size *= correctionFactor));\n\n\t\t\tthis.stateManager.updatePaletteColumns(columns, true, 2);\n\t\t}, `Failed to resize column ${columnID}`);\n\t}\n\n\tasync loadPalette(): Promise<void> {\n\t\treturn await this.#errors.handleAsync(async () => {\n\t\t\tawait this.stateManager.ensureStateReady();\n\n\t\t\tconst storedPalette = await this.#storage.getItem('palette');\n\t\t\tif (\n\t\t\t\tstoredPalette &&\n\t\t\t\tthis.#helpers.typeguards.isPalette(storedPalette)\n\t\t\t) {\n\t\t\t\tthis.stateManager.addPaletteToHistory(storedPalette);\n\t\t\t\tthis.#log(`Stored palette added to history`, {\n\t\t\t\t\tcaller: '[PaletteManager.loadPalette]',\n\t\t\t\t\tlevel: 'debug'\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst randomOptions =\n\t\t\t\tthis.#utils.palette.getRandomizedPaleteOptions();\n\t\t\tthis.#log(\n\t\t\t\t`Generated randomized palette options: ${JSON.stringify(randomOptions)}`,\n\t\t\t\t{\n\t\t\t\t\tcaller: '[PaletteManager.loadPalette]',\n\t\t\t\t\tlevel: 'debug'\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tconst newPalette = this.#generatePalette(\n\t\t\t\trandomOptions,\n\t\t\t\tthis.#common,\n\t\t\t\tthis.#generateHues,\n\t\t\t\tthis.#generatePaletteFns\n\t\t\t);\n\n\t\t\tthis.stateManager.addPaletteToHistory(newPalette);\n\t\t\tthis.#log(`New palette added to history`, {\n\t\t\t\tcaller: '[PaletteManager.loadPalette]',\n\t\t\t\tlevel: 'debug'\n\t\t\t});\n\n\t\t\tawait this.#storage.setItem('palette', newPalette);\n\t\t\tthis.#log(`New palette stored`, {\n\t\t\t\tcaller: '[PaletteManager.loadPalette]',\n\t\t\t\tlevel: 'debug'\n\t\t\t});\n\n\t\t\tthis.renderPaletteFromState();\n\t\t\tthis.#log(`Palette rendered from state`, {\n\t\t\t\tcaller: '[PaletteManager.loadPalette]',\n\t\t\t\tlevel: 'debug'\n\t\t\t});\n\t\t}, 'Failed to load palette');\n\t}\n\n\tasync renderNewPalette(): Promise<void> {\n\t\treturn await this.#errors.handleAsync(async () => {\n\t\t\tconst paletteContainer =\n\t\t\t\tthis.#helpers.dom.getElement<HTMLDivElement>(\n\t\t\t\t\tids.divs.paletteContainer\n\t\t\t\t);\n\n\t\t\tif (!paletteContainer) {\n\t\t\t\tthrow new Error('Palette container not found');\n\t\t\t}\n\n\t\t\t// retrieve palette generation options\n\t\t\tconst options = this.#utils.palette.getPaletteOptionsFromUI();\n\t\t\tthis.#log(`Palette options: ${JSON.stringify(options)}`, {\n\t\t\t\tcaller: '[PaletteManager.renderNewPalette]',\n\t\t\t\tlevel: 'debug'\n\t\t\t});\n\n\t\t\t// store the old palette in history\n\t\t\tconst oldPalette = (\n\t\t\t\tawait this.stateManager.getState()\n\t\t\t).paletteHistory.at(-1);\n\t\t\tif (oldPalette) this.stateManager.addPaletteToHistory(oldPalette);\n\n\t\t\t// clear the existing palette\n\t\t\tpaletteContainer.innerHTML = '';\n\n\t\t\t// generate a new palette\n\t\t\tconst newPalette = this.#generatePalette(\n\t\t\t\toptions,\n\t\t\t\tthis.#common,\n\t\t\t\tthis.#generateHues,\n\t\t\t\tthis.#generatePaletteFns\n\t\t\t);\n\n\t\t\t// ensure valid palette before storing\n\t\t\tif (!this.#helpers.typeguards.isPalette(newPalette)) {\n\t\t\t\tthrow new Error('Generated palette is invalid.');\n\t\t\t}\n\n\t\t\tthis.stateManager.addPaletteToHistory(newPalette);\n\t\t\tawait this.#storage.setItem('palette', newPalette);\n\n\t\t\t// create and append palette columns\n\t\t\tconst columnWidth = 100 / newPalette.items.length;\n\t\t\tconst validColorSpace = ['hex', 'hsl', 'rgb'].includes(\n\t\t\t\t(await this.stateManager.getState()).preferences.colorSpace\n\t\t\t)\n\t\t\t\t? (await this.stateManager.getState()).preferences.colorSpace\n\t\t\t\t: 'hex';\n\n\t\t\tconst columns = newPalette.items.map((item, index) => {\n\t\t\t\tconst columnID = index + 1;\n\t\t\t\tconst colorValue =\n\t\t\t\t\titem.css[validColorSpace as keyof PaletteItem['css']] ||\n\t\t\t\t\titem.css.hex;\n\n\t\t\t\tconst column = document.createElement('div');\n\t\t\t\tcolumn.id = `palette-column-${columnID}`;\n\t\t\t\tcolumn.className = 'palette-column';\n\t\t\t\tcolumn.setAttribute('draggable', 'true');\n\t\t\t\tcolumn.style.backgroundColor = colorValue;\n\n\t\t\t\t// add UI elements inside the column\n\t\t\t\tthis.#createColumnInUI(column, columnID, colorValue);\n\n\t\t\t\treturn {\n\t\t\t\t\tcolumn,\n\t\t\t\t\tstate: {\n\t\t\t\t\t\tid: columnID,\n\t\t\t\t\t\tisLocked: false,\n\t\t\t\t\t\tposition: columnID,\n\t\t\t\t\t\tsize: columnWidth\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t});\n\n\t\t\t// append new columns to the palette container\n\t\t\tcolumns.forEach(({ column }) =>\n\t\t\t\tpaletteContainer.appendChild(column)\n\t\t\t);\n\n\t\t\t// update state with new columns\n\t\t\tthis.stateManager.updatePaletteColumns(\n\t\t\t\tcolumns.map(col => col.state),\n\t\t\t\ttrue,\n\t\t\t\t3\n\t\t\t);\n\t\t}, 'Failed to render a new palette');\n\t}\n\n\tasync renderPaletteFromState(): Promise<void> {\n\t\treturn await this.#errors.handleAsync(async () => {\n\t\t\tawait this.stateManager.ensureStateReady();\n\t\t\tconst paletteContainer =\n\t\t\t\tthis.#helpers.dom.getElement<HTMLDivElement>(\n\t\t\t\t\tids.divs.paletteContainer\n\t\t\t\t);\n\t\t\tif (!paletteContainer) {\n\t\t\t\tthis.#log('Palette container not found', {\n\t\t\t\t\tcaller: '[PaletteManager.renderPaletteFromState]',\n\t\t\t\t\tlevel: 'warn'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// clear existing content\n\t\t\tpaletteContainer.innerHTML = '';\n\t\t\t// get the most recent palette from history\n\t\t\tconst currentState = await this.stateManager.getState();\n\t\t\tconst latestPalette = currentState.paletteHistory.at(-1);\n\t\t\tif (!latestPalette) {\n\t\t\t\tthis.#log('No saved palettes in history. Cannot render.', {\n\t\t\t\t\tcaller: '[PaletteManager.renderPaletteFromState]',\n\t\t\t\t\tlevel: 'warn'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// retrieve user's preferred color format\n\t\t\tconst colorSpace = currentState.preferences?.colorSpace || 'hex';\n\t\t\tconst validColorSpace = ['hex', 'hsl', 'rgb'].includes(colorSpace)\n\t\t\t\t? colorSpace\n\t\t\t\t: 'hex';\n\t\t\tconst columnCount = latestPalette.metadata.columnCount;\n\t\t\tconst columnWidth = 100 / columnCount;\n\t\t\tconst columns = latestPalette.items.map((item, index) => {\n\t\t\t\tconst columnID = item.itemID;\n\t\t\t\tconst colorValue =\n\t\t\t\t\titem.css[validColorSpace as keyof PaletteItem['css']] ||\n\t\t\t\t\titem.css.hex;\n\t\t\t\tconst column = document.createElement('div');\n\t\t\t\tcolumn.id = `palette-column-${columnID}`;\n\t\t\t\tcolumn.className = 'palette-column';\n\t\t\t\tcolumn.setAttribute('draggable', 'true');\n\t\t\t\tcolumn.style.backgroundColor = colorValue;\n\t\t\t\t// add UI elements inside the column\n\t\t\t\tthis.#createColumnInUI(column, columnID, colorValue);\n\t\t\t\treturn {\n\t\t\t\t\tcolumn,\n\t\t\t\t\tstate: {\n\t\t\t\t\t\tid: columnID,\n\t\t\t\t\t\tisLocked: false,\n\t\t\t\t\t\tposition: index + 1,\n\t\t\t\t\t\tsize: columnWidth\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t});\n\t\t\t// Append new columns to the palette container\n\t\t\tcolumns.forEach(({ column }) =>\n\t\t\t\tpaletteContainer.appendChild(column)\n\t\t\t);\n\t\t\t// Update state with new columns\n\t\t\tthis.stateManager.updatePaletteColumns(\n\t\t\t\tcolumns.map(col => col.state),\n\t\t\t\ttrue,\n\t\t\t\t3\n\t\t\t);\n\n\t\t\tthis.stateManager.updatePaletteHistory([latestPalette]);\n\n\t\t\tawait this.#storage.setItem('palette', latestPalette);\n\t\t\tthis.#log(`Restored ${columns.length} columns from saved state.`, {\n\t\t\t\tcaller: '[PaletteManager.renderPaletteFromState]',\n\t\t\t\tlevel: 'debug'\n\t\t\t});\n\t\t}, 'Failed to render palette from state');\n\t}\n\n\tasync swapColumns(draggedID: number, targetID: number): Promise<void> {\n\t\treturn await this.#errors.handleAsync(async () => {\n\t\t\tconst currentState = await this.stateManager.getState();\n\t\t\tconst columns = [...currentState.paletteContainer.columns];\n\n\t\t\tconst draggedIndex = columns.findIndex(col => col.id === draggedID);\n\t\t\tconst targetIndex = columns.findIndex(col => col.id === targetID);\n\n\t\t\tif (draggedIndex === -1 || targetIndex === -1) {\n\t\t\t\tthis.#log(\n\t\t\t\t\t`Failed to swap columns: Column ID ${draggedID} or ${targetID} not found.`,\n\t\t\t\t\t{\n\t\t\t\t\t\tcaller: '[PaletteManager.swapColumns]',\n\t\t\t\t\t\tlevel: 'warn'\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// swap positions in the array\n\t\t\t[columns[draggedIndex].position, columns[targetIndex].position] = [\n\t\t\t\tcolumns[targetIndex].position,\n\t\t\t\tcolumns[draggedIndex].position\n\t\t\t];\n\n\t\t\t// sort the array based on the new positions\n\t\t\tcolumns.sort((a, b) => a.position - b.position);\n\n\t\t\t// update state with new column order\n\t\t\tthis.stateManager.updatePaletteColumns(columns, true, 3);\n\n\t\t\tthis.#log(\n\t\t\t\t`Swapped columns ${draggedID} and ${targetID}. New order: ${columns.map(col => col.id).join(', ')}`,\n\t\t\t\t{\n\t\t\t\t\tcaller: '[PaletteManager.swapColumns]',\n\t\t\t\t\tlevel: 'debug'\n\t\t\t\t}\n\t\t\t);\n\t\t}, `Failed to swap columns ${draggedID} and ${targetID}`);\n\t}\n\n\tasync #createColumnInUI(\n\t\tcolumn: HTMLElement,\n\t\tcolumnID: number,\n\t\tcolorValue: string\n\t): Promise<void> {\n\t\treturn this.#errors.handleAsync(\n\t\t\tasync () => {\n\t\t\t\tconst currentState = await this.stateManager.getState();\n\t\t\t\tconst colorSpace = currentState.preferences.colorSpace;\n\n\t\t\t\tif (!this.#utils.validate.userColorInput(colorValue)) {\n\t\t\t\t\tthis.#log(\n\t\t\t\t\t\t`Invalid color value: ${colorValue}. Unable to render column UI.`,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcaller: '[PaletteManager.createColumnInUI]',\n\t\t\t\t\t\t\tlevel: 'warn'\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst validColorSpace = ['hex', 'hsl', 'rgb'].includes(\n\t\t\t\t\tcolorSpace\n\t\t\t\t)\n\t\t\t\t\t? colorSpace\n\t\t\t\t\t: 'hex';\n\n\t\t\t\tcolumn.style.backgroundColor = colorValue;\n\n\t\t\t\t// create color display input\n\t\t\t\tconst colorDisplay = document.createElement('input');\n\t\t\t\tcolorDisplay.id = `color-display-${columnID}`;\n\t\t\t\tcolorDisplay.className = 'color-display';\n\t\t\t\tcolorDisplay.type = 'text';\n\t\t\t\tcolorDisplay.value = colorValue;\n\t\t\t\tcolorDisplay.setAttribute('data-format', validColorSpace);\n\n\t\t\t\t// create color input button\n\t\t\t\tconst colorInputBtn = document.createElement('button');\n\t\t\t\tcolorInputBtn.id = `color-input-btn-${columnID}`;\n\t\t\t\tcolorInputBtn.className = 'color-input-btn';\n\t\t\t\tcolorInputBtn.textContent = 'Change Color';\n\n\t\t\t\t// create lock button\n\t\t\t\tconst lockBtn = document.createElement('button');\n\t\t\t\tlockBtn.id = `lock-btn-${columnID}`;\n\t\t\t\tlockBtn.className = 'lock-btn';\n\t\t\t\tlockBtn.textContent = 'Lock 🔒';\n\n\t\t\t\t// create drag handle button\n\t\t\t\tconst dragHandle = document.createElement('button');\n\t\t\t\tdragHandle.id = `drag-handle-${columnID}`;\n\t\t\t\tdragHandle.className = 'drag-handle';\n\t\t\t\tdragHandle.textContent = 'Move ☰';\n\n\t\t\t\t// create resize handle\n\t\t\t\tconst resizeHandle = document.createElement('div');\n\t\t\t\tresizeHandle.id = `resize-handle-${columnID}`;\n\t\t\t\tresizeHandle.className = 'resize-handle';\n\n\t\t\t\t// create color input modal\n\t\t\t\tconst colorInputModal = document.createElement('div');\n\t\t\t\tcolorInputModal.id = `color-input-modal-${columnID}`;\n\t\t\t\tcolorInputModal.className = 'color-input-modal hidden';\n\n\t\t\t\t// create color input inside the modal\n\t\t\t\tconst colorInput = document.createElement('input');\n\t\t\t\tcolorInput.id = `color-input-${columnID}`;\n\t\t\t\tcolorInput.className = 'color-input';\n\t\t\t\tcolorInput.type = 'color';\n\t\t\t\tcolorInput.value = colorValue;\n\n\t\t\t\t// append elements to their parent\n\t\t\t\tcolorInputModal.appendChild(colorInput);\n\t\t\t\tcolumn.appendChild(colorDisplay);\n\t\t\t\tcolumn.appendChild(colorInputBtn);\n\t\t\t\tcolumn.appendChild(lockBtn);\n\t\t\t\tcolumn.appendChild(dragHandle);\n\t\t\t\tcolumn.appendChild(resizeHandle);\n\t\t\t\tcolumn.appendChild(colorInputModal);\n\t\t\t},\n\t\t\t'Failed to create column UI elements',\n\t\t\t{ context: { columnID, colorValue } }\n\t\t);\n\t}\n}\n"],"names":[],"mappings":"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"}