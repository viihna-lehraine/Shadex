{"version":3,"file":"init.js","sources":["../../../../src/app/init.ts"],"sourcesContent":["// File: app/init.ts\n\nimport type {\n\tCommonFunctions,\n\tGenerateHuesFnGroup,\n\tGeneratePaletteFn,\n\tGeneratePaletteFnGroup,\n\tHelpers,\n\tServices,\n\tUtilities\n} from '../types/index.js';\nimport { EventManager } from '../events/EventManager.js';\nimport { PaletteEvents } from '../events/PaletteEvents.js';\nimport { PaletteManager } from '../palette/PaletteManager.js';\nimport { PaletteState } from '../state/PaletteState.js';\nimport { StateManager } from '../state/StateManager.js';\nimport { UIEvents } from '../events/UIEvents.js';\n\nasync function exposeClasses(\n\teventManager: EventManager,\n\tpaletteEvents: PaletteEvents,\n\tpaletteManager: PaletteManager,\n\tservices: Services,\n\tstateManager: StateManager,\n\tuiEvents: UIEvents\n): Promise<void> {\n\tconst { log, errors } = services;\n\tlog(`Function called.`, { caller: '[EXPOSE_CLASSES]' });\n\n\treturn await errors.handleAndReturn(async () => {\n\t\tlog('Exposing functions to window.', { caller: '[EXPOSE_CLASSES]' });\n\t\twindow.eventManager = eventManager;\n\t\twindow.paletteEvents = paletteEvents;\n\t\twindow.paletteManager = paletteManager;\n\t\twindow.stateManager = stateManager;\n\t\twindow.uiEvents = uiEvents;\n\t\twindow.EventManager = EventManager;\n\t\tlog('Functions exposed to window.', { caller: '[EXPOSE_CLASSES]' });\n\t}, 'Error exposing functions to window');\n}\n\nasync function initializeEvents(\n\thelpers: Helpers,\n\tpaletteManager: PaletteManager,\n\tpaletteState: PaletteState,\n\tservices: Services,\n\tstateManager: StateManager,\n\tutils: Utilities\n): Promise<{\n\tpalette: PaletteEvents;\n\tui: UIEvents;\n}> {\n\tconst { errors } = services;\n\n\treturn await errors.handleAndReturn(async () => {\n\t\tconst paletteEvents = new PaletteEvents(\n\t\t\thelpers,\n\t\t\tpaletteManager,\n\t\t\tpaletteState,\n\t\t\tservices,\n\t\t\tstateManager,\n\t\t\tutils\n\t\t);\n\t\tconst uiEvents = new UIEvents(helpers, paletteManager, services, utils);\n\n\t\tpaletteEvents.init();\n\n\t\tuiEvents.init();\n\t\tuiEvents.initButtons();\n\n\t\treturn { palette: paletteEvents, ui: uiEvents };\n\t}, 'Error initializing events');\n}\n\nasync function initializePaletteManager(\n\tcommon: CommonFunctions,\n\tgenerateHuesFnGroup: GenerateHuesFnGroup,\n\tgeneratePaletteFnGroup: GeneratePaletteFnGroup,\n\tgeneratePalette: GeneratePaletteFn,\n\tstateManager: StateManager\n): Promise<PaletteManager> {\n\tconst { errors } = common.services;\n\n\treturn await errors.handleAndReturn(async () => {\n\t\tconst paletteManager = new PaletteManager(\n\t\t\tstateManager,\n\t\t\tcommon,\n\t\t\tgenerateHuesFnGroup,\n\t\t\tgeneratePaletteFnGroup,\n\t\t\tgeneratePalette\n\t\t);\n\t\treturn paletteManager;\n\t}, 'Error initializing PaletteManager.');\n}\n\nasync function initializePaletteState(\n\tservices: Services,\n\tstateManager: StateManager,\n\tutils: Utilities\n): Promise<PaletteState> {\n\tconst { errors } = services;\n\n\treturn await errors.handleAndReturn(async () => {\n\t\tconst palettestate = new PaletteState(stateManager, services, utils);\n\n\t\treturn palettestate;\n\t}, 'Error initializing PaletteState');\n}\n\nasync function initializeStateManager(\n\thelpers: Helpers,\n\tservices: Services,\n\tutils: Utilities\n): Promise<StateManager> {\n\tconst { errors } = services;\n\n\treturn await errors.handleAndReturn(async () => {\n\t\tconst stateManager = StateManager.getInstance(helpers, services, utils);\n\n\t\treturn stateManager;\n\t}, 'Error initializing StateManager');\n}\n\nasync function initializeUtilities(\n\thelpers: Helpers,\n\tservices: Services\n): Promise<Utilities> {\n\tconst { errors } = services;\n\n\treturn await errors.handleAndReturn(async () => {\n\t\tconst { utilitiesFactory } = await import(\n\t\t\t'../common/factories/utils.js'\n\t\t);\n\n\t\tconst utils = await utilitiesFactory(helpers, services);\n\n\t\treturn utils;\n\t}, 'Error initializing utils');\n}\n\nexport {\n\texposeClasses,\n\tinitializeEvents,\n\tinitializePaletteManager,\n\tinitializePaletteState,\n\tinitializeStateManager,\n\tinitializeUtilities\n};\n"],"names":[],"mappings":"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"}