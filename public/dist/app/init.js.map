{"version":3,"file":"init.js","sources":["../../../../src/app/init.ts"],"sourcesContent":["// File: app/init.ts\n\nimport type { Helpers, Services, Utilities } from '../types/index.js';\nimport { DOMStore } from '../dom/DOMStore.js';\nimport { EventManager } from '../dom/events/EventManager.js';\nimport { PaletteEventsService } from '../dom/events/PaletteEventsService.js';\nimport { PaletteRendererService } from '../dom/PaletteRendererService.js';\nimport { PaletteStateService } from '../state/PaletteStateService.js';\nimport { StateManager } from '../state/StateManager.js';\nimport { UIEventsService } from '../dom/events/UIEventsService.js';\n\nasync function initializeDOMStore(\n\thelpers: Helpers,\n\tservices: Services\n): Promise<DOMStore> {\n\tconst { errors, log } = services;\n\n\treturn errors.handleAsync(async () => {\n\t\treturn DOMStore.getInstance(errors, helpers, log);\n\t}, 'Error initializing DOMStore');\n}\n\nasync function initializeEventManager(\n\tservices: Services\n): Promise<EventManager> {\n\tconst { errors } = services;\n\n\treturn errors.handleAsync(async () => {\n\t\treturn EventManager.getInstance(services);\n\t}, 'Error initializing EventManager');\n}\n\nasync function initializePaletteEventsService(\n\tdomStore: DOMStore,\n\thelpers: Helpers,\n\tpaletteRenderer: PaletteRendererService,\n\tpaletteState: PaletteStateService,\n\tservices: Services,\n\tstateManager: StateManager,\n\tutils: Utilities\n): Promise<PaletteEventsService> {\n\tconst { errors } = services;\n\n\treturn await errors.handleAsync(async () => {\n\t\tconst paletteEvents = PaletteEventsService.getInstance(\n\t\t\tdomStore,\n\t\t\thelpers,\n\t\t\tpaletteRenderer,\n\t\t\tpaletteState,\n\t\t\tservices,\n\t\t\tstateManager,\n\t\t\tutils\n\t\t);\n\n\t\tpaletteEvents.init();\n\n\t\treturn paletteEvents;\n\t}, 'Error initializing events');\n}\n\nasync function initializePaletteStateService(\n\tservices: Services,\n\tstateManager: StateManager\n): Promise<PaletteStateService> {\n\tconst { errors } = services;\n\n\treturn await errors.handleAsync(async () => {\n\t\tconst palettestate = PaletteStateService.getInstance(\n\t\t\tservices,\n\t\t\tstateManager\n\t\t);\n\n\t\treturn palettestate;\n\t}, 'Error initializing PaletteState');\n}\n\nasync function initializeStateManager(\n\thelpers: Helpers,\n\tservices: Services,\n\tutils: Utilities\n): Promise<StateManager> {\n\tconst { errors } = services;\n\n\treturn await errors.handleAsync(async () => {\n\t\tconst stateManager = StateManager.getInstance(helpers, services, utils);\n\n\t\treturn stateManager;\n\t}, 'Error initializing StateManager');\n}\n\nasync function initializeUIEventsService(\n\tdomStore: DOMStore,\n\thelpers: Helpers,\n\tpaletteRenderer: PaletteRendererService,\n\tservices: Services,\n\tutils: Utilities\n): Promise<UIEventsService> {\n\tconst { errors } = services;\n\n\treturn await errors.handleAsync(async () => {\n\t\tconst uiEvents = UIEventsService.getInstance(\n\t\t\tdomStore,\n\t\t\thelpers,\n\t\t\tpaletteRenderer,\n\t\t\tservices,\n\t\t\tutils\n\t\t);\n\n\t\tuiEvents.init();\n\t\tuiEvents.initButtons();\n\n\t\treturn uiEvents;\n\t}, 'Error initializing UIEventsService');\n}\n\nasync function initializeUtilities(\n\thelpers: Helpers,\n\tservices: Services\n): Promise<Utilities> {\n\tconst { errors } = services;\n\n\treturn await errors.handleAsync(async () => {\n\t\tconst { utilitiesFactory } = await import('../core/factories/utils.js');\n\n\t\tconst utils = await utilitiesFactory(helpers, services);\n\n\t\treturn utils;\n\t}, 'Error initializing utils');\n}\n\nexport {\n\tinitializeDOMStore,\n\tinitializeEventManager,\n\tinitializePaletteEventsService,\n\tinitializePaletteStateService,\n\tinitializeStateManager,\n\tinitializeUIEventsService,\n\tinitializeUtilities\n};\n"],"names":[],"mappings":";;;;;;;AAAA;AAWA,eAAe,kBAAkB,CAChC,OAAgB,EAChB,QAAkB,EAAA;AAElB,IAAA,MAAM,EAAE,MAAM,EAAE,GAAG,EAAE,GAAG,QAAQ;AAEhC,IAAA,OAAO,MAAM,CAAC,WAAW,CAAC,YAAW;QACpC,OAAO,QAAQ,CAAC,WAAW,CAAC,MAAM,EAAE,OAAO,EAAE,GAAG,CAAC;KACjD,EAAE,6BAA6B,CAAC;AAClC;AAEA,eAAe,sBAAsB,CACpC,QAAkB,EAAA;AAElB,IAAA,MAAM,EAAE,MAAM,EAAE,GAAG,QAAQ;AAE3B,IAAA,OAAO,MAAM,CAAC,WAAW,CAAC,YAAW;AACpC,QAAA,OAAO,YAAY,CAAC,WAAW,CAAC,QAAQ,CAAC;KACzC,EAAE,iCAAiC,CAAC;AACtC;AAEA,eAAe,8BAA8B,CAC5C,QAAkB,EAClB,OAAgB,EAChB,eAAuC,EACvC,YAAiC,EACjC,QAAkB,EAClB,YAA0B,EAC1B,KAAgB,EAAA;AAEhB,IAAA,MAAM,EAAE,MAAM,EAAE,GAAG,QAAQ;AAE3B,IAAA,OAAO,MAAM,MAAM,CAAC,WAAW,CAAC,YAAW;QAC1C,MAAM,aAAa,GAAG,oBAAoB,CAAC,WAAW,CACrD,QAAQ,EACR,OAAO,EACP,eAAe,EACf,YAAY,EACZ,QAAQ,EACR,YAAY,EACZ,KAAK,CACL;QAED,aAAa,CAAC,IAAI,EAAE;AAEpB,QAAA,OAAO,aAAa;KACpB,EAAE,2BAA2B,CAAC;AAChC;AAEA,eAAe,6BAA6B,CAC3C,QAAkB,EAClB,YAA0B,EAAA;AAE1B,IAAA,MAAM,EAAE,MAAM,EAAE,GAAG,QAAQ;AAE3B,IAAA,OAAO,MAAM,MAAM,CAAC,WAAW,CAAC,YAAW;QAC1C,MAAM,YAAY,GAAG,mBAAmB,CAAC,WAAW,CACnD,QAAQ,EACR,YAAY,CACZ;AAED,QAAA,OAAO,YAAY;KACnB,EAAE,iCAAiC,CAAC;AACtC;AAEA,eAAe,sBAAsB,CACpC,OAAgB,EAChB,QAAkB,EAClB,KAAgB,EAAA;AAEhB,IAAA,MAAM,EAAE,MAAM,EAAE,GAAG,QAAQ;AAE3B,IAAA,OAAO,MAAM,MAAM,CAAC,WAAW,CAAC,YAAW;AAC1C,QAAA,MAAM,YAAY,GAAG,YAAY,CAAC,WAAW,CAAC,OAAO,EAAE,QAAQ,EAAE,KAAK,CAAC;AAEvE,QAAA,OAAO,YAAY;KACnB,EAAE,iCAAiC,CAAC;AACtC;AAEA,eAAe,yBAAyB,CACvC,QAAkB,EAClB,OAAgB,EAChB,eAAuC,EACvC,QAAkB,EAClB,KAAgB,EAAA;AAEhB,IAAA,MAAM,EAAE,MAAM,EAAE,GAAG,QAAQ;AAE3B,IAAA,OAAO,MAAM,MAAM,CAAC,WAAW,CAAC,YAAW;AAC1C,QAAA,MAAM,QAAQ,GAAG,eAAe,CAAC,WAAW,CAC3C,QAAQ,EACR,OAAO,EACP,eAAe,EACf,QAAQ,EACR,KAAK,CACL;QAED,QAAQ,CAAC,IAAI,EAAE;QACf,QAAQ,CAAC,WAAW,EAAE;AAEtB,QAAA,OAAO,QAAQ;KACf,EAAE,oCAAoC,CAAC;AACzC;AAEA,eAAe,mBAAmB,CACjC,OAAgB,EAChB,QAAkB,EAAA;AAElB,IAAA,MAAM,EAAE,MAAM,EAAE,GAAG,QAAQ;AAE3B,IAAA,OAAO,MAAM,MAAM,CAAC,WAAW,CAAC,YAAW;QAC1C,MAAM,EAAE,gBAAgB,EAAE,GAAG,MAAM,OAAO,4BAA4B,CAAC;QAEvE,MAAM,KAAK,GAAG,MAAM,gBAAgB,CAAC,OAAO,EAAE,QAAQ,CAAC;AAEvD,QAAA,OAAO,KAAK;KACZ,EAAE,0BAA0B,CAAC;AAC/B;;;;"}