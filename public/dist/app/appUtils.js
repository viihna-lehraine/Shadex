// File: app/appUtils.js
import { createLogger } from '../logger/factory.js';
import { modeData as mode } from '../data/mode.js';
const logMode = mode.logging;
const logger = await createLogger();
async function handleAsync(action, errorMessage, caller = 'unknown caller', context) {
    try {
        return await action();
    }
    catch (error) {
        if (logMode.error)
            if (error instanceof Error) {
                logger.error(`${errorMessage}: ${error.message}. Context: ${context}`, `${caller}`);
            }
            else {
                logger.error(`${errorMessage}: ${error}. Context: ${context}`, `${caller}`);
            }
        return null;
    }
}
function log(level, message, method, verbosityRequirement) {
    if (logMode[level] && logMode.verbosity >= (verbosityRequirement ?? 0)) {
        logger[level](`${message}`, `${method}`);
    }
}
export const appUtils = {
    handleAsync,
    log
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwVXRpbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvYXBwL2FwcFV0aWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLHdCQUF3QjtBQUd4QixPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDcEQsT0FBTyxFQUFFLFFBQVEsSUFBSSxJQUFJLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUVuRCxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDO0FBRTdCLE1BQU0sTUFBTSxHQUFHLE1BQU0sWUFBWSxFQUFFLENBQUM7QUFFcEMsS0FBSyxVQUFVLFdBQVcsQ0FDekIsTUFBd0IsRUFDeEIsWUFBb0IsRUFDcEIsU0FBaUIsZ0JBQWdCLEVBQ2pDLE9BQWlDO0lBRWpDLElBQUksQ0FBQztRQUNKLE9BQU8sTUFBTSxNQUFNLEVBQUUsQ0FBQztJQUN2QixDQUFDO0lBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztRQUNoQixJQUFJLE9BQU8sQ0FBQyxLQUFLO1lBQ2hCLElBQUksS0FBSyxZQUFZLEtBQUssRUFBRSxDQUFDO2dCQUM1QixNQUFNLENBQUMsS0FBSyxDQUNYLEdBQUcsWUFBWSxLQUFLLEtBQUssQ0FBQyxPQUFPLGNBQWMsT0FBTyxFQUFFLEVBQ3hELEdBQUcsTUFBTSxFQUFFLENBQ1gsQ0FBQztZQUNILENBQUM7aUJBQU0sQ0FBQztnQkFDUCxNQUFNLENBQUMsS0FBSyxDQUNYLEdBQUcsWUFBWSxLQUFLLEtBQUssY0FBYyxPQUFPLEVBQUUsRUFDaEQsR0FBRyxNQUFNLEVBQUUsQ0FDWCxDQUFDO1lBQ0gsQ0FBQztRQUVGLE9BQU8sSUFBSSxDQUFDO0lBQ2IsQ0FBQztBQUNGLENBQUM7QUFFRCxTQUFTLEdBQUcsQ0FDWCxLQUFpQyxFQUNqQyxPQUFlLEVBQ2YsTUFBYyxFQUNkLG9CQUE2QjtJQUU3QixJQUFJLE9BQU8sQ0FBQyxLQUFLLENBQUMsSUFBSSxPQUFPLENBQUMsU0FBUyxJQUFJLENBQUMsb0JBQW9CLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUN4RSxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxPQUFPLEVBQUUsRUFBRSxHQUFHLE1BQU0sRUFBRSxDQUFDLENBQUM7SUFDMUMsQ0FBQztBQUNGLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxRQUFRLEdBQXNCO0lBQzFDLFdBQVc7SUFDWCxHQUFHO0NBQ0gsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEZpbGU6IGFwcC9hcHBVdGlscy5qc1xuXG5pbXBvcnQgeyBBcHBVdGlsc0ludGVyZmFjZSB9IGZyb20gJy4uL3R5cGVzL2luZGV4LmpzJztcbmltcG9ydCB7IGNyZWF0ZUxvZ2dlciB9IGZyb20gJy4uL2xvZ2dlci9mYWN0b3J5LmpzJztcbmltcG9ydCB7IG1vZGVEYXRhIGFzIG1vZGUgfSBmcm9tICcuLi9kYXRhL21vZGUuanMnO1xuXG5jb25zdCBsb2dNb2RlID0gbW9kZS5sb2dnaW5nO1xuXG5jb25zdCBsb2dnZXIgPSBhd2FpdCBjcmVhdGVMb2dnZXIoKTtcblxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlQXN5bmM8VD4oXG5cdGFjdGlvbjogKCkgPT4gUHJvbWlzZTxUPixcblx0ZXJyb3JNZXNzYWdlOiBzdHJpbmcsXG5cdGNhbGxlcjogc3RyaW5nID0gJ3Vua25vd24gY2FsbGVyJyxcblx0Y29udGV4dD86IFJlY29yZDxzdHJpbmcsIHVua25vd24+XG4pOiBQcm9taXNlPFQgfCBudWxsPiB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIGF3YWl0IGFjdGlvbigpO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGlmIChsb2dNb2RlLmVycm9yKVxuXHRcdFx0aWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcblx0XHRcdFx0bG9nZ2VyLmVycm9yKFxuXHRcdFx0XHRcdGAke2Vycm9yTWVzc2FnZX06ICR7ZXJyb3IubWVzc2FnZX0uIENvbnRleHQ6ICR7Y29udGV4dH1gLFxuXHRcdFx0XHRcdGAke2NhbGxlcn1gXG5cdFx0XHRcdCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRsb2dnZXIuZXJyb3IoXG5cdFx0XHRcdFx0YCR7ZXJyb3JNZXNzYWdlfTogJHtlcnJvcn0uIENvbnRleHQ6ICR7Y29udGV4dH1gLFxuXHRcdFx0XHRcdGAke2NhbGxlcn1gXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cblx0XHRyZXR1cm4gbnVsbDtcblx0fVxufVxuXG5mdW5jdGlvbiBsb2coXG5cdGxldmVsOiAnZGVidWcnIHwgJ3dhcm4nIHwgJ2Vycm9yJyxcblx0bWVzc2FnZTogc3RyaW5nLFxuXHRtZXRob2Q6IHN0cmluZyxcblx0dmVyYm9zaXR5UmVxdWlyZW1lbnQ/OiBudW1iZXJcbik6IHZvaWQge1xuXHRpZiAobG9nTW9kZVtsZXZlbF0gJiYgbG9nTW9kZS52ZXJib3NpdHkgPj0gKHZlcmJvc2l0eVJlcXVpcmVtZW50ID8/IDApKSB7XG5cdFx0bG9nZ2VyW2xldmVsXShgJHttZXNzYWdlfWAsIGAke21ldGhvZH1gKTtcblx0fVxufVxuXG5leHBvcnQgY29uc3QgYXBwVXRpbHM6IEFwcFV0aWxzSW50ZXJmYWNlID0ge1xuXHRoYW5kbGVBc3luYyxcblx0bG9nXG59O1xuIl19