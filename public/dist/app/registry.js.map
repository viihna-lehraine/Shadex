{"version":3,"file":"registry.js","sources":["../../../../src/app/registry.ts"],"sourcesContent":["// File: app/dependencyRegistry.ts\n\nimport {\n\tAppDependencies,\n\tCommonFunctions,\n\tHelpers,\n\tServices,\n\tUtilities\n} from '../types/index.js';\nimport { PaletteRendererService } from '../dom/PaletteRendererService.js';\n\nexport async function registerDependencies(\n\thelpers: Helpers,\n\tservices: Services\n): Promise<AppDependencies> {\n\tconst { errors, log } = services;\n\tconst caller = '[REGISTER_DEPENDENCIES]';\n\n\tlog.info(`Executing registerDependencies...`, `${caller}`);\n\n\treturn await errors.handleAsync(async () => {\n\t\tconst utils = {} as Utilities;\n\n\t\tconst { initializeUtilities } = await import('./init.js');\n\t\tObject.assign(utils, await initializeUtilities(helpers, services));\n\n\t\tconst common: Required<CommonFunctions> = {\n\t\t\thelpers,\n\t\t\tservices,\n\t\t\tutils\n\t\t};\n\n\t\tconst { initializeDOMStore } = await import('./init.js');\n\t\tconst domStore = await initializeDOMStore(helpers, services);\n\n\t\tconst { initializeStateManager } = await import('./init.js');\n\t\tconst stateManager = await initializeStateManager(helpers, services, utils);\n\n\t\tconst { generateHuesFnGroup } = await import('../palette/partials/hues.js');\n\t\tconst { generatePaletteFnGroup } = await import(\n\t\t\t'../palette/partials/types.js'\n\t\t);\n\t\tconst { generatePalette } = await import('../palette/generate.js');\n\n\t\tconst paletteRenderer = PaletteRendererService.getInstance(\n\t\t\tcommon,\n\t\t\tdomStore,\n\t\t\tgenerateHuesFnGroup,\n\t\t\tgeneratePaletteFnGroup,\n\t\t\tgeneratePalette,\n\t\t\tstateManager\n\t\t);\n\n\t\tconst { initializeEventManager } = await import('./init.js');\n\t\tconst eventManager = await initializeEventManager(services);\n\n\t\tconst { initializePaletteStateService } = await import('./init.js');\n\t\tconst paletteState = await initializePaletteStateService(\n\t\t\thelpers,\n\t\t\tservices,\n\t\t\tstateManager,\n\t\t\tutils\n\t\t);\n\n\t\tconst { initializePaletteEventsService } = await import('./init.js');\n\t\tconst paletteEvents = await initializePaletteEventsService(\n\t\t\tdomStore,\n\t\t\thelpers,\n\t\t\tpaletteRenderer,\n\t\t\tpaletteState,\n\t\t\tservices,\n\t\t\tstateManager,\n\t\t\tutils\n\t\t);\n\n\t\tconst { initializeUIEventsService } = await import('./init.js');\n\t\tconst uiEvents = await initializeUIEventsService(\n\t\t\tdomStore,\n\t\t\thelpers,\n\t\t\tpaletteRenderer,\n\t\t\tservices,\n\t\t\tutils\n\t\t);\n\n\t\tawait stateManager.ensureStateReady();\n\n\t\treturn {\n\t\t\tcommon,\n\t\t\tdomStore,\n\t\t\teventManager,\n\t\t\tpaletteEvents,\n\t\t\tpaletteState,\n\t\t\tstateManager,\n\t\t\tuiEvents\n\t\t} as AppDependencies;\n\t}, 'Error registering dependencies');\n}\n"],"names":[],"mappings":";;AAAA;AAWO,eAAe,oBAAoB,CACzC,OAAgB,EAChB,QAAkB,EAAA;AAElB,IAAA,MAAM,EAAE,MAAM,EAAE,GAAG,EAAE,GAAG,QAAQ;IAChC,MAAM,MAAM,GAAG,yBAAyB;IAExC,GAAG,CAAC,IAAI,CAAC,CAAA,iCAAA,CAAmC,EAAE,CAAG,EAAA,MAAM,CAAE,CAAA,CAAC;AAE1D,IAAA,OAAO,MAAM,MAAM,CAAC,WAAW,CAAC,YAAW;QAC1C,MAAM,KAAK,GAAG,EAAe;QAE7B,MAAM,EAAE,mBAAmB,EAAE,GAAG,MAAM,OAAO,WAAW,CAAC;AACzD,QAAA,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE,MAAM,mBAAmB,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;AAElE,QAAA,MAAM,MAAM,GAA8B;YACzC,OAAO;YACP,QAAQ;YACR;SACA;QAED,MAAM,EAAE,kBAAkB,EAAE,GAAG,MAAM,OAAO,WAAW,CAAC;QACxD,MAAM,QAAQ,GAAG,MAAM,kBAAkB,CAAC,OAAO,EAAE,QAAQ,CAAC;QAE5D,MAAM,EAAE,sBAAsB,EAAE,GAAG,MAAM,OAAO,WAAW,CAAC;QAC5D,MAAM,YAAY,GAAG,MAAM,sBAAsB,CAAC,OAAO,EAAE,QAAQ,EAAE,KAAK,CAAC;QAE3E,MAAM,EAAE,mBAAmB,EAAE,GAAG,MAAM,OAAO,6BAA6B,CAAC;QAC3E,MAAM,EAAE,sBAAsB,EAAE,GAAG,MAAM,OACxC,8BAA8B,CAC9B;QACD,MAAM,EAAE,eAAe,EAAE,GAAG,MAAM,OAAO,wBAAwB,CAAC;AAElE,QAAA,MAAM,eAAe,GAAG,sBAAsB,CAAC,WAAW,CACzD,MAAM,EACN,QAAQ,EACR,mBAAmB,EACnB,sBAAsB,EACtB,eAAe,EACf,YAAY,CACZ;QAED,MAAM,EAAE,sBAAsB,EAAE,GAAG,MAAM,OAAO,WAAW,CAAC;AAC5D,QAAA,MAAM,YAAY,GAAG,MAAM,sBAAsB,CAAC,QAAQ,CAAC;QAE3D,MAAM,EAAE,6BAA6B,EAAE,GAAG,MAAM,OAAO,WAAW,CAAC;AACnE,QAAA,MAAM,YAAY,GAAG,MAAM,6BAA6B,CACvD,OAAO,EACP,QAAQ,EACR,YAAY,EACZ,KAAK,CACL;QAED,MAAM,EAAE,8BAA8B,EAAE,GAAG,MAAM,OAAO,WAAW,CAAC;AACpE,QAAA,MAAM,aAAa,GAAG,MAAM,8BAA8B,CACzD,QAAQ,EACR,OAAO,EACP,eAAe,EACf,YAAY,EACZ,QAAQ,EACR,YAAY,EACZ,KAAK,CACL;QAED,MAAM,EAAE,yBAAyB,EAAE,GAAG,MAAM,OAAO,WAAW,CAAC;AAC/D,QAAA,MAAM,QAAQ,GAAG,MAAM,yBAAyB,CAC/C,QAAQ,EACR,OAAO,EACP,eAAe,EACf,QAAQ,EACR,KAAK,CACL;AAED,QAAA,MAAM,YAAY,CAAC,gBAAgB,EAAE;QAErC,OAAO;YACN,MAAM;YACN,QAAQ;YACR,YAAY;YACZ,aAAa;YACb,YAAY;YACZ,YAAY;YACZ;SACmB;KACpB,EAAE,gCAAgC,CAAC;AACrC;;;;"}