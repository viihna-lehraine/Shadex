{"version":3,"file":"main.js","sources":["../../../../src/app/main.ts"],"sourcesContent":["// File: app/main.ts\n\nimport { Helpers, Services } from '../types/index.js';\nimport { EventManager } from '../events/EventManager.js';\nimport { initializeApp, initializeServices } from './init.js';\nimport { config } from '../config/index.js';\n\nconst mode = config.mode;\n\nexport async function startApp(helpers: Helpers): Promise<void> {\n\tconsole.log('[MAIN-1] Loading main.js...');\n\n\tconsole.log('[MAIN-2] Calling initializeServices');\n\tconst services = initializeServices(helpers);\n\n\tconst { log } = services;\n\n\tlog(`[MAIN-3] Calling initialize`, 'info');\n\tconst init = (await initializeApp(helpers, services))!;\n\tconst {\n\t\tcommon: {\n\t\t\tservices: { errors }\n\t\t}\n\t} = init;\n\n\tlog('[MAIN-4] Initialization complete.');\n\tlog(`[MAIN-5] Executing main loop...`);\n\n\terrors.handleSync(() => {\n\t\tif (log) {\n\t\t\tlog('[MAIN-6] Executing main application script', 'debug');\n\n\t\t\tif (document.readyState === 'loading') {\n\t\t\t\tlog(\n\t\t\t\t\t'[MAIN-7A] DOM content not yet loaded. Adding DOMContentLoaded event listener and awaiting...'\n\t\t\t\t);\n\n\t\t\t\tdocument.addEventListener('DOMContentLoaded', () =>\n\t\t\t\t\tmain(errors, log)\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tlog(\n\t\t\t\t\t'[MAIN-7B] DOM content already loaded. Initializing application immediately.'\n\t\t\t\t);\n\n\t\t\t\tmain(errors, log);\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.error('[main-5E] > log function is undefined.');\n\t\t}\n\t}, 'Application initialization failed');\n}\n\nasync function main(\n\terrors: Services['errors'],\n\tlog: Services['log']\n): Promise<void> {\n\tawait errors.handleAsync(async () => {\n\t\tlog('[1] DOM content loaded - Application initialized.');\n\n\t\tif (mode.debugLevel >= 3) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tEventManager.listAll();\n\t\t\t}, 100);\n\t\t}\n\t}, 'Application initialization failed');\n}\n"],"names":[],"mappings":";;;;AAAA;AASO,eAAe,QAAQ,CAAC,OAAgB,EAAA;AAC9C,IAAA,OAAO,CAAC,GAAG,CAAC,6BAA6B,CAAC;AAE1C,IAAA,OAAO,CAAC,GAAG,CAAC,qCAAqC,CAAC;AAClD,IAAA,MAAM,QAAQ,GAAG,kBAAkB,CAAC,OAAO,CAAC;AAE5C,IAAA,MAAM,EAAE,GAAG,EAAE,GAAG,QAAQ;AAExB,IAAA,GAAG,CAAC,CAAA,2BAAA,CAA6B,EAAE,MAAM,CAAC;IAC1C,MAAM,IAAI,IAAI,MAAM,aAAa,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAE;AACtD,IAAA,MAAM,EACL,MAAM,EAAE,EACP,QAAQ,EAAE,EAAE,MAAM,EAAE,EACpB,EACD,GAAG,IAAI;IAER,GAAG,CAAC,mCAAmC,CAAC;IACxC,GAAG,CAAC,CAAiC,+BAAA,CAAA,CAAC;AAEtC,IAAA,MAAM,CAAC,UAAU,CAAC,MAAK;QACtB,IAAI,GAAG,EAAE;AACR,YAAA,GAAG,CAAC,4CAA4C,EAAE,OAAO,CAAC;AAE1D,YAAA,IAAI,QAAQ,CAAC,UAAU,KAAK,SAAS,EAAE;gBACtC,GAAG,CACF,8FAA8F,CAC9F;AAED,gBAAA,QAAQ,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,MAC7C,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,CACjB;;iBACK;gBACN,GAAG,CACF,6EAA6E,CAC7E;AAED,gBAAA,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC;;;aAEZ;AACN,YAAA,OAAO,CAAC,KAAK,CAAC,wCAAwC,CAAC;;KAExD,EAAE,mCAAmC,CAAC;AACxC;AAEA,eAAe,IAAI,CAClB,MAA0B,EAC1B,GAAoB,EAAA;AAEpB,IAAA,MAAM,MAAM,CAAC,WAAW,CAAC,YAAW;QACnC,GAAG,CAAC,mDAAmD,CAAC;AAExD,QAA0B;YACzB,UAAU,CAAC,MAAK;gBACf,YAAY,CAAC,OAAO,EAAE;aACtB,EAAE,GAAG,CAAC;;KAER,EAAE,mCAAmC,CAAC;AACxC;;;;"}