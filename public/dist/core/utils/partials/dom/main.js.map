{"version":3,"file":"main.js","sources":["../../../../../../../src/core/utils/partials/dom/main.ts"],"sourcesContent":["// File: common/utils/partials/dom/main.ts\n\nimport {\n\tColorInputElement,\n\tColorSpace,\n\tColorUtilities,\n\tDOMUtilitiesPartial,\n\tHelpers,\n\tHSL,\n\tPalette,\n\tServices,\n\tState,\n\tValidationUtilities\n} from '../../../../types/index.js';\nimport { config, domConfig, domIndex, env } from '../../../../config/index.js';\n\nconst classes = domIndex.classes;\nconst ids = domIndex.ids;\nconst maxColumns = env.app.maxColumns;\nconst mode = config.mode;\n\nexport function partialDOMUtilitiesFactory(\n\tcolorUtils: ColorUtilities,\n\thelpers: Helpers,\n\tservices: Services,\n\tvalidate: ValidationUtilities\n): DOMUtilitiesPartial {\n\tconst {\n\t\tdata: { deepClone },\n\t\tdom: { getElement, getAllElements }\n\t} = helpers;\n\tconst { errors, log } = services;\n\n\tfunction createTooltip(\n\t\telement: HTMLElement,\n\t\ttext: string\n\t): HTMLElement | void {\n\t\treturn errors.handleSync(() => {\n\t\t\t// remove existing tooltip if present\n\t\t\tremoveTooltip(element);\n\t\t\tconst tooltip = document.createElement('div');\n\t\t\ttooltip.classList.add('tooltip');\n\t\t\ttooltip.textContent = text;\n\t\t\t// add to body\n\t\t\tdocument.body.appendChild(tooltip);\n\t\t\t// position it\n\t\t\tpositionTooltip(element, tooltip);\n\t\t\t// store reference in dataset for later removal\n\t\t\telement.dataset.tooltipId = tooltip.id;\n\t\t\t// show tooltip with fade-in effect\n\t\t\tsetTimeout(() => {\n\t\t\t\ttooltip.style.opacity = '1';\n\t\t\t}, domConfig.tooltipFadeOut);\n\t\t\treturn tooltip;\n\t\t}, '[utils.dom.createTooltip]: Error occurred while creating tooltip.');\n\t}\n\n\tfunction downloadFile(data: string, filename: string, type: string): void {\n\t\treturn errors.handleSync(() => {\n\t\t\tconst blob = new Blob([data], { type });\n\t\t\tconst url = URL.createObjectURL(blob);\n\t\t\tconst a = document.createElement('a');\n\t\t\ta.href = url;\n\t\t\ta.download = filename;\n\t\t\ta.click();\n\t\t\tURL.revokeObjectURL(url);\n\t\t}, '[utils.dom.downloadFile]: Error occurred while downloading file.');\n\t}\n\n\tfunction enforceSwatchRules(minSwatches: number, maxSwatches: number): void {\n\t\treturn errors.handleSync(() => {\n\t\t\tconst paletteColumnSelector = document.getElementById(\n\t\t\t\tdomIndex.ids.inputs.paletteColumn\n\t\t\t) as HTMLSelectElement;\n\t\t\tif (!paletteColumnSelector) {\n\t\t\t\tlog.error(\n\t\t\t\t\t'paletteColumnSelector not found',\n\t\t\t\t\t`utils.dom.enforceMinimumSwatches`\n\t\t\t\t);\n\t\t\t\tif (mode.stackTrace) {\n\t\t\t\t\tconsole.trace('enforceMinimumSwatches stack trace');\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst currentValue = parseInt(paletteColumnSelector.value, 10);\n\t\t\tlet newValue = currentValue;\n\t\t\t// ensure the value is within the allowed range\n\t\t\tif (currentValue < minSwatches) {\n\t\t\t\tnewValue = minSwatches;\n\t\t\t} else if (maxSwatches !== undefined && currentValue > maxSwatches) {\n\t\t\t\tnewValue = maxSwatches;\n\t\t\t}\n\t\t\tif (newValue !== currentValue) {\n\t\t\t\t// update value in the dropdown menu\n\t\t\t\tpaletteColumnSelector.value = newValue.toString();\n\t\t\t\t// trigger a change event to notify the application\n\t\t\t\tconst event = new Event('change', { bubbles: true });\n\t\t\t\ttry {\n\t\t\t\t\tpaletteColumnSelector.dispatchEvent(event);\n\t\t\t\t} catch (error) {\n\t\t\t\t\tlog.error(\n\t\t\t\t\t\t`Failed to dispatch change event to palette-number-options dropdown menu: ${error}`,\n\t\t\t\t\t\t`utils.dom.enforceMinimumSwatches`\n\t\t\t\t\t);\n\t\t\t\t\tthrow new Error(`Failed to dispatch change event: ${error}`);\n\t\t\t\t}\n\t\t\t}\n\t\t}, 'Error occurred while enforcing swatch rules.');\n\t}\n\n\tfunction getUpdatedColumnSizes(\n\t\tcolumns: State['paletteContainer']['columns'],\n\t\tcolumnID: number,\n\t\tnewSize: number\n\t): State['paletteContainer']['columns'] {\n\t\tconst minSize = domConfig.minColumnSize;\n\t\tconst maxSize = domConfig.maxColumnSize;\n\n\t\tconst adjustedSize = Math.max(minSize, Math.min(newSize, maxSize));\n\t\tconst columnIndex = columns.findIndex(col => col.id === columnID);\n\t\tif (columnIndex === -1) return columns;\n\n\t\tconst sizeDifference = adjustedSize - columns[columnIndex].size;\n\n\t\t// update the target column and adjust others\n\t\tconst fixedColumns = [...columns.slice(0, maxColumns)];\n\n\t\tconst updatedColumns = fixedColumns.map(col => {\n\t\t\tif (col.id === columnID) {\n\t\t\t\treturn { ...col, size: adjustedSize };\n\t\t\t}\n\t\t\tif (!col.isLocked) {\n\t\t\t\treturn {\n\t\t\t\t\t...col,\n\t\t\t\t\tsize: col.size - sizeDifference / (fixedColumns.length - 1)\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn col;\n\t\t});\n\n\t\t// normalize sizes to ensure total is 100%\n\t\tconst totalSize = updatedColumns.reduce((sum, col) => sum + col.size, 0);\n\t\treturn updatedColumns.map(col => ({\n\t\t\t...col,\n\t\t\tsize: col.size * (100 / totalSize)\n\t\t}));\n\t}\n\n\tfunction hideTooltip(): void {\n\t\treturn errors.handleSync(() => {\n\t\t\tconst tooltip = getElement<HTMLDivElement>('.tooltip');\n\n\t\t\tif (!tooltip) return;\n\n\t\t\ttooltip.style.opacity = '0';\n\n\t\t\tsetTimeout(() => {\n\t\t\t\ttooltip.style.visibility = 'hidden';\n\t\t\t\ttooltip.remove();\n\t\t\t}, domConfig.tooltipFadeOut || 500);\n\t\t}, '[utils.dom.hideTooltip]: Error occurred while hiding tooltip.');\n\t}\n\n\tfunction positionTooltip(element: HTMLElement, tooltip: HTMLElement): void {\n\t\treturn errors.handleSync(() => {\n\t\t\tconst rect = element.getBoundingClientRect();\n\t\t\ttooltip.style.position = 'absolute';\n\t\t\ttooltip.style.left = `${rect.left + window.scrollX}px`;\n\t\t\ttooltip.style.top = `${rect.top + window.scrollY - tooltip.offsetHeight - 5}px`;\n\t\t\ttooltip.style.zIndex = '1000';\n\t\t\ttooltip.style.pointerEvents = 'none';\n\t\t\ttooltip.style.opacity = '0';\n\t\t\ttooltip.style.transition = 'opacity 0.2s ease-in-out';\n\t\t}, '[utils.dom.positionTooltip]: Error occurred while positioning tooltip.');\n\t}\n\n\tfunction removeTooltip(element: HTMLElement): void {\n\t\treturn errors.handleSync(() => {\n\t\t\tconst tooltipId = element.dataset.tooltipId;\n\t\t\tif (!tooltipId) return;\n\t\t\tconst tooltip = document.getElementById(tooltipId);\n\t\t\tif (tooltip) {\n\t\t\t\ttooltip.style.opacity = '0';\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\ttooltip?.remove();\n\t\t\t\t}, 300);\n\t\t\t}\n\t\t\tdelete element.dataset.tooltipId;\n\t\t}, '[utils.dom.removeTooltip]: Error occurred while removing tooltip.');\n\t}\n\n\tfunction readFile(file: File): Promise<string> {\n\t\treturn errors.handleAsync(async () => {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tconst reader = new FileReader();\n\t\t\t\treader.onload = () => resolve(reader.result as string);\n\t\t\t\treader.onerror = () => reject(reader.error);\n\t\t\t\treader.readAsText(file);\n\t\t\t});\n\t\t}, 'Error occurred while reading file.');\n\t}\n\n\tfunction scanPaletteColumns(): State['paletteContainer']['columns'] {\n\t\treturn errors.handleSync(() => {\n\t\t\tif (document.readyState === 'loading') {\n\t\t\t\tlog.warn(\n\t\t\t\t\t'Document not ready. Returning empty array.',\n\t\t\t\t\t`utils.dom.scanPaletteColumns`\n\t\t\t\t);\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tconst paletteColumns = getAllElements<HTMLDivElement>(\n\t\t\t\t`.${classes.paletteColumn}`\n\t\t\t);\n\n\t\t\tif (paletteColumns.length !== maxColumns) {\n\t\t\t\tlog.warn(\n\t\t\t\t\t`Expected ${maxColumns} columns, but found ${paletteColumns.length}`,\n\t\t\t\t\t`utils.dom.scanPaletteColumns`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Normalize to exactly 5 columns, padding if necessary\n\t\t\tconst normalizedColumns = Array.from({ length: 5 }).map((_, index) => {\n\t\t\t\tconst column = paletteColumns[index] ?? document.createElement('div'); // fallback if missing\n\t\t\t\tcolumn.id = `palette-column-${index + 1}`;\n\t\t\t\tcolumn.classList.add(classes.paletteColumn);\n\n\t\t\t\tconst id = index + 1;\n\t\t\t\tconst size = column.clientWidth / 5;\n\t\t\t\tconst isLocked = column.classList.contains(classes.locked);\n\n\t\t\t\treturn { id, position: index + 1, size, isLocked };\n\t\t\t});\n\n\t\t\treturn normalizedColumns;\n\t\t}, 'Error occurred while scanning palette columns.');\n\t}\n\n\tfunction switchColorSpaceInDOM(targetFormat: ColorSpace): void {\n\t\treturn errors.handleSync(() => {\n\t\t\tconst colorTextOutputBoxes = document.querySelectorAll<HTMLInputElement>(\n\t\t\t\t'.color-text-output-box'\n\t\t\t);\n\t\t\tfor (const box of colorTextOutputBoxes) {\n\t\t\t\tconst inputBox = box as ColorInputElement;\n\t\t\t\tconst colorValues = inputBox.colorValues;\n\t\t\t\tif (!colorValues || !validate.colorValue(colorValues)) {\n\t\t\t\t\tlog.error(\n\t\t\t\t\t\t'Invalid color values. Cannot display toast.',\n\t\t\t\t\t\t`utils.dom.switchColorSpaceInDOM`\n\t\t\t\t\t);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tconst currentFormat = inputBox.getAttribute(\n\t\t\t\t\t'data-format'\n\t\t\t\t) as ColorSpace;\n\t\t\t\tlog.info(\n\t\t\t\t\t`Converting from ${currentFormat} to ${targetFormat}`,\n\t\t\t\t\t`utils.dom.switchColorSpaceInDOM`\n\t\t\t\t);\n\t\t\t\tconst convertFn = helpers.color.getConversionFn(\n\t\t\t\t\tcurrentFormat,\n\t\t\t\t\ttargetFormat\n\t\t\t\t);\n\t\t\t\tif (!convertFn) {\n\t\t\t\t\tlog.error(\n\t\t\t\t\t\t`Conversion from ${currentFormat} to ${targetFormat} is not supported.`,\n\t\t\t\t\t\t`utils.dom.switchColorSpaceInDOM`\n\t\t\t\t\t);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (colorValues.format === 'xyz') {\n\t\t\t\t\tlog.error(\n\t\t\t\t\t\t'Cannot convert from XYZ to another color space.',\n\t\t\t\t\t\t`utils.dom.switchColorSpaceInDOM`\n\t\t\t\t\t);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst clonedColor = deepClone(colorValues);\n\n\t\t\t\tif (!helpers.typeGuards.isConvertibleColor(clonedColor)) {\n\t\t\t\t\tlog.error(\n\t\t\t\t\t\t'Cannot convert from SL, SV, or XYZ color spaces. Please convert to a supported format first.',\n\t\t\t\t\t\t`utils.dom.switchColorSpaceInDOM`\n\t\t\t\t\t);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tconst newColor = convertFn(clonedColor);\n\t\t\t\tif (!newColor) {\n\t\t\t\t\tlog.error(\n\t\t\t\t\t\t`Conversion to ${targetFormat} failed.`,\n\t\t\t\t\t\t`utils.dom.switchColorSpaceInDOM`\n\t\t\t\t\t);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tinputBox.value = String(newColor);\n\t\t\t\tinputBox.setAttribute('data-format', targetFormat);\n\t\t\t}\n\t\t}, '[utils.dom.switchColorSpaceInDOM]: Error occurred while converting colors.');\n\t}\n\n\tfunction updateColorBox(color: HSL, boxId: string): void {\n\t\treturn errors.handleSync(() => {\n\t\t\tconst colorBox = helpers.dom.getElement(boxId);\n\n\t\t\tif (colorBox) {\n\t\t\t\tcolorBox.style.backgroundColor = colorUtils.formatColorAsCSS(color);\n\t\t\t}\n\t\t}, '[utils.dom.updateColorBox]: Error occurred while updating color box.');\n\t}\n\n\tfunction updateHistory(history: Palette[]): void {\n\t\treturn errors.handleSync(() => {\n\t\t\tconst historyList = getElement<HTMLDivElement>(ids.divs.paletteHistory);\n\t\t\tif (!historyList) return;\n\t\t\thistoryList.innerHTML = '';\n\t\t\thistory.forEach(palette => {\n\t\t\t\tconst entry = document.createElement('div');\n\t\t\t\tentry.classList.add('history-item');\n\t\t\t\tentry.id = `palette_${palette.id}`;\n\t\t\t\tentry.innerHTML = `\n\t\t\t\t<p>Palette #${palette.metadata.name || palette.id}</p>\n\t\t\t\t<div class=\"color-preview\">\n\t\t\t\t\t${palette.items.map(item => `<span class=\"color-box\" style=\"background: ${item.css.hex};\"></span>`).join(' ')}\n\t\t\t\t</div>\n\t\t\t\t<button class=\"remove-history-item\" data-id=\"${palette.id}-history-remove-btn\">Remove</button>\n\t\t\t`;\n\t\t\t\tentry\n\t\t\t\t\t.querySelector('.remove-history-item')\n\t\t\t\t\t?.addEventListener('click', async () => {\n\t\t\t\t\t\t// TODO: save to history somehow\n\t\t\t\t\t});\n\t\t\t\thistoryList.appendChild(entry);\n\t\t\t});\n\t\t}, '[domUtils > updateHistory]: Error occurred while updating history.');\n\t}\n\n\tconst domUtilitiesPartial: DOMUtilitiesPartial = {\n\t\tcreateTooltip,\n\t\tdownloadFile,\n\t\tenforceSwatchRules,\n\t\tgetUpdatedColumnSizes,\n\t\thideTooltip,\n\t\tpositionTooltip,\n\t\tremoveTooltip,\n\t\treadFile,\n\t\tscanPaletteColumns,\n\t\tswitchColorSpaceInDOM,\n\t\tupdateColorBox,\n\t\tupdateHistory\n\t} as const;\n\n\treturn errors.handleSync(\n\t\t() => domUtilitiesPartial,\n\t\t'Error occurred while creating partial DOM utilities group.',\n\t\t{ context: { domUtilitiesPartial } }\n\t);\n}\n"],"names":[],"mappings":"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"}