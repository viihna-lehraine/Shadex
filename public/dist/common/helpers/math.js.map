{"version":3,"file":"math.js","sources":["../../../../../src/common/helpers/math.ts"],"sourcesContent":["// File: File: common/helpers/math.ts\n\nimport { MathHelpers, NumericRangeKey } from '../../types/index.js';\nimport { config } from '../../config/index.js';\n\nconst sets = config.sets;\n\nexport const mathHelpersFactory = (): MathHelpers =>\n\t({\n\t\tclampToRange(value: number, rangeKey: NumericRangeKey): number {\n\t\t\tconst [min, max] = sets[rangeKey];\n\n\t\t\treturn Math.min(Math.max(value, min), max);\n\t\t},\n\t\tgetWeightedRandomValue(\n\t\t\tweights: readonly number[],\n\t\t\tvalues: readonly number[]\n\t\t): number {\n\t\t\ttry {\n\t\t\t\tif (weights.length !== values.length || weights.length === 0) {\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t'Weights and values must have the same non-zero length.'\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tconst cumulativeProbabilities = values.reduce<number[]>(\n\t\t\t\t\t(acc: number[], value, i) => {\n\t\t\t\t\t\tacc[i] = (acc[i - 1] ?? 0) + value;\n\t\t\t\t\t\treturn acc;\n\t\t\t\t\t},\n\t\t\t\t\t[]\n\t\t\t\t);\n\n\t\t\t\tconst random = Math.random();\n\t\t\t\tconst selectedIndex = cumulativeProbabilities.findIndex(\n\t\t\t\t\tprob => random < prob\n\t\t\t\t);\n\n\t\t\t\treturn weights[\n\t\t\t\t\tselectedIndex >= 0 ? selectedIndex : weights.length - 1\n\t\t\t\t];\n\t\t\t} catch (error) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t`[getWeightedRandomValue-ERR]: Error generating weighted random value: ${\n\t\t\t\t\t\terror instanceof Error ? error.message : error\n\t\t\t\t\t}`\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}) as const;\n"],"names":[],"mappings":";;AAAA;AAKA,MAAM,IAAI,GAAG,MAAM,CAAC,IAAI;AAEX,MAAA,kBAAkB,GAAG,OAChC;IACA,YAAY,CAAC,KAAa,EAAE,QAAyB,EAAA;QACpD,MAAM,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC;AAEjC,QAAA,OAAO,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,EAAE,GAAG,CAAC;KAC1C;IACD,sBAAsB,CACrB,OAA0B,EAC1B,MAAyB,EAAA;AAEzB,QAAA,IAAI;AACH,YAAA,IAAI,OAAO,CAAC,MAAM,KAAK,MAAM,CAAC,MAAM,IAAI,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE;AAC7D,gBAAA,MAAM,IAAI,KAAK,CACd,wDAAwD,CACxD;;AAGF,YAAA,MAAM,uBAAuB,GAAG,MAAM,CAAC,MAAM,CAC5C,CAAC,GAAa,EAAE,KAAK,EAAE,CAAC,KAAI;AAC3B,gBAAA,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,IAAI,KAAK;AAClC,gBAAA,OAAO,GAAG;aACV,EACD,EAAE,CACF;AAED,YAAA,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,EAAE;AAC5B,YAAA,MAAM,aAAa,GAAG,uBAAuB,CAAC,SAAS,CACtD,IAAI,IAAI,MAAM,GAAG,IAAI,CACrB;AAED,YAAA,OAAO,OAAO,CACb,aAAa,IAAI,CAAC,GAAG,aAAa,GAAG,OAAO,CAAC,MAAM,GAAG,CAAC,CACvD;;QACA,OAAO,KAAK,EAAE;AACf,YAAA,MAAM,IAAI,KAAK,CACd,yEACC,KAAK,YAAY,KAAK,GAAG,KAAK,CAAC,OAAO,GAAG,KAC1C,CAAA,CAAE,CACF;;;AAGH,CAAA;;;;"}