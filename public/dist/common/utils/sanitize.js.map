{"version":3,"file":"sanitize.js","sources":["../../../../../src/common/utils/sanitize.ts"],"sourcesContent":["// File: common/utils/sanitize.js\n\nimport {\n\tByteRange,\n\tLAB_A,\n\tLAB_B,\n\tLAB_L,\n\tPercentile,\n\tRadial,\n\tSanitationUtilsInterface,\n\tUtilitiesInterface\n} from '../../types/index.js';\n\nexport function createSanitationUtils(\n\tutils: UtilitiesInterface\n): SanitationUtilsInterface {\n\tfunction sanitizeInput(str: string): string {\n\t\treturn str.replace(\n\t\t\t/[&<>\"'`/=():]/g,\n\t\t\tchar =>\n\t\t\t\t({\n\t\t\t\t\t'&': '&amp;',\n\t\t\t\t\t'<': '&lt;',\n\t\t\t\t\t'>': '&gt;',\n\t\t\t\t\t'\"': '&quot;',\n\t\t\t\t\t\"'\": '&#039;',\n\t\t\t\t\t'`': '&#x60;',\n\t\t\t\t\t'/': '&#x2F;',\n\t\t\t\t\t'=': '&#x3D;',\n\t\t\t\t\t'(': '&#40;',\n\t\t\t\t\t')': '&#41;',\n\t\t\t\t\t':': '&#58;'\n\t\t\t\t})[char] || char\n\t\t);\n\t}\n\n\treturn {\n\t\tsanitizeInput,\n\t\tgetSafeQueryParam(param: string): string | null {\n\t\t\tconst urlParams = new URLSearchParams(window.location.search);\n\t\t\tconst rawValue = urlParams.get(param);\n\n\t\t\treturn rawValue ? sanitizeInput(rawValue) : null;\n\t\t},\n\t\tlab(value: number, output: 'l' | 'a' | 'b'): LAB_L | LAB_A | LAB_B {\n\t\t\tif (output === 'l') {\n\t\t\t\treturn utils.brand.asLAB_L(\n\t\t\t\t\tMath.round(Math.min(Math.max(value, 0), 100))\n\t\t\t\t);\n\t\t\t} else if (output === 'a') {\n\t\t\t\treturn utils.brand.asLAB_A(\n\t\t\t\t\tMath.round(Math.min(Math.max(value, -125), 125))\n\t\t\t\t);\n\t\t\t} else if (output === 'b') {\n\t\t\t\treturn utils.brand.asLAB_B(\n\t\t\t\t\tMath.round(Math.min(Math.max(value, -125), 125))\n\t\t\t\t);\n\t\t\t} else throw new Error('Unable to return LAB value');\n\t\t},\n\t\tpercentile(value: number): Percentile {\n\t\t\tconst rawPercentile = Math.round(Math.min(Math.max(value, 0), 100));\n\n\t\t\treturn utils.brand.asPercentile(rawPercentile);\n\t\t},\n\t\tradial(value: number): Radial {\n\t\t\tconst rawRadial =\n\t\t\t\tMath.round(Math.min(Math.max(value, 0), 360)) & 360;\n\n\t\t\treturn utils.brand.asRadial(rawRadial);\n\t\t},\n\t\trgb(value: number): ByteRange {\n\t\t\tconst rawByteRange = Math.round(Math.min(Math.max(value, 0), 255));\n\n\t\t\treturn utils.color.toColorValueRange(rawByteRange, 'ByteRange');\n\t\t}\n\t};\n}\n"],"names":[],"mappings":"AAAA;AAaM,SAAU,qBAAqB,CACpC,KAAyB,EAAA;IAEzB,SAAS,aAAa,CAAC,GAAW,EAAA;QACjC,OAAO,GAAG,CAAC,OAAO,CACjB,gBAAgB,EAChB,IAAI,IACH,CAAC;AACA,YAAA,GAAG,EAAE,OAAO;AACZ,YAAA,GAAG,EAAE,MAAM;AACX,YAAA,GAAG,EAAE,MAAM;AACX,YAAA,GAAG,EAAE,QAAQ;AACb,YAAA,GAAG,EAAE,QAAQ;AACb,YAAA,GAAG,EAAE,QAAQ;AACb,YAAA,GAAG,EAAE,QAAQ;AACb,YAAA,GAAG,EAAE,QAAQ;AACb,YAAA,GAAG,EAAE,OAAO;AACZ,YAAA,GAAG,EAAE,OAAO;AACZ,YAAA,GAAG,EAAE;AACL,SAAA,EAAE,IAAI,CAAC,IAAI,IAAI,CACjB;;IAGF,OAAO;QACN,aAAa;AACb,QAAA,iBAAiB,CAAC,KAAa,EAAA;YAC9B,MAAM,SAAS,GAAG,IAAI,eAAe,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC;YAC7D,MAAM,QAAQ,GAAG,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC;AAErC,YAAA,OAAO,QAAQ,GAAG,aAAa,CAAC,QAAQ,CAAC,GAAG,IAAI;SAChD;QACD,GAAG,CAAC,KAAa,EAAE,MAAuB,EAAA;AACzC,YAAA,IAAI,MAAM,KAAK,GAAG,EAAE;gBACnB,OAAO,KAAK,CAAC,KAAK,CAAC,OAAO,CACzB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAC7C;;AACK,iBAAA,IAAI,MAAM,KAAK,GAAG,EAAE;AAC1B,gBAAA,OAAO,KAAK,CAAC,KAAK,CAAC,OAAO,CACzB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,CAChD;;AACK,iBAAA,IAAI,MAAM,KAAK,GAAG,EAAE;AAC1B,gBAAA,OAAO,KAAK,CAAC,KAAK,CAAC,OAAO,CACzB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,CAChD;;;AACK,gBAAA,MAAM,IAAI,KAAK,CAAC,4BAA4B,CAAC;SACpD;AACD,QAAA,UAAU,CAAC,KAAa,EAAA;YACvB,MAAM,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;YAEnE,OAAO,KAAK,CAAC,KAAK,CAAC,YAAY,CAAC,aAAa,CAAC;SAC9C;AACD,QAAA,MAAM,CAAC,KAAa,EAAA;YACnB,MAAM,SAAS,GACd,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,GAAG;YAEpD,OAAO,KAAK,CAAC,KAAK,CAAC,QAAQ,CAAC,SAAS,CAAC;SACtC;AACD,QAAA,GAAG,CAAC,KAAa,EAAA;YAChB,MAAM,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;YAElE,OAAO,KAAK,CAAC,KAAK,CAAC,iBAAiB,CAAC,YAAY,EAAE,WAAW,CAAC;;KAEhE;AACF;;;;"}