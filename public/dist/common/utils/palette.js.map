{"version":3,"file":"palette.js","sources":["../../../../../src/common/utils/palette.ts"],"sourcesContent":["// File: common/utils/palette.js\n\nimport {\n\tAllColors,\n\tCMYK,\n\tHelpers,\n\tHex,\n\tHSL,\n\tHSV,\n\tLAB,\n\tPalette,\n\tPaletteConfig,\n\tPaletteItem,\n\tPaletteType,\n\tPaletteUtils,\n\tRGB,\n\tSelectedPaletteOptions,\n\tServices,\n\tUtilities,\n\tXYZ\n} from '../../types/index.js';\nimport { domIndex, paletteConfig } from '../../config/index.js';\n\nconst ids = domIndex.ids;\n\nexport function paletteUtilsFactory(\n\thelpers: Helpers,\n\tservices: Services,\n\tutils: Utilities\n): PaletteUtils {\n\tconst { clone } = helpers.data;\n\tconst { getElement } = helpers.dom;\n\tconst { log } = services;\n\n\tfunction createPaletteItem(color: HSL, itemID: number): PaletteItem {\n\t\tconst clonedColor = clone(color) as HSL;\n\n\t\treturn {\n\t\t\titemID,\n\t\t\tcolors: {\n\t\t\t\tcmyk: (utils.color.convertHSL(clonedColor, 'cmyk') as CMYK)\n\t\t\t\t\t.value,\n\t\t\t\thex: (utils.color.convertHSL(clonedColor, 'hex') as Hex).value,\n\t\t\t\thsl: clonedColor.value,\n\t\t\t\thsv: (utils.color.convertHSL(clonedColor, 'hsv') as HSV).value,\n\t\t\t\tlab: (utils.color.convertHSL(clonedColor, 'lab') as LAB).value,\n\t\t\t\trgb: (utils.color.convertHSL(clonedColor, 'rgb') as RGB).value,\n\t\t\t\txyz: (utils.color.convertHSL(clonedColor, 'xyz') as XYZ).value\n\t\t\t},\n\t\t\tcss: {\n\t\t\t\tcmyk: utils.color.formatColorAsCSS(\n\t\t\t\t\tutils.color.convertHSL(clonedColor, 'cmyk')\n\t\t\t\t),\n\t\t\t\thex: utils.color.formatColorAsCSS(\n\t\t\t\t\tutils.color.convertHSL(clonedColor, 'hex')\n\t\t\t\t),\n\t\t\t\thsl: utils.color.formatColorAsCSS(clonedColor),\n\t\t\t\thsv: utils.color.formatColorAsCSS(\n\t\t\t\t\tutils.color.convertHSL(clonedColor, 'hsv')\n\t\t\t\t),\n\t\t\t\tlab: utils.color.formatColorAsCSS(\n\t\t\t\t\tutils.color.convertHSL(clonedColor, 'lab')\n\t\t\t\t),\n\t\t\t\trgb: utils.color.formatColorAsCSS(\n\t\t\t\t\tutils.color.convertHSL(clonedColor, 'rgb')\n\t\t\t\t),\n\t\t\t\txyz: utils.color.formatColorAsCSS(\n\t\t\t\t\tutils.color.convertHSL(clonedColor, 'xyz')\n\t\t\t\t)\n\t\t\t}\n\t\t};\n\t}\n\n\tfunction isHSLTooDark(hsl: HSL): boolean {\n\t\tif (!utils.validate.colorValue(hsl)) {\n\t\t\tlog(`Invalid HSL value ${JSON.stringify(hsl)}`, 'error');\n\n\t\t\treturn false;\n\t\t}\n\n\t\treturn clone(hsl).value.lightness < paletteConfig.thresholds.dark;\n\t}\n\n\tfunction isHSLTooGray(hsl: HSL): boolean {\n\t\tif (!utils.validate.colorValue(hsl)) {\n\t\t\tlog(`Invalid HSL value ${JSON.stringify(hsl)}`, 'error');\n\n\t\t\treturn false;\n\t\t}\n\n\t\treturn clone(hsl).value.saturation < paletteConfig.thresholds.gray;\n\t}\n\n\tfunction isHSLTooLight(hsl: HSL): boolean {\n\t\tif (!utils.validate.colorValue(hsl)) {\n\t\t\tlog('Invalid HSL value ${JSON.stringify(hsl)}', 'error');\n\n\t\t\treturn false;\n\t\t}\n\n\t\treturn clone(hsl).value.lightness > paletteConfig.thresholds.light;\n\t}\n\n\treturn {\n\t\tcreatePaletteItem,\n\t\tisHSLTooDark,\n\t\tisHSLTooGray,\n\t\tisHSLTooLight,\n\t\tcreatePaletteItemArray(baseColor: HSL, hues: number[]): PaletteItem[] {\n\t\t\tconst paletteItems: PaletteItem[] = [];\n\n\t\t\t// base color always gets itemID = 1\n\t\t\tpaletteItems.push(\n\t\t\t\tcreatePaletteItem(\n\t\t\t\t\tbaseColor,\n\t\t\t\t\t1 // ID 1 for base color\n\t\t\t\t)\n\t\t\t);\n\n\t\t\t// iterate over hues and generate PaletteItems\n\t\t\tfor (const [i, hue] of hues.entries()) {\n\t\t\t\tconst newColor: HSL = {\n\t\t\t\t\tvalue: {\n\t\t\t\t\t\thue: utils.brand.asRadial(hue),\n\t\t\t\t\t\tsaturation: utils.brand.asPercentile(\n\t\t\t\t\t\t\tMath.random() * 100\n\t\t\t\t\t\t),\n\t\t\t\t\t\tlightness: utils.brand.asPercentile(Math.random() * 100)\n\t\t\t\t\t},\n\t\t\t\t\tformat: 'hsl'\n\t\t\t\t};\n\n\t\t\t\tconst newPaletteItem = createPaletteItem(\n\t\t\t\t\tnewColor,\n\t\t\t\t\ti + 2 // IDs start at 2 for generated colors\n\t\t\t\t);\n\n\t\t\t\tpaletteItems.push(newPaletteItem);\n\t\t\t\tutils.dom.updateColorBox(newColor, String(i + 2));\n\t\t\t}\n\n\t\t\treturn paletteItems;\n\t\t},\n\t\tcreatePaletteObject(\n\t\t\toptions: SelectedPaletteOptions,\n\t\t\tpaletteItems: PaletteItem[]\n\t\t): Palette {\n\t\t\treturn {\n\t\t\t\tid: `${options.paletteType}_${crypto.randomUUID()}`,\n\t\t\t\titems: paletteItems,\n\t\t\t\tmetadata: {\n\t\t\t\t\tcolumnCount: options.columnCount,\n\t\t\t\t\tlimitDark: options.limitDark,\n\t\t\t\t\tlimitGray: options.limitGray,\n\t\t\t\t\tlimitLight: options.limitLight,\n\t\t\t\t\ttimestamp: helpers.data.getFormattedTimestamp(),\n\t\t\t\t\ttype: options.paletteType\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\tgenerateAllColorValues(color: HSL): AllColors {\n\t\t\tconst clonedColor = clone(color);\n\n\t\t\tif (!utils.validate.colorValue(clonedColor)) {\n\t\t\t\tlog(`Invalid color: ${JSON.stringify(clonedColor)}`, 'error');\n\t\t\t\tthrow new Error('Invalid HSL color provided');\n\t\t\t}\n\n\t\t\tconst convert = <T extends keyof AllColors>(\n\t\t\t\ttarget: T\n\t\t\t): AllColors[T] =>\n\t\t\t\tutils.color.convertHSL(clonedColor, target) as AllColors[T];\n\n\t\t\treturn {\n\t\t\t\tcmyk: convert('cmyk'),\n\t\t\t\thex: convert('hex'),\n\t\t\t\thsl: clonedColor,\n\t\t\t\thsv: convert('hsv'),\n\t\t\t\tlab: convert('lab'),\n\t\t\t\trgb: convert('rgb'),\n\t\t\t\tsl: convert('sl'),\n\t\t\t\tsv: convert('sv'),\n\t\t\t\txyz: convert('xyz')\n\t\t\t};\n\t\t},\n\t\tgetPaletteOptionsFromUI(): SelectedPaletteOptions {\n\t\t\ttry {\n\t\t\t\tconst columnCountElement = getElement<HTMLInputElement>(\n\t\t\t\t\tids.inputs.columnCount\n\t\t\t\t);\n\t\t\t\tconst paletteTypeElement = getElement<HTMLInputElement>(\n\t\t\t\t\tids.inputs.paletteType\n\t\t\t\t);\n\t\t\t\tconst limitDarkChkbx = getElement<HTMLInputElement>(\n\t\t\t\t\tids.inputs.limitDarkChkbx\n\t\t\t\t);\n\t\t\t\tconst limitGrayChkbx = getElement<HTMLInputElement>(\n\t\t\t\t\tids.inputs.limitGrayChkbx\n\t\t\t\t);\n\t\t\t\tconst limitLightChkbx = getElement<HTMLInputElement>(\n\t\t\t\t\tids.inputs.limitLightChkbx\n\t\t\t\t);\n\n\t\t\t\tif (!paletteTypeElement) {\n\t\t\t\t\tlog('paletteTypeOptions DOM element not found', 'warn');\n\t\t\t\t}\n\t\t\t\tif (!columnCountElement) {\n\t\t\t\t\tlog(`columnCount DOM element not found`, 'warn');\n\t\t\t\t}\n\t\t\t\tif (!limitDarkChkbx || !limitGrayChkbx || !limitLightChkbx) {\n\t\t\t\t\tlog(`One or more checkboxes not found`, 'warn');\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t!helpers.typeguards.isPaletteType(paletteTypeElement!.value)\n\t\t\t\t) {\n\t\t\t\t\tlog(\n\t\t\t\t\t\t`Invalid palette type: ${paletteTypeElement!.value}`,\n\t\t\t\t\t\t'warn'\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tcolumnCount: columnCountElement\n\t\t\t\t\t\t? parseInt(columnCountElement.value, 10)\n\t\t\t\t\t\t: 0,\n\t\t\t\t\tdistributionType: 'soft',\n\t\t\t\t\tlimitDark: limitDarkChkbx?.checked || false,\n\t\t\t\t\tlimitGray: limitGrayChkbx?.checked || false,\n\t\t\t\t\tlimitLight: limitLightChkbx?.checked || false,\n\t\t\t\t\tpaletteType: paletteTypeElement!.value as PaletteType\n\t\t\t\t};\n\t\t\t} catch (error) {\n\t\t\t\tlog(`Failed to retrieve parameters from UI: ${error}`, 'error');\n\n\t\t\t\treturn {\n\t\t\t\t\tcolumnCount: 0,\n\t\t\t\t\tdistributionType: 'soft',\n\t\t\t\t\tlimitDark: false,\n\t\t\t\t\tlimitGray: false,\n\t\t\t\t\tlimitLight: false,\n\t\t\t\t\tpaletteType: 'random'\n\t\t\t\t};\n\t\t\t}\n\t\t},\n\t\tgetRandomizedPaleteOptions(): SelectedPaletteOptions {\n\t\t\tconst paletteTypeMap: Record<number, PaletteType> = {\n\t\t\t\t0: 'analogous',\n\t\t\t\t1: 'complementary',\n\t\t\t\t2: 'diadic',\n\t\t\t\t3: 'hexadic',\n\t\t\t\t4: 'monochromatic',\n\t\t\t\t5: 'random',\n\t\t\t\t6: 'splitComplementary',\n\t\t\t\t7: 'tetradic',\n\t\t\t\t8: 'triadic'\n\t\t\t};\n\t\t\tconst distributionTypeMap: Record<\n\t\t\t\tnumber,\n\t\t\t\tkeyof PaletteConfig['probabilities']\n\t\t\t> = {\n\t\t\t\t0: 'base',\n\t\t\t\t1: 'chaotic',\n\t\t\t\t2: 'soft',\n\t\t\t\t3: 'strong'\n\t\t\t};\n\t\t\tconst randomPaletteTypeIndex = Math.floor(\n\t\t\t\tMath.random() * Object.values(paletteTypeMap).length\n\t\t\t);\n\t\t\tconst randomDistributionTypeIndex = Math.floor(\n\t\t\t\tMath.random() * Object.values(distributionTypeMap).length\n\t\t\t);\n\t\t\tconst paletteType =\n\t\t\t\tpaletteTypeMap[\n\t\t\t\t\trandomPaletteTypeIndex as keyof typeof paletteTypeMap\n\t\t\t\t];\n\t\t\tconst distributionType =\n\t\t\t\tdistributionTypeMap[\n\t\t\t\t\trandomDistributionTypeIndex as keyof typeof distributionTypeMap\n\t\t\t\t];\n\t\t\tconst columnCount = Math.floor(Math.random() * 6) + 1;\n\t\t\tconst limitDark = Math.random() < 0.5;\n\t\t\tconst limitGray = Math.random() < 0.5;\n\t\t\tconst limitLight = Math.random() < 0.5;\n\t\t\treturn {\n\t\t\t\tcolumnCount,\n\t\t\t\tdistributionType,\n\t\t\t\tlimitDark,\n\t\t\t\tlimitGray,\n\t\t\t\tlimitLight,\n\t\t\t\tpaletteType\n\t\t\t};\n\t\t},\n\t\tisHSLInBounds(hsl: HSL): boolean {\n\t\t\tif (!utils.validate.colorValue(hsl)) {\n\t\t\t\tlog(`Invalid HSL value ${JSON.stringify(hsl)}`, 'error');\n\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn isHSLTooDark(hsl) || isHSLTooGray(hsl) || isHSLTooLight(hsl);\n\t\t}\n\t};\n}\n"],"names":[],"mappings":"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"}