{"version":3,"file":"app.js","sources":["../../../../../src/common/utils/app.ts"],"sourcesContent":["// File: common/utils/app.js\n\nimport {\n\tAppUtilsInterface,\n\tHSL,\n\tSL,\n\tServicesInterface,\n\tUtilitiesInterface\n} from '../../types/index.js';\nimport { data } from '../../data/index.js';\n\nconst defaultColors = data.defaults.colors;\n\nexport function createAppUtils(\n\tservices: ServicesInterface,\n\tutils: UtilitiesInterface\n): AppUtilsInterface {\n\treturn {\n\t\tgenerateRandomHSL(): HSL {\n\t\t\tconst log = services.log;\n\n\t\t\ttry {\n\t\t\t\tconst hsl: HSL = {\n\t\t\t\t\tvalue: {\n\t\t\t\t\t\thue: utils.sanitize.radial(\n\t\t\t\t\t\t\tMath.floor(Math.random() * 360)\n\t\t\t\t\t\t),\n\t\t\t\t\t\tsaturation: utils.sanitize.percentile(\n\t\t\t\t\t\t\tMath.floor(Math.random() * 101)\n\t\t\t\t\t\t),\n\t\t\t\t\t\tlightness: utils.sanitize.percentile(\n\t\t\t\t\t\t\tMath.floor(Math.random() * 101)\n\t\t\t\t\t\t)\n\t\t\t\t\t},\n\t\t\t\t\tformat: 'hsl'\n\t\t\t\t};\n\n\t\t\t\tif (!utils.validate.colorValue(hsl)) {\n\t\t\t\t\tlog(\n\t\t\t\t\t\t'error',\n\t\t\t\t\t\t`Invalid random HSL color value ${JSON.stringify(hsl)}`,\n\t\t\t\t\t\t'colorUtils.generateRandomHSL()'\n\t\t\t\t\t);\n\n\t\t\t\t\treturn defaultColors.hsl;\n\t\t\t\t}\n\n\t\t\t\tlog(\n\t\t\t\t\t'debug',\n\t\t\t\t\t`Generated randomHSL: ${JSON.stringify(hsl)}`,\n\t\t\t\t\t'colorUtils.generateRandomHSL()',\n\t\t\t\t\t5\n\t\t\t\t);\n\n\t\t\t\treturn hsl;\n\t\t\t} catch (error) {\n\t\t\t\tlog(\n\t\t\t\t\t'warn',\n\t\t\t\t\t`Error generating random HSL color: ${error}`,\n\t\t\t\t\t'colorUtils.generateRandomHSL()'\n\t\t\t\t);\n\n\t\t\t\treturn defaultColors.hsl;\n\t\t\t}\n\t\t},\n\t\tgenerateRandomSL(): SL {\n\t\t\tconst log = services.log;\n\n\t\t\ttry {\n\t\t\t\tconst sl: SL = {\n\t\t\t\t\tvalue: {\n\t\t\t\t\t\tsaturation: utils.sanitize.percentile(\n\t\t\t\t\t\t\tMath.max(0, Math.min(100, Math.random() * 100))\n\t\t\t\t\t\t),\n\t\t\t\t\t\tlightness: utils.sanitize.percentile(\n\t\t\t\t\t\t\tMath.max(0, Math.min(100, Math.random() * 100))\n\t\t\t\t\t\t)\n\t\t\t\t\t},\n\t\t\t\t\tformat: 'sl'\n\t\t\t\t};\n\n\t\t\t\tif (!utils.validate.colorValue(sl as SL)) {\n\t\t\t\t\tlog(\n\t\t\t\t\t\t'error',\n\t\t\t\t\t\t`Invalid random SV color value ${JSON.stringify(sl)}`,\n\t\t\t\t\t\t'colorUtils.generateRandomSL()'\n\t\t\t\t\t);\n\n\t\t\t\t\treturn defaultColors.sl;\n\t\t\t\t}\n\n\t\t\t\tlog(\n\t\t\t\t\t'debug',\n\t\t\t\t\t`Generated randomSL: ${JSON.stringify(sl)}`,\n\t\t\t\t\t'colorUtils.generateRandomSL()',\n\t\t\t\t\t5\n\t\t\t\t);\n\n\t\t\t\treturn sl;\n\t\t\t} catch (error) {\n\t\t\t\tlog(\n\t\t\t\t\t'error',\n\t\t\t\t\t`Error generating random SL color: ${error}`,\n\t\t\t\t\t'colorUtils.generateRandomSL()'\n\t\t\t\t);\n\n\t\t\t\treturn defaultColors.sl;\n\t\t\t}\n\t\t},\n\t\tgetFormattedTimestamp(): string {\n\t\t\tconst now = new Date();\n\t\t\tconst year = now.getFullYear();\n\t\t\tconst month = String(now.getMonth() + 1).padStart(2, '0');\n\t\t\tconst day = String(now.getDate()).padStart(2, '0');\n\t\t\tconst hours = String(now.getHours()).padStart(2, '0');\n\t\t\tconst minutes = String(now.getMinutes()).padStart(2, '0');\n\t\t\tconst seconds = String(now.getSeconds()).padStart(2, '0');\n\n\t\t\treturn `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;\n\t\t},\n\t\tasync tracePromise(\n\t\t\tpromise: Promise<unknown>,\n\t\t\tlabel: string\n\t\t): Promise<unknown> {\n\t\t\treturn promise\n\t\t\t\t.then(result => {\n\t\t\t\t\tconsole.log(`[TRACE SUCCESS] ${label}:`, result);\n\t\t\t\t\treturn result;\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tconsole.error(`[TRACE ERROR] ${label}:`, error);\n\t\t\t\t\tthrow error;\n\t\t\t\t});\n\t\t}\n\t};\n}\n"],"names":[],"mappings":"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"}