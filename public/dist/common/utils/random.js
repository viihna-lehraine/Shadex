// File: src/common/utils/random.js
import { core } from '../core/index.js';
import { createLogger } from '../../logger/index.js';
import { defaults, mode } from '../data/base.js';
const logger = await createLogger();
const logMode = mode.logging;
function hsl(enableAlpha) {
    try {
        const alpha = enableAlpha ? Math.round(Math.random() * 100) / 100 : 1;
        const hsl = {
            value: {
                hue: core.sanitize.radial(Math.floor(Math.random() * 360)),
                saturation: core.sanitize.percentile(Math.floor(Math.random() * 101)),
                lightness: core.sanitize.percentile(Math.floor(Math.random() * 101)),
                alpha: core.brand.asAlphaRange(alpha)
            },
            format: 'hsl'
        };
        if (!core.validate.colorValues(hsl)) {
            if (logMode.error)
                logger.error(`Invalid random HSL color value ${JSON.stringify(hsl)}`, 'common > utils > random > hsl()');
            const unbrandedHSL = core.base.clone(defaults.colors.base.unbranded.hsl);
            return core.brandColor.asHSL(unbrandedHSL);
        }
        if (!mode.quiet && !logMode.info)
            logger.info(`Generated randomHSL: ${JSON.stringify(hsl)}`, 'common > utils > random > hsl()');
        return hsl;
    }
    catch (error) {
        if (logMode.error)
            logger.error(`Error generating random HSL color: ${error}`, 'common > utils > random > hsl()');
        const unbrandedHSL = core.base.clone(defaults.colors.base.unbranded.hsl);
        return core.brandColor.asHSL(unbrandedHSL);
    }
}
function sl(enableAlpha) {
    try {
        const alpha = enableAlpha ? Math.round(Math.random() * 100) / 100 : 1;
        const sl = {
            value: {
                saturation: core.sanitize.percentile(Math.max(0, Math.min(100, Math.random() * 100))),
                lightness: core.sanitize.percentile(Math.max(0, Math.min(100, Math.random() * 100))),
                alpha: core.brand.asAlphaRange(alpha)
            },
            format: 'sl'
        };
        if (!core.validate.colorValues(sl)) {
            if (logMode.error)
                logger.error(`Invalid random SV color value ${JSON.stringify(sl)}`, 'common > utils > random > sl()');
            const unbrandedSL = core.base.clone(defaults.colors.base.unbranded.sl);
            return core.brandColor.asSL(unbrandedSL);
        }
        if (!mode.quiet && logMode.info)
            logger.info(`Generated randomSL: ${JSON.stringify(sl)}`, 'common > utils > random > sl()');
        return sl;
    }
    catch (error) {
        if (logMode.error)
            logger.error(`Error generating random SL color: ${error}`, 'common > utils > random > sl()');
        const unbrandedSL = core.base.clone(defaults.colors.base.unbranded.sl);
        return core.brandColor.asSL(unbrandedSL);
    }
}
export const random = {
    hsl,
    sl
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmFuZG9tLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2NvbW1vbi91dGlscy9yYW5kb20udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsbUNBQW1DO0FBR25DLE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUN4QyxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDckQsT0FBTyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUVqRCxNQUFNLE1BQU0sR0FBRyxNQUFNLFlBQVksRUFBRSxDQUFDO0FBRXBDLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUM7QUFFN0IsU0FBUyxHQUFHLENBQUMsV0FBb0I7SUFDaEMsSUFBSSxDQUFDO1FBQ0osTUFBTSxLQUFLLEdBQUcsV0FBVyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0RSxNQUFNLEdBQUcsR0FBUTtZQUNoQixLQUFLLEVBQUU7Z0JBQ04sR0FBRyxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLEdBQUcsQ0FBQyxDQUFDO2dCQUMxRCxVQUFVLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQ25DLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLEdBQUcsQ0FBQyxDQUMvQjtnQkFDRCxTQUFTLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQ2xDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLEdBQUcsQ0FBQyxDQUMvQjtnQkFDRCxLQUFL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QUUsQ0FDakMsQ0FBQztZQUVGLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDMUMsQ0FBQztRQUVELElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLE9BQU8sQ0FBQyxJQUFJO1lBQzlCLE1BQU0sQ0FBQyxJQUFJLENBQ1YsdUJBQXVCLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFDM0MsZ0NBQWdDLENBQ2hDLENBQUM7UUFFSCxPQUFPLEVBQUUsQ0FBQztJQUNYLENBQUM7SUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1FBQ2hCLElBQUksT0FBTyxDQUFDLEtBQUs7WUFDaEIsTUFBTSxDQUFDLEtBQUssQ0FDWCxxQ0FBcUMsS0FBSyxFQUFFLEVBQzVDLGdDQUFnQyxDQUNoQyxDQUFDO1FBRUgsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBRXZFLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDMUMsQ0FBQztBQUNGLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxNQUFNLEdBQXNEO0lBQ3hFLEdBQUc7SUFDSCxFQUFFO0NBQ08sQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEZpbGU6IHNyYy9jb21tb24vdXRpbHMvcmFuZG9tLmpzXG5cbmltcG9ydCB7IENvbW1vbkZ1bmN0aW9uc01hc3RlckludGVyZmFjZSwgSFNMLCBTTCB9IGZyb20gJy4uLy4uL3R5cGVzL2luZGV4LmpzJztcbmltcG9ydCB7IGNvcmUgfSBmcm9tICcuLi9jb3JlL2luZGV4LmpzJztcbmltcG9ydCB7IGNyZWF0ZUxvZ2dlciB9IGZyb20gJy4uLy4uL2xvZ2dlci9pbmRleC5qcyc7XG5pbXBvcnQgeyBkZWZhdWx0cywgbW9kZSB9IGZyb20gJy4uL2RhdGEvYmFzZS5qcyc7XG5cbmNvbnN0IGxvZ2dlciA9IGF3YWl0IGNyZWF0ZUxvZ2dlcigpO1xuXG5jb25zdCBsb2dNb2RlID0gbW9kZS5sb2dnaW5nO1xuXG5mdW5jdGlvbiBoc2woZW5hYmxlQWxwaGE6IGJvb2xlYW4pOiBIU0wge1xuXHR0cnkge1xuXHRcdGNvbnN0IGFscGhhID0gZW5hYmxlQWxwaGEgPyBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxMDApIC8gMTAwIDogMTtcblx0XHRjb25zdCBoc2w6IEhTTCA9IHtcblx0XHRcdHZhbHVlOiB7XG5cdFx0XHRcdGh1ZTogY29yZS5zYW5pdGl6ZS5yYWRpYWwoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMzYwKSksXG5cdFx0XHRcdHNhdHVyYXRpb246IGNvcmUuc2FuaXRpemUucGVyY2VudGlsZShcblx0XHRcdFx0XHRNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDEpXG5cdFx0XHRcdCksXG5cdFx0XHRcdGxpZ2h0bmVzczogY29yZS5zYW5pdGl6ZS5wZXJjZW50aWxlKFxuXHRcdFx0XHRcdE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMSlcblx0XHRcdFx0KSxcblx0XHRcdFx0YWxwaGE6IGNvcmUuYnJhbmQuYXNBbHBoYVJhbmdlKGFscGhhKVxuXHRcdFx0fSxcblx0XHRcdGZvcm1hdDogJ2hzbCdcblx0XHR9O1xuXG5cdFx0aWYgKCFjb3JlLnZhbGlkYXRlLmNvbG9yVmFsdWVzKGhzbCkpIHtcblx0XHRcdGlmIChsb2dNb2RlLmVycm9yKVxuXHRcdFx0XHRsb2dnZXIuZXJyb3IoXG5cdFx0XHRcdFx0YEludmFsaWQgcmFuZG9tIEhTTCBjb2xvciB2YWx1ZSAke0pTT04uc3RyaW5naWZ5KGhzbCl9YCxcblx0XHRcdFx0XHQnY29tbW9uID4gdXRpbHMgPiByYW5kb20gPiBoc2woKSdcblx0XHRcdFx0KTtcblxuXHRcdFx0Y29uc3QgdW5icmFuZGVkSFNMID0gY29yZS5iYXNlLmNsb25lKFxuXHRcdFx0XHRkZWZhdWx0cy5jb2xvcnMuYmFzZS51bmJyYW5kZWQuaHNsXG5cdFx0XHQpO1xuXG5cdFx0XHRyZXR1cm4gY29yZS5icmFuZENvbG9yLmFzSFNMKHVuYnJhbmRlZEhTTCk7XG5cdFx0fVxuXG5cdFx0aWYgKCFtb2RlLnF1aWV0ICYmICFsb2dNb2RlLmluZm8pXG5cdFx0XHRsb2dnZXIuaW5mbyhcblx0XHRcdFx0YEdlbmVyYXRlZCByYW5kb21IU0w6ICR7SlNPTi5zdHJpbmdpZnkoaHNsKX1gLFxuXHRcdFx0XHQnY29tbW9uID4gdXRpbHMgPiByYW5kb20gPiBoc2woKSdcblx0XHRcdCk7XG5cblx0XHRyZXR1cm4gaHNsO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGlmIChsb2dNb2RlLmVycm9yKVxuXHRcdFx0bG9nZ2VyLmVycm9yKFxuXHRcdFx0XHRgRXJyb3IgZ2VuZXJhdGluZyByYW5kb20gSFNMIGNvbG9yOiAke2Vycm9yfWAsXG5cdFx0XHRcdCdjb21tb24gPiB1dGlscyA+IHJhbmRvbSA+IGhzbCgpJ1xuXHRcdFx0KTtcblxuXHRcdGNvbnN0IHVuYnJhbmRlZEhTTCA9IGNvcmUuYmFzZS5jbG9uZShcblx0XHRcdGRlZmF1bHRzLmNvbG9ycy5iYXNlLnVuYnJhbmRlZC5oc2xcblx0XHQpO1xuXG5cdFx0cmV0dXJuIGNvcmUuYnJhbmRDb2xvci5hc0hTTCh1bmJyYW5kZWRIU0wpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHNsKGVuYWJsZUFscGhhOiBib29sZWFuKTogU0wge1xuXHR0cnkge1xuXHRcdGNvbnN0IGFscGhhID0gZW5hYmxlQWxwaGEgPyBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxMDApIC8gMTAwIDogMTtcblx0XHRjb25zdCBzbDogU0wgPSB7XG5cdFx0XHR2YWx1ZToge1xuXHRcdFx0XHRzYXR1cmF0aW9uOiBjb3JlLnNhbml0aXplLnBlcmNlbnRpbGUoXG5cdFx0XHRcdFx0TWF0aC5tYXgoMCwgTWF0aC5taW4oMTAwLCBNYXRoLnJhbmRvbSgpICogMTAwKSlcblx0XHRcdFx0KSxcblx0XHRcdFx0bGlnaHRuZXNzOiBjb3JlLnNhbml0aXplLnBlcmNlbnRpbGUoXG5cdFx0XHRcdFx0TWF0aC5tYXgoMCwgTWF0aC5taW4oMTAwLCBNYXRoLnJhbmRvbSgpICogMTAwKSlcblx0XHRcdFx0KSxcblx0XHRcdFx0YWxwaGE6IGNvcmUuYnJhbmQuYXNBbHBoYVJhbmdlKGFscGhhKVxuXHRcdFx0fSxcblx0XHRcdGZvcm1hdDogJ3NsJ1xuXHRcdH07XG5cblx0XHRpZiAoIWNvcmUudmFsaWRhdGUuY29sb3JWYWx1ZXMoc2wgYXMgU0wpKSB7XG5cdFx0XHRpZiAobG9nTW9kZS5lcnJvcilcblx0XHRcdFx0bG9nZ2VyLmVycm9yKFxuXHRcdFx0XHRcdGBJbnZhbGlkIHJhbmRvbSBTViBjb2xvciB2YWx1ZSAke0pTT04uc3RyaW5naWZ5KHNsKX1gLFxuXHRcdFx0XHRcdCdjb21tb24gPiB1dGlscyA+IHJhbmRvbSA+IHNsKCknXG5cdFx0XHRcdCk7XG5cblx0XHRcdGNvbnN0IHVuYnJhbmRlZFNMID0gY29yZS5iYXNlLmNsb25lKFxuXHRcdFx0XHRkZWZhdWx0cy5jb2xvcnMuYmFzZS51bmJyYW5kZWQuc2xcblx0XHRcdCk7XG5cblx0XHRcdHJldHVybiBjb3JlLmJyYW5kQ29sb3IuYXNTTCh1bmJyYW5kZWRTTCk7XG5cdFx0fVxuXG5cdFx0aWYgKCFtb2RlLnF1aWV0ICYmIGxvZ01vZGUuaW5mbylcblx0XHRcdGxvZ2dlci5pbmZvKFxuXHRcdFx0XHRgR2VuZXJhdGVkIHJhbmRvbVNMOiAke0pTT04uc3RyaW5naWZ5KHNsKX1gLFxuXHRcdFx0XHQnY29tbW9uID4gdXRpbHMgPiByYW5kb20gPiBzbCgpJ1xuXHRcdFx0KTtcblxuXHRcdHJldHVybiBzbDtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRpZiAobG9nTW9kZS5lcnJvcilcblx0XHRcdGxvZ2dlci5lcnJvcihcblx0XHRcdFx0YEVycm9yIGdlbmVyYXRpbmcgcmFuZG9tIFNMIGNvbG9yOiAke2Vycm9yfWAsXG5cdFx0XHRcdCdjb21tb24gPiB1dGlscyA+IHJhbmRvbSA+IHNsKCknXG5cdFx0XHQpO1xuXG5cdFx0Y29uc3QgdW5icmFuZGVkU0wgPSBjb3JlLmJhc2UuY2xvbmUoZGVmYXVsdHMuY29sb3JzLmJhc2UudW5icmFuZGVkLnNsKTtcblxuXHRcdHJldHVybiBjb3JlLmJyYW5kQ29sb3IuYXNTTCh1bmJyYW5kZWRTTCk7XG5cdH1cbn1cblxuZXhwb3J0IGNvbnN0IHJhbmRvbTogQ29tbW9uRnVuY3Rpb25zTWFzdGVySW50ZXJmYWNlWyd1dGlscyddWydyYW5kb20nXSA9IHtcblx0aHNsLFxuXHRzbFxufSBhcyBjb25zdDtcbiJdfQ==