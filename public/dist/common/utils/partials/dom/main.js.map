{"version":3,"file":"main.js","sources":["../../../../../../../src/common/utils/partials/dom/main.ts"],"sourcesContent":["// File: common/utils/partials/dom/main.ts\n\nimport {\n\tColorInputElement,\n\tColorSpace,\n\tColorUtils,\n\tDOMUtilsPartial,\n\tHelpers,\n\tHSL,\n\tPalette,\n\tServices,\n\tState,\n\tValidationUtils\n} from '../../../../types/index.js';\nimport { config, domConfig, domIndex } from '../../../../config/index.js';\n\nconst classes = domIndex.classes;\nconst ids = domIndex.ids;\nconst mode = config.mode;\n\nexport function partialDOMUtilsFactory(\n\tcolorUtils: ColorUtils,\n\thelpers: Helpers,\n\tservices: Services,\n\tvalidate: ValidationUtils\n): DOMUtilsPartial {\n\tconst {\n\t\tdata: { clone },\n\t\tdom: { getElement, getAllElements }\n\t} = helpers;\n\tconst { errors, log } = services;\n\n\tfunction createTooltip(\n\t\telement: HTMLElement,\n\t\ttext: string\n\t): HTMLElement | void {\n\t\treturn errors.handleSync(() => {\n\t\t\t// remove existing tooltip if present\n\t\t\tremoveTooltip(element);\n\t\t\tconst tooltip = document.createElement('div');\n\t\t\ttooltip.classList.add('tooltip');\n\t\t\ttooltip.textContent = text;\n\t\t\t// add to body\n\t\t\tdocument.body.appendChild(tooltip);\n\t\t\t// position it\n\t\t\tpositionTooltip(element, tooltip);\n\t\t\t// store reference in dataset for later removal\n\t\t\telement.dataset.tooltipId = tooltip.id;\n\t\t\t// show tooltip with fade-in effect\n\t\t\tsetTimeout(() => {\n\t\t\t\ttooltip.style.opacity = '1';\n\t\t\t}, domConfig.tooltipFadeOut);\n\t\t\treturn tooltip;\n\t\t}, 'Error occurred while creating tooltip.');\n\t}\n\n\tfunction downloadFile(data: string, filename: string, type: string): void {\n\t\treturn errors.handleSync(() => {\n\t\t\tconst blob = new Blob([data], { type });\n\t\t\tconst url = URL.createObjectURL(blob);\n\t\t\tconst a = document.createElement('a');\n\t\t\ta.href = url;\n\t\t\ta.download = filename;\n\t\t\ta.click();\n\t\t\tURL.revokeObjectURL(url);\n\t\t}, 'Error occurred while downloading file.');\n\t}\n\n\tfunction enforceSwatchRules(\n\t\tminSwatches: number,\n\t\tmaxSwatches: number\n\t): void {\n\t\treturn errors.handleSync(() => {\n\t\t\tconst paletteColumnSelector = document.getElementById(\n\t\t\t\tdomIndex.ids.inputs.paletteColumn\n\t\t\t) as HTMLSelectElement;\n\t\t\tif (!paletteColumnSelector) {\n\t\t\t\tlog('paletteColumnSelector not found', {\n\t\t\t\t\tcaller: 'enforceMinimumSwatches',\n\t\t\t\t\tlevel: 'error'\n\t\t\t\t});\n\t\t\t\tif (mode.stackTrace) {\n\t\t\t\t\tconsole.trace('enforceMinimumSwatches stack trace');\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst currentValue = parseInt(paletteColumnSelector.value, 10);\n\t\t\tlet newValue = currentValue;\n\t\t\t// ensure the value is within the allowed range\n\t\t\tif (currentValue < minSwatches) {\n\t\t\t\tnewValue = minSwatches;\n\t\t\t} else if (\n\t\t\t\tmaxSwatches !== undefined &&\n\t\t\t\tcurrentValue > maxSwatches\n\t\t\t) {\n\t\t\t\tnewValue = maxSwatches;\n\t\t\t}\n\t\t\tif (newValue !== currentValue) {\n\t\t\t\t// update value in the dropdown menu\n\t\t\t\tpaletteColumnSelector.value = newValue.toString();\n\t\t\t\t// trigger a change event to notify the application\n\t\t\t\tconst event = new Event('change', { bubbles: true });\n\t\t\t\ttry {\n\t\t\t\t\tpaletteColumnSelector.dispatchEvent(event);\n\t\t\t\t} catch (error) {\n\t\t\t\t\tlog(\n\t\t\t\t\t\t`Failed to dispatch change event to palette-number-options dropdown menu: ${error}`,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcaller: 'enforceMinimumSwatches',\n\t\t\t\t\t\t\tlevel: 'error'\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t`Failed to dispatch change event: ${error}`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}, 'Error occurred while enforcing swatch rules.');\n\t}\n\n\tfunction hideTooltip(): void {\n\t\treturn errors.handleSync(() => {\n\t\t\tconst tooltip = getElement<HTMLDivElement>('.tooltip');\n\t\t\tif (!tooltip) return;\n\t\t\ttooltip.style.opacity = '0';\n\t\t\tsetTimeout(() => {\n\t\t\t\ttooltip.style.visibility = 'hidden';\n\t\t\t\ttooltip.remove();\n\t\t\t}, domConfig.tooltipFadeOut || 500);\n\t\t}, 'Error occurred while hiding tooltip.');\n\t}\n\n\tfunction positionTooltip(element: HTMLElement, tooltip: HTMLElement): void {\n\t\treturn errors.handleSync(() => {\n\t\t\tconst rect = element.getBoundingClientRect();\n\t\t\ttooltip.style.position = 'absolute';\n\t\t\ttooltip.style.left = `${rect.left + window.scrollX}px`;\n\t\t\ttooltip.style.top = `${rect.top + window.scrollY - tooltip.offsetHeight - 5}px`;\n\t\t\ttooltip.style.zIndex = '1000';\n\t\t\ttooltip.style.pointerEvents = 'none';\n\t\t\ttooltip.style.opacity = '0';\n\t\t\ttooltip.style.transition = 'opacity 0.2s ease-in-out';\n\t\t}, 'Error occurred while positioning tooltip.');\n\t}\n\n\tfunction removeTooltip(element: HTMLElement): void {\n\t\treturn errors.handleSync(() => {\n\t\t\tconst tooltipId = element.dataset.tooltipId;\n\t\t\tif (!tooltipId) return;\n\t\t\tconst tooltip = document.getElementById(tooltipId);\n\t\t\tif (tooltip) {\n\t\t\t\ttooltip.style.opacity = '0';\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\ttooltip?.remove();\n\t\t\t\t}, 300);\n\t\t\t}\n\t\t\tdelete element.dataset.tooltipId;\n\t\t}, 'Error occurred while removing tooltip.');\n\t}\n\n\tfunction readFile(file: File): Promise<string> {\n\t\treturn errors.handleAsync(async () => {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tconst reader = new FileReader();\n\t\t\t\treader.onload = () => resolve(reader.result as string);\n\t\t\t\treader.onerror = () => reject(reader.error);\n\t\t\t\treader.readAsText(file);\n\t\t\t});\n\t\t}, 'Error occurred while reading file.');\n\t}\n\n\tfunction scanPaletteColumns(): State['paletteContainer']['columns'] {\n\t\treturn errors.handleSync(() => {\n\t\t\tif (document.readyState === 'loading') {\n\t\t\t\tlog(\n\t\t\t\t\t'[scanPaletteColumns] Document not ready. Returning empty array.',\n\t\t\t\t\t{\n\t\t\t\t\t\tcaller: 'scanPaletteColumns',\n\t\t\t\t\t\tlevel: 'warn'\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tconst paletteColumns = getAllElements<HTMLDivElement>(\n\t\t\t\tclasses.paletteColumn\n\t\t\t);\n\t\t\tif (!paletteColumns.length) {\n\t\t\t\tlog('[scanPaletteColumns] No palette columns found.', {\n\t\t\t\t\tcaller: 'scanPaletteColumns',\n\t\t\t\t\tlevel: 'warn'\n\t\t\t\t});\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\treturn Array.from(paletteColumns).map((column, index) => {\n\t\t\t\tconst id = parseInt(\n\t\t\t\t\tcolumn.id.split('-').pop() || `${index + 1}`,\n\t\t\t\t\t10\n\t\t\t\t);\n\t\t\t\tconst size = column.clientWidth / paletteColumns.length;\n\t\t\t\tconst isLocked = column.classList.contains(classes.locked);\n\t\t\t\treturn { id, position: index + 1, size, isLocked };\n\t\t\t});\n\t\t}, 'Error occurred while scanning palette columns.');\n\t}\n\n\tfunction switchColorSpaceInDOM(targetFormat: ColorSpace): void {\n\t\treturn errors.handleSync(() => {\n\t\t\tconst colorTextOutputBoxes =\n\t\t\t\tdocument.querySelectorAll<HTMLInputElement>(\n\t\t\t\t\t'.color-text-output-box'\n\t\t\t\t);\n\t\t\tfor (const box of colorTextOutputBoxes) {\n\t\t\t\tconst inputBox = box as ColorInputElement;\n\t\t\t\tconst colorValues = inputBox.colorValues;\n\t\t\t\tif (!colorValues || !validate.colorValue(colorValues)) {\n\t\t\t\t\tlog('Invalid color values. Cannot display toast.', {\n\t\t\t\t\t\tcaller: 'switchColorSpaceInDOM',\n\t\t\t\t\t\tlevel: 'error'\n\t\t\t\t\t});\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tconst currentFormat = inputBox.getAttribute(\n\t\t\t\t\t'data-format'\n\t\t\t\t) as ColorSpace;\n\t\t\t\tlog(`Converting from ${currentFormat} to ${targetFormat}`, {\n\t\t\t\t\tcaller: 'switchColorSpaceInDOM',\n\t\t\t\t\tlevel: 'info'\n\t\t\t\t});\n\t\t\t\tconst convertFn = helpers.color.getConversionFn(\n\t\t\t\t\tcurrentFormat,\n\t\t\t\t\ttargetFormat\n\t\t\t\t);\n\t\t\t\tif (!convertFn) {\n\t\t\t\t\tlog(\n\t\t\t\t\t\t`Conversion from ${currentFormat} to ${targetFormat} is not supported.`,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcaller: 'switchColorSpaceInDOM',\n\t\t\t\t\t\t\tlevel: 'error'\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (colorValues.format === 'xyz') {\n\t\t\t\t\tlog('Cannot convert from XYZ to another color space.', {\n\t\t\t\t\t\tcaller: 'switchColorSpaceInDOM',\n\t\t\t\t\t\tlevel: 'error'\n\t\t\t\t\t});\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst clonedColor = clone(colorValues);\n\n\t\t\t\tif (!helpers.typeguards.isConvertibleColor(clonedColor)) {\n\t\t\t\t\tlog(\n\t\t\t\t\t\t'Cannot convert from SL, SV, or XYZ color spaces. Please convert to a supported format first.',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcaller: 'switchColorSpaceInDOM',\n\t\t\t\t\t\t\tlevel: 'error'\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tconst newColor = convertFn(clonedColor);\n\t\t\t\tif (!newColor) {\n\t\t\t\t\tlog(`Conversion to ${targetFormat} failed.`, {\n\t\t\t\t\t\tcaller: 'switchColorSpaceInDOM',\n\t\t\t\t\t\tlevel: 'error'\n\t\t\t\t\t});\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tinputBox.value = String(newColor);\n\t\t\t\tinputBox.setAttribute('data-format', targetFormat);\n\t\t\t}\n\t\t}, 'Error occurred while converting colors.');\n\t}\n\n\tfunction updateColorBox(color: HSL, boxId: string): void {\n\t\treturn errors.handleSync(() => {\n\t\t\tconst colorBox = document.getElementById(boxId);\n\t\t\tif (colorBox) {\n\t\t\t\tcolorBox.style.backgroundColor =\n\t\t\t\t\tcolorUtils.formatColorAsCSS(color);\n\t\t\t}\n\t\t}, 'Error occurred while updating color box.');\n\t}\n\n\tfunction updateHistory(history: Palette[]): void {\n\t\treturn errors.handleSync(() => {\n\t\t\tconst historyList = getElement<HTMLDivElement>(\n\t\t\t\tids.divs.paletteHistory\n\t\t\t);\n\t\t\tif (!historyList) return;\n\t\t\thistoryList.innerHTML = '';\n\t\t\thistory.forEach(palette => {\n\t\t\t\tconst entry = document.createElement('div');\n\t\t\t\tentry.classList.add('history-item');\n\t\t\t\tentry.id = `palette_${palette.id}`;\n\t\t\t\tentry.innerHTML = `\n\t\t\t\t<p>Palette #${palette.metadata.name || palette.id}</p>\n\t\t\t\t<div class=\"color-preview\">\n\t\t\t\t\t${palette.items.map(item => `<span class=\"color-box\" style=\"background: ${item.css.hex};\"></span>`).join(' ')}\n\t\t\t\t</div>\n\t\t\t\t<button class=\"remove-history-item\" data-id=\"${palette.id}-history-remove-btn\">Remove</button>\n\t\t\t`;\n\t\t\t\tentry\n\t\t\t\t\t.querySelector('.remove-history-item')\n\t\t\t\t\t?.addEventListener('click', async () => {\n\t\t\t\t\t\t// TODO: save to history somehow\n\t\t\t\t\t});\n\t\t\t\thistoryList.appendChild(entry);\n\t\t\t});\n\t\t}, 'Error occurred while updating history.');\n\t}\n\n\tconst domUtilsPartial: DOMUtilsPartial = {\n\t\tcreateTooltip,\n\t\tdownloadFile,\n\t\tenforceSwatchRules,\n\t\thideTooltip,\n\t\tpositionTooltip,\n\t\tremoveTooltip,\n\t\treadFile,\n\t\tscanPaletteColumns,\n\t\tswitchColorSpaceInDOM,\n\t\tupdateColorBox,\n\t\tupdateHistory\n\t} as const;\n\n\treturn errors.handleSync(\n\t\t() => domUtilsPartial,\n\t\t'Error occurred while creating partial DOM utilities group.',\n\t\t{ context: { domUtilsPartial } }\n\t);\n}\n"],"names":[],"mappings":";;;;AAAA;AAgBA,MAAM,OAAO,GAAG,QAAQ,CAAC,OAAO;AAChC,MAAM,GAAG,GAAG,QAAQ,CAAC,GAAG;AAGlB,SAAU,sBAAsB,CACrC,UAAsB,EACtB,OAAgB,EAChB,QAAkB,EAClB,QAAyB,EAAA;AAEzB,IAAA,MAAM,EACL,IAAI,EAAE,EAAE,KAAK,EAAE,EACf,GAAG,EAAE,EAAE,UAAU,EAAE,cAAc,EAAE,EACnC,GAAG,OAAO;AACX,IAAA,MAAM,EAAE,MAAM,EAAE,GAAG,EAAE,GAAG,QAAQ;AAEhC,IAAA,SAAS,aAAa,CACrB,OAAoB,EACpB,IAAY,EAAA;AAEZ,QAAA,OAAO,MAAM,CAAC,UAAU,CAAC,MAAK;;YAE7B,aAAa,CAAC,OAAO,CAAC;YACtB,MAAM,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;AAC7C,YAAA,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC;AAChC,YAAA,OAAO,CAAC,WAAW,GAAG,IAAI;;AAE1B,YAAA,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC;;AAElC,YAAA,eAAe,CAAC,OAAO,EAAE,OAAO,CAAC;;YAEjC,OAAO,CAAC,OAAO,CAAC,SAAS,GAAG,OAAO,CAAC,EAAE;;YAEtC,UAAU,CAAC,MAAK;AACf,gBAAA,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,GAAG;AAC5B,aAAC,EAAE,SAAS,CAAC,cAAc,CAAC;AAC5B,YAAA,OAAO,OAAO;SACd,EAAE,wCAAwC,CAAC;;AAG7C,IAAA,SAAS,YAAY,CAAC,IAAY,EAAE,QAAgB,EAAE,IAAY,EAAA;AACjE,QAAA,OAAO,MAAM,CAAC,UAAU,CAAC,MAAK;AAC7B,YAAA,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,EAAE,CAAC;YACvC,MAAM,GAAG,GAAG,GAAG,CAAC,eAAe,CAAC,IAAI,CAAC;YACrC,MAAM,CAAC,GAAG,QAAQ,CAAC,aAAa,CAAC,GAAG,CAAC;AACrC,YAAA,CAAC,CAAC,IAAI,GAAG,GAAG;AACZ,YAAA,CAAC,CAAC,QAAQ,GAAG,QAAQ;YACrB,CAAC,CAAC,KAAK,EAAE;AACT,YAAA,GAAG,CAAC,eAAe,CAAC,GAAG,CAAC;SACxB,EAAE,wCAAwC,CAAC;;AAG7C,IAAA,SAAS,kBAAkB,CAC1B,WAAmB,EACnB,WAAmB,EAAA;AAEnB,QAAA,OAAO,MAAM,CAAC,UAAU,CAAC,MAAK;AAC7B,YAAA,MAAM,qBAAqB,GAAG,QAAQ,CAAC,cAAc,CACpD,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,aAAa,CACZ;YACtB,IAAI,CAAC,qBAAqB,EAAE;gBAC3B,GAAG,CAAC,iCAAiC,EAAE;AACtC,oBAAA,MAAM,EAAE,wBAAwB;AAChC,oBAAA,KAAK,EAAE;AACP,iBAAA,CAAC;AACF,gBAAqB;AACpB,oBAAA,OAAO,CAAC,KAAK,CAAC,oCAAoC,CAAC;;gBAEpD;;YAED,MAAM,YAAY,GAAG,QAAQ,CAAC,qBAAqB,CAAC,KAAK,EAAE,EAAE,CAAC;YAC9D,IAAI,QAAQ,GAAG,YAAY;;AAE3B,YAAA,IAAI,YAAY,GAAG,WAAW,EAAE;gBAC/B,QAAQ,GAAG,WAAW;;iBAChB,IACN,WAAW,KAAK,SAAS;gBACzB,YAAY,GAAG,WAAW,EACzB;gBACD,QAAQ,GAAG,WAAW;;AAEvB,YAAA,IAAI,QAAQ,KAAK,YAAY,EAAE;;AAE9B,gBAAA,qBAAqB,CAAC,KAAK,GAAG,QAAQ,CAAC,QAAQ,EAAE;;AAEjD,gBAAA,MAAM,KAAK,GAAG,IAAI,KAAK,CAAC,QAAQ,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;AACpD,gBAAA,IAAI;AACH,oBAAA,qBAAqB,CAAC,aAAa,CAAC,KAAK,CAAC;;gBACzC,OAAO,KAAK,EAAE;AACf,oBAAA,GAAG,CACF,CAAA,yEAAA,EAA4E,KAAK,CAAA,CAAE,EACnF;AACC,wBAAA,MAAM,EAAE,wBAAwB;AAChC,wBAAA,KAAK,EAAE;AACP,qBAAA,CACD;AACD,oBAAA,MAAM,IAAI,KAAK,CACd,oCAAoC,KAAK,CAAA,CAAE,CAC3C;;;SAGH,EAAE,8CAA8C,CAAC;;AAGnD,IAAA,SAAS,WAAW,GAAA;AACnB,QAAA,OAAO,MAAM,CAAC,UAAU,CAAC,MAAK;AAC7B,YAAA,MAAM,OAAO,GAAG,UAAU,CAAiB,UAAU,CAAC;AACtD,YAAA,IAAI,CAAC,OAAO;gBAAE;AACd,YAAA,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,GAAG;YAC3B,UAAU,CAAC,MAAK;AACf,gBAAA,OAAO,CAAC,KAAK,CAAC,UAAU,GAAG,QAAQ;gBACnC,OAAO,CAAC,MAAM,EAAE;AACjB,aAAC,EAAE,SAAS,CAAC,cAAqB,CAAC;SACnC,EAAE,sCAAsC,CAAC;;AAG3C,IAAA,SAAS,eAAe,CAAC,OAAoB,EAAE,OAAoB,EAAA;AAClE,QAAA,OAAO,MAAM,CAAC,UAAU,CAAC,MAAK;AAC7B,YAAA,MAAM,IAAI,GAAG,OAAO,CAAC,qBAAqB,EAAE;AAC5C,YAAA,OAAO,CAAC,KAAK,CAAC,QAAQ,GAAG,UAAU;AACnC,YAAA,OAAO,CAAC,KAAK,CAAC,IAAI,GAAG,CAAG,EAAA,IAAI,CAAC,IAAI,GAAG,MAAM,CAAC,OAAO,IAAI;YACtD,OAAO,CAAC,KAAK,CAAC,GAAG,GAAG,CAAG,EAAA,IAAI,CAAC,GAAG,GAAG,MAAM,CAAC,OAAO,GAAG,OAAO,CAAC,YAAY,GAAG,CAAC,IAAI;AAC/E,YAAA,OAAO,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM;AAC7B,YAAA,OAAO,CAAC,KAAK,CAAC,aAAa,GAAG,MAAM;AACpC,YAAA,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,GAAG;AAC3B,YAAA,OAAO,CAAC,KAAK,CAAC,UAAU,GAAG,0BAA0B;SACrD,EAAE,2CAA2C,CAAC;;IAGhD,SAAS,aAAa,CAAC,OAAoB,EAAA;AAC1C,QAAA,OAAO,MAAM,CAAC,UAAU,CAAC,MAAK;AAC7B,YAAA,MAAM,SAAS,GAAG,OAAO,CAAC,OAAO,CAAC,SAAS;AAC3C,YAAA,IAAI,CAAC,SAAS;gBAAE;YAChB,MAAM,OAAO,GAAG,QAAQ,CAAC,cAAc,CAAC,SAAS,CAAC;YAClD,IAAI,OAAO,EAAE;AACZ,gBAAA,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,GAAG;gBAC3B,UAAU,CAAC,MAAK;oBACf,OAAO,EAAE,MAAM,EAAE;iBACjB,EAAE,GAAG,CAAC;;AAER,YAAA,OAAO,OAAO,CAAC,OAAO,CAAC,SAAS;SAChC,EAAE,wCAAwC,CAAC;;IAG7C,SAAS,QAAQ,CAAC,IAAU,EAAA;AAC3B,QAAA,OAAO,MAAM,CAAC,WAAW,CAAC,YAAW;YACpC,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,KAAI;AACtC,gBAAA,MAAM,MAAM,GAAG,IAAI,UAAU,EAAE;AAC/B,gBAAA,MAAM,CAAC,MAAM,GAAG,MAAM,OAAO,CAAC,MAAM,CAAC,MAAgB,CAAC;AACtD,gBAAA,MAAM,CAAC,OAAO,GAAG,MAAM,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC;AAC3C,gBAAA,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC;AACxB,aAAC,CAAC;SACF,EAAE,oCAAoC,CAAC;;AAGzC,IAAA,SAAS,kBAAkB,GAAA;AAC1B,QAAA,OAAO,MAAM,CAAC,UAAU,CAAC,MAAK;AAC7B,YAAA,IAAI,QAAQ,CAAC,UAAU,KAAK,SAAS,EAAE;gBACtC,GAAG,CACF,iEAAiE,EACjE;AACC,oBAAA,MAAM,EAAE,oBAAoB;AAC5B,oBAAA,KAAK,EAAE;AACP,iBAAA,CACD;AACD,gBAAA,OAAO,EAAE;;YAGV,MAAM,cAAc,GAAG,cAAc,CACpC,OAAO,CAAC,aAAa,CACrB;AACD,YAAA,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE;gBAC3B,GAAG,CAAC,gDAAgD,EAAE;AACrD,oBAAA,MAAM,EAAE,oBAAoB;AAC5B,oBAAA,KAAK,EAAE;AACP,iBAAA,CAAC;AACF,gBAAA,OAAO,EAAE;;AAGV,YAAA,OAAO,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,KAAK,KAAI;gBACvD,MAAM,EAAE,GAAG,QAAQ,CAClB,MAAM,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,IAAI,CAAA,EAAG,KAAK,GAAG,CAAC,CAAE,CAAA,EAC5C,EAAE,CACF;gBACD,MAAM,IAAI,GAAG,MAAM,CAAC,WAAW,GAAG,cAAc,CAAC,MAAM;AACvD,gBAAA,MAAM,QAAQ,GAAG,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC;AAC1D,gBAAA,OAAO,EAAE,EAAE,EAAE,QAAQ,EAAE,KAAK,GAAG,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE;AACnD,aAAC,CAAC;SACF,EAAE,gDAAgD,CAAC;;IAGrD,SAAS,qBAAqB,CAAC,YAAwB,EAAA;AACtD,QAAA,OAAO,MAAM,CAAC,UAAU,CAAC,MAAK;YAC7B,MAAM,oBAAoB,GACzB,QAAQ,CAAC,gBAAgB,CACxB,wBAAwB,CACxB;AACF,YAAA,KAAK,MAAM,GAAG,IAAI,oBAAoB,EAAE;gBACvC,MAAM,QAAQ,GAAG,GAAwB;AACzC,gBAAA,MAAM,WAAW,GAAG,QAAQ,CAAC,WAAW;gBACxC,IAAI,CAAC,WAAW,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,WAAW,CAAC,EAAE;oBACtD,GAAG,CAAC,6CAA6C,EAAE;AAClD,wBAAA,MAAM,EAAE,uBAAuB;AAC/B,wBAAA,KAAK,EAAE;AACP,qBAAA,CAAC;oBACF;;gBAED,MAAM,aAAa,GAAG,QAAQ,CAAC,YAAY,CAC1C,aAAa,CACC;AACf,gBAAA,GAAG,CAAC,CAAmB,gBAAA,EAAA,aAAa,CAAO,IAAA,EAAA,YAAY,EAAE,EAAE;AAC1D,oBAAA,MAAM,EAAE,uBAAuB;AAC/B,oBAAA,KAAK,EAAE;AACP,iBAAA,CAAC;AACF,gBAAA,MAAM,SAAS,GAAG,OAAO,CAAC,KAAK,CAAC,eAAe,CAC9C,aAAa,EACb,YAAY,CACZ;gBACD,IAAI,CAAC,SAAS,EAAE;AACf,oBAAA,GAAG,CACF,CAAmB,gBAAA,EAAA,aAAa,CAAO,IAAA,EAAA,YAAY,oBAAoB,EACvE;AACC,wBAAA,MAAM,EAAE,uBAAuB;AAC/B,wBAAA,KAAK,EAAE;AACP,qBAAA,CACD;oBACD;;AAED,gBAAA,IAAI,WAAW,CAAC,MAAM,KAAK,KAAK,EAAE;oBACjC,GAAG,CAAC,iDAAiD,EAAE;AACtD,wBAAA,MAAM,EAAE,uBAAuB;AAC/B,wBAAA,KAAK,EAAE;AACP,qBAAA,CAAC;oBACF;;AAGD,gBAAA,MAAM,WAAW,GAAG,KAAK,CAAC,WAAW,CAAC;gBAEtC,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,kBAAkB,CAAC,WAAW,CAAC,EAAE;oBACxD,GAAG,CACF,8FAA8F,EAC9F;AACC,wBAAA,MAAM,EAAE,uBAAuB;AAC/B,wBAAA,KAAK,EAAE;AACP,qBAAA,CACD;oBACD;;AAED,gBAAA,MAAM,QAAQ,GAAG,SAAS,CAAC,WAAW,CAAC;gBACvC,IAAI,CAAC,QAAQ,EAAE;AACd,oBAAA,GAAG,CAAC,CAAA,cAAA,EAAiB,YAAY,CAAA,QAAA,CAAU,EAAE;AAC5C,wBAAA,MAAM,EAAE,uBAAuB;AAC/B,wBAAA,KAAK,EAAE;AACP,qBAAA,CAAC;oBACF;;AAED,gBAAA,QAAQ,CAAC,KAAK,GAAG,MAAM,CAAC,QAAQ,CAAC;AACjC,gBAAA,QAAQ,CAAC,YAAY,CAAC,aAAa,EAAE,YAAY,CAAC;;SAEnD,EAAE,yCAAyC,CAAC;;AAG9C,IAAA,SAAS,cAAc,CAAC,KAAU,EAAE,KAAa,EAAA;AAChD,QAAA,OAAO,MAAM,CAAC,UAAU,CAAC,MAAK;YAC7B,MAAM,QAAQ,GAAG,QAAQ,CAAC,cAAc,CAAC,KAAK,CAAC;YAC/C,IAAI,QAAQ,EAAE;gBACb,QAAQ,CAAC,KAAK,CAAC,eAAe;AAC7B,oBAAA,UAAU,CAAC,gBAAgB,CAAC,KAAK,CAAC;;SAEpC,EAAE,0CAA0C,CAAC;;IAG/C,SAAS,aAAa,CAAC,OAAkB,EAAA;AACxC,QAAA,OAAO,MAAM,CAAC,UAAU,CAAC,MAAK;YAC7B,MAAM,WAAW,GAAG,UAAU,CAC7B,GAAG,CAAC,IAAI,CAAC,cAAc,CACvB;AACD,YAAA,IAAI,CAAC,WAAW;gBAAE;AAClB,YAAA,WAAW,CAAC,SAAS,GAAG,EAAE;AAC1B,YAAA,OAAO,CAAC,OAAO,CAAC,OAAO,IAAG;gBACzB,MAAM,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;AAC3C,gBAAA,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,cAAc,CAAC;gBACnC,KAAK,CAAC,EAAE,GAAG,CAAA,QAAA,EAAW,OAAO,CAAC,EAAE,EAAE;gBAClC,KAAK,CAAC,SAAS,GAAG;AACJ,gBAAA,EAAA,OAAO,CAAC,QAAQ,CAAC,IAAI,IAAI,OAAO,CAAC,EAAE,CAAA;;OAE9C,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,IAAI,CAAA,2CAAA,EAA8C,IAAI,CAAC,GAAG,CAAC,GAAG,CAAA,UAAA,CAAY,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC;;AAE/D,iDAAA,EAAA,OAAO,CAAC,EAAE,CAAA;IACzD;gBACA;qBACE,aAAa,CAAC,sBAAsB;AACrC,sBAAE,gBAAgB,CAAC,OAAO,EAAE,YAAW;;AAEvC,iBAAC,CAAC;AACH,gBAAA,WAAW,CAAC,WAAW,CAAC,KAAK,CAAC;AAC/B,aAAC,CAAC;SACF,EAAE,wCAAwC,CAAC;;AAG7C,IAAA,MAAM,eAAe,GAAoB;QACxC,aAAa;QACb,YAAY;QACZ,kBAAkB;QAClB,WAAW;QACX,eAAe;QACf,aAAa;QACb,QAAQ;QACR,kBAAkB;QAClB,qBAAqB;QACrB,cAAc;QACd;KACS;AAEV,IAAA,OAAO,MAAM,CAAC,UAAU,CACvB,MAAM,eAAe,EACrB,4DAA4D,EAC5D,EAAE,OAAO,EAAE,EAAE,eAAe,EAAE,EAAE,CAChC;AACF;;;;"}