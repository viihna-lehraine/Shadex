{"version":3,"file":"app.js","sources":["../../../../../src/common/services/app.ts"],"sourcesContent":["// File: services/app.js\n\nimport { AppServicesInterface } from '../../types/index.js';\nimport { createLogger } from '../factories/logger.js';\nimport { modeData as mode } from '../../data/mode.js';\n\nasync function createAppServices(): Promise<AppServicesInterface> {\n\tconsole.log('[FACTORIES.service] Loading createAppServices...');\n\n\tconsole.log('[FACTORIES.service] Awaiting createLogger()...');\n\tconst logger = await createLogger();\n\tconsole.log(`[FACTORIES.service] Logger created:`, logger);\n\n\tasync function handleAsyncErrors<T>(\n\t\taction: () => Promise<T>,\n\t\terrorMessage: string,\n\t\tcaller: string,\n\t\tcontext?: Record<string, unknown>\n\t): Promise<T | null> {\n\t\ttry {\n\t\t\treturn await action();\n\t\t} catch (error) {\n\t\t\tif (mode.logging.error) {\n\t\t\t\tconst errorMessageFormatted =\n\t\t\t\t\terror instanceof Error\n\t\t\t\t\t\t? `${errorMessage}: ${error.message}. Context: ${JSON.stringify(context)}`\n\t\t\t\t\t\t: `${errorMessage}: ${error}. Context: ${JSON.stringify(context)}`;\n\n\t\t\t\tlogger.error(errorMessageFormatted, caller);\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tfunction log(\n\t\tlevel: 'debug' | 'info' | 'warn' | 'error',\n\t\tmessage: string,\n\t\tmethod: string,\n\t\tverbosityRequirement?: number\n\t): void {\n\t\tif (\n\t\t\tmode.logging[level] &&\n\t\t\tmode.logging.verbosity >= (verbosityRequirement ?? 0)\n\t\t) {\n\t\t\tlogger[level](message, method);\n\t\t}\n\n\t\tif (level === 'error' && mode.showAlerts) {\n\t\t\talert(message);\n\t\t}\n\t}\n\n\tconst appServices = { handleAsyncErrors, log };\n\n\tconsole.log('[FACTORIES.service] Created appServices:', appServices);\n\n\treturn {\n\t\thandleAsyncErrors,\n\t\tlog\n\t};\n}\n\nexport { createAppServices };\n"],"names":["mode"],"mappings":";;;AAAA;AAMA,eAAe,iBAAiB,GAAA;AAC/B,IAAA,OAAO,CAAC,GAAG,CAAC,kDAAkD,CAAC;AAE/D,IAAA,OAAO,CAAC,GAAG,CAAC,gDAAgD,CAAC;AAC7D,IAAA,MAAM,MAAM,GAAG,MAAM,YAAY,EAAE;AACnC,IAAA,OAAO,CAAC,GAAG,CAAC,qCAAqC,EAAE,MAAM,CAAC;IAE1D,eAAe,iBAAiB,CAC/B,MAAwB,EACxB,YAAoB,EACpB,MAAc,EACd,OAAiC,EAAA;AAEjC,QAAA,IAAI;YACH,OAAO,MAAM,MAAM,EAAE;;QACpB,OAAO,KAAK,EAAE;AACf,YAAwB;AACvB,gBAAA,MAAM,qBAAqB,GAC1B,KAAK,YAAY;AAChB,sBAAE,CAAA,EAAG,YAAY,CAAA,EAAA,EAAK,KAAK,CAAC,OAAO,CAAc,WAAA,EAAA,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAE;AAC1E,sBAAE,CAAA,EAAG,YAAY,CAAA,EAAA,EAAK,KAAK,CAAA,WAAA,EAAc,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE;AAEpE,gBAAA,MAAM,CAAC,KAAK,CAAC,qBAAqB,EAAE,MAAM,CAAC;;AAE5C,YAAA,OAAO,IAAI;;;IAIb,SAAS,GAAG,CACX,KAA0C,EAC1C,OAAe,EACf,MAAc,EACd,oBAA6B,EAAA;AAE7B,QAAA,IACCA,QAAI,CAAC,OAAO,CAAC,KAAK,CAAC;YACnBA,QAAI,CAAC,OAAO,CAAC,SAAS,KAAK,oBAAoB,IAAI,CAAC,CAAC,EACpD;YACD,MAAM,CAAC,KAAK,CAAC,CAAC,OAAO,EAAE,MAAM,CAAC;;QAG/B,IAAI,KAAK,KAAK,OAAO,IAAIA,QAAI,CAAC,UAAU,EAAE;YACzC,KAAK,CAAC,OAAO,CAAC;;;AAIhB,IAAA,MAAM,WAAW,GAAG,EAAE,iBAAiB,EAAE,GAAG,EAAE;AAE9C,IAAA,OAAO,CAAC,GAAG,CAAC,0CAA0C,EAAE,WAAW,CAAC;IAEpE,OAAO;QACN,iBAAiB;QACjB;KACA;AACF;;;;"}