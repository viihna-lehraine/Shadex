{"version":3,"file":"Logger.js","sources":["../../../../../src/common/services/Logger.ts"],"sourcesContent":["// File: common/services/Logger.js\n\nimport { Helpers, LoggerInterface, MutationLog } from '../../types/index.js';\nimport { config } from '../../config/index.js';\n\nconst mode = config.mode;\nconst debugLevel = mode.debugLevel;\n\nexport class Logger implements LoggerInterface {\n\tstatic #instance: Logger | null = null;\n\t#getCallerInfo: Helpers['data']['getCallerInfo'];\n\n\tconstructor(helpers: Helpers) {\n\t\tthis.#getCallerInfo = helpers.data.getCallerInfo;\n\t\tconsole.log('[Logger] Logger class constructor executed successfully.');\n\t}\n\n\tstatic getInstance(helpers: Helpers): Logger {\n\t\tconsole.log('[Logger] Executing getInstance().');\n\n\t\tif (!Logger.#instance) {\n\t\t\tconsole.log('[Logger] No instance found. Creating new instance.');\n\t\t\tLogger.#instance = new Logger(helpers);\n\t\t\tconsole.log('[Logger] Instance created.');\n\t\t}\n\n\t\tconsole.log('[Logger] Returning existing instance.');\n\t\treturn Logger.#instance;\n\t}\n\n\tlog(\n\t\tmessage: string,\n\t\tlevel: 'debug' | 'info' | 'warn' | 'error' = 'info',\n\t\tcaller?: string\n\t): void {\n\t\tif (debugLevel >= 5) {\n\t\t\tconsole.log(`[Logger.log] Log function CALLED with:`, {\n\t\t\t\tmessage,\n\t\t\t\tlevel,\n\t\t\t\tdebugLevel,\n\t\t\t\tcaller\n\t\t\t});\n\t\t}\n\t\tthis.#logMessage(message, level, caller);\n\t}\n\n\tlogMutation(\n\t\tdata: MutationLog,\n\t\tlogCallback: (data: MutationLog) => void = () => {}\n\t): void {\n\t\tthis.log(this.#formatMutationLog(data), 'info');\n\n\t\tlogCallback(data);\n\t}\n\n\t#logMessage(\n\t\tmessage: string,\n\t\tlevel: 'debug' | 'info' | 'warn' | 'error',\n\t\tcaller?: string\n\t): void {\n\t\tif (level === 'info' || debugLevel < this.#getDebugThreshold(level)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst callerInfo = caller || this.#getCallerInfo();\n\t\tconst timestamp = this.#getFormattedTimestamp();\n\n\t\ttry {\n\t\t\tconsole.log(\n\t\t\t\t`%c[${level.toUpperCase()}]%c ${timestamp} [${callerInfo}] %c${message}`,\n\t\t\t\tthis.#getLevelColor(level),\n\t\t\t\t'color: gray',\n\t\t\t\t'color: inherit'\n\t\t\t);\n\t\t} catch (error) {\n\t\t\tconsole.error(`Logger encountered an unexpected error: ${error}`);\n\t\t}\n\n\t\tif (\n\t\t\tcallerInfo === 'Unknown caller' &&\n\t\t\tdebugLevel > 1 &&\n\t\t\tmode.stackTrace\n\t\t) {\n\t\t\tconsole.trace('Full Stack Trace:');\n\t\t}\n\t}\n\n\t#formatMutationLog(data: MutationLog): string {\n\t\treturn `Mutation logged: ${JSON.stringify(data)}`;\n\t}\n\n\t#getDebugThreshold(level: 'debug' | 'info' | 'warn' | 'error'): number {\n\t\tswitch (level) {\n\t\t\tcase 'debug':\n\t\t\t\treturn 2;\n\t\t\tcase 'info':\n\t\t\t\treturn 1;\n\t\t\tcase 'warn':\n\t\t\t\treturn 0;\n\t\t\tcase 'error':\n\t\t\t\treturn 0;\n\t\t\tdefault:\n\t\t\t\treturn 0;\n\t\t}\n\t}\n\n\t#getFormattedTimestamp(): string {\n\t\treturn new Date().toLocaleString('en-US', {\n\t\t\tyear: 'numeric',\n\t\t\tmonth: '2-digit',\n\t\t\tday: '2-digit',\n\t\t\thour: '2-digit',\n\t\t\tminute: '2-digit',\n\t\t\tsecond: '2-digit',\n\t\t\thour12: false\n\t\t});\n\t}\n\n\t#getLevelColor(level: 'debug' | 'info' | 'warn' | 'error'): string {\n\t\tswitch (level) {\n\t\t\tcase 'debug':\n\t\t\t\treturn 'color: green';\n\t\t\tcase 'info':\n\t\t\t\treturn 'color: blue';\n\t\t\tcase 'warn':\n\t\t\t\treturn 'color: orange';\n\t\t\tcase 'error':\n\t\t\t\treturn 'color: red';\n\t\t\tdefault:\n\t\t\t\treturn 'color: black';\n\t\t}\n\t}\n}\n"],"names":[],"mappings":"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"}