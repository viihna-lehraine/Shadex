export function stripHashFromHex(hex) {
    return hex.hex.startsWith('#')
        ? { hex: hex.hex.slice(1), format: 'hex' }
        : hex;
}
export function addHashToHex(hex) {
    return hex.hex.startsWith('#')
        ? hex
        : { hex: `#${hex.hex}`, format: 'hex' };
}
// converts a component (0-255) to a 2-digit hex string
export function componentToHex(component) {
    try {
        const hex = Math.max(0, Math.min(255, component)).toString(16);
        return hex.length === 1 ? '0' + hex : hex;
    }
    catch (error) {
        console.error(`componentToHex error: ${error}`);
        return '00';
    }
}
export function colorObjectToColor(color) {
    if (color.format === 'cmyk') {
        const cyan = color.value.cyan;
        const magenta = color.value.magenta;
        const yellow = color.value.yellow;
        const key = color.value.key;
        const format = 'cmyk';
        return { cyan, magenta, yellow, key, format };
    }
    else if (color.format === 'hex') {
        const hex = color.value.hex;
        const format = 'hex';
        return { hex, format };
    }
    else if (color.format === 'hsl') {
        const hue = color.value.hue;
        const saturation = color.value.saturation;
        const lightness = color.value.lightness;
        const format = 'hsl';
        return { hue, saturation, lightness, format };
    }
    else if (color.format === 'hsv') {
        const hue = color.value.hue;
        const saturation = color.value.saturation;
        const value = color.value.value;
        const format = 'hsv';
        return { hue, saturation, value, format };
    }
    else if (color.format === 'lab') {
        const l = color.value.l;
        const a = color.value.a;
        const b = color.value.b;
        const format = 'lab';
        return { l, a, b, format };
    }
    else if (color.format === 'rgb') {
        const red = color.value.red;
        const green = color.value.green;
        const blue = color.value.blue;
        const format = 'rgb';
        return { red, green, blue, format };
    }
    else {
        console.error('Unrecognized color format');
        return null;
    }
}
export function colorToColorObject(color) {
    if (color.format === 'cmyk') {
        const value = {
            cyan: color.cyan,
            magenta: color.magenta,
            yellow: color.yellow,
            key: color.key
        };
        const format = 'cmyk';
        return { value, format };
    }
    else if (color.format === 'hex') {
        const value = { hex: color.hex };
        const format = 'hex';
        return { value, format };
    }
    else if (color.format === 'hsl') {
        const value = {
            hue: color.hue,
            saturation: color.saturation,
            lightness: color.lightness
        };
        const format = 'hsl';
        return { value, format };
    }
    else if (color.format === 'hsv') {
        const value = {
            hue: color.hue,
            saturation: color.saturation,
            value: color.value
        };
        const format = 'hsv';
        return { value, format };
    }
    else if (color.format === 'lab') {
        const value = {
            l: color.l,
            a: color.a,
            b: color.b
        };
        const format = 'lab';
        return { value, format };
    }
    else if (color.format === 'rgb') {
        const value = {
            red: color.red,
            green: color.green,
            blue: color.blue
        };
        const format = 'rgb';
        return { value, format };
    }
    else if (color.format === 'xyz') {
        const value = {
            x: color.x,
            y: color.y,
            z: color.z
        };
        const format = 'xyz';
        return { value, format };
    }
    else {
        console.error('Unrecognized color format');
        return null;
    }
}
export function colorStringToBareString(color) {
    if (!color) {
        console.error('Color is undefined. Cannot convert to bare string');
        return null;
    }
    if (color.format === 'cmyk') {
        return {
            cmyk: `cmyk(${color.cyan}, ${color.magenta}, ${color.yellow}, ${color.key})`,
            format: 'cmyk'
        };
    }
    else if (color.format === 'hex') {
        return color;
    }
    else if (color.format === 'hsl') {
        return {
            hsl: `hsl(${color.hue}, ${color.saturation}%, ${color.lightness}%)`,
            format: 'hsl'
        };
    }
    else if (color.format === 'hsv') {
        return {
            hsv: `hsv(${color.hue}, ${color.saturation}%, ${color.value}%)`,
            format: 'hsv'
        };
    }
    else if (color.format === 'lab') {
        return {
            lab: `lab(${color.l}, ${color.a}, ${color.b})`,
            format: 'lab'
        };
    }
    else if (color.format === 'sl') {
        return {
            sl: `sl(${color.saturation}%, ${color.lightness}%)`,
            format: 'sl'
        };
    }
    else if (color.format === 'sv') {
        return {
            sv: `sv(${color.saturation}%, ${color.value}%)`,
            format: 'sv'
        };
    }
    else if (color.format === 'rgb') {
        return {
            rgb: `rgb(${color.red}, ${color.green}, ${color.blue})`,
            format: 'rgb'
        };
    }
    else {
        console.error('Unrecognized color format');
        return null;
    }
}
export function createColorObjectData(format, value) {
    switch (format) {
        case 'cmyk':
            return { format, value: value };
        case 'hex':
            return { format, value: value };
        case 'hsl':
            return { format, value: value };
        case 'hsv':
            return { format, value: value };
        case 'lab':
            return { format, value: value };
        case 'rgb':
            return { format, value: value };
        case 'xyz':
            return { format, value: value };
        default:
            throw new Error(`Unsupported color format: ${format}`);
    }
}
export const parseColorValue = (format, value) => {
    switch (format) {
        case 'hex':
            return { hex: value, format: 'hex' };
        case 'rgb': {
            const [r, g, b] = value.split(',').map(Number);
            return { red: r, green: g, blue: b, format: 'rgb' };
        }
        case 'hsl': {
            const [h, s, l] = value.split(',').map(Number);
            return { hue: h, saturation: s, lightness: l, format: 'hsl' };
        }
        default:
            throw new Error(`Unsupported color format: ${format}`);
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJhbnNmb3Jtcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy91dGlscy90cmFuc2Zvcm1zLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE1BQU0sVUFBVSxnQkFBZ0IsQ0FBQyxHQUFjO0lBQzlDLE9BQU8sR0FBRyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDO1FBQzdCLENBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLEVBQUUsS0FBYyxFQUFFO1FBQ25ELENBQUMsQ0FBQyxHQUFHLENBQUM7QUFDUixDQUFDO0FBRUQsTUFBTSxVQUFVLFlBQVksQ0FBQyxHQUFjO0lBQzFDLE9BQU8sR0FBRyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDO1FBQzdCLENBQUMsQ0FBQyxHQUFHO1FBQ0wsQ0FBQyxDQUFDLEVBQUUsR0FBRyxFQUFFLElBQUksR0FBRyxDQUFDLEdBQUcsRUFBRSxFQUFFLE1BQU0sRUFBRSxLQUFjLEVBQUUsQ0FBQztBQUNuRCxDQUFDO0FBRUQsdURBQXVEO0FBQ3ZELE1BQU0sVUFBVSxjQUFjLENBQUMsU0FBaUI7SUFDL0MsSUFBSSxDQUFDO1FBQ0osTUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsU0FBUyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDL0QsT0FBTyxHQUFHLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO0lBQzNDLENBQUM7SUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO1FBQ2hCLE9BQU8sQ0FBQyxLQUFLLENBQUMseUJBQXlCLEtBQUssRUFBRSxDQUFDLENBQUM7UUFDaEQsT0FBTyxJQUFJLENBQUM7SUFDYixDQUFDO0FBQ0YsQ0FBQztBQUVELE1BQU0sVUFBVSxrQkFBa0IsQ0FDakMsS0FBNEI7SUFFNUIsSUFBSSxLQUFLLENBQUMsTUFBTSxLQUFLLE1BQU0sRUFBRSxDQUFDO1FBQzdCLE1BQU0sSUFBSSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDO1FBQzlCLE1BQU0sT0FBTyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDO1FBQ3BDLE1BQU0sTUFBTSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDO1FBQ2xDLE1BQU0sR0FBRyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDO1FBQzVCLE1BQU0sTUFBTSxHQUFXLE1BQU0sQ0FBQztRQUU5QixPQUFPLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBZ0IsQ0FBQztJQUM3RCxDQUFDO1NBQU0sSUFBSSxLQUFLLENBQUMsTUFBTSxLQUFLLEtBQUssRUFBRSxDQUFDO1FBQ25DLE1BQU0sR0FBRyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDO1FBQzVCLE1BQU0sTUFBTSxHQUFVLEtBQUssQ0FBQztRQUU1QixPQUFPLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBZSxDQUFDO0lBQ3JDLENBQUM7U0FBTSxJQUFJLEtBQUssQ0FBQyxNQUFNLEtBQUssS0FBSyxFQUFFLENBQUM7UUFDbkMsTUFBTSxHQUFHLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUM7UUFDNUIsTUFBTSxVQUFVLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUM7UUFDMUMsTUFBTSxTQUFTLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUM7UUFDeEMsTUFBTSxNQUFNLEdBQVUsS0FBSyxDQUFDO1FBRTVCLE9BQU8sRUFBRSxHQUFHLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQWUsQ0FBQztJQUM1RCxDQUFDO1NBQU0sSUFBSSxLQUFLLENBQUMsTUFBTSxLQUFLLEtBQUssRUFBRSxDQUFDO1FBQ25DLE1BQU0sR0FBRyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDO1FBQzVCLE1BQU0sVUFBVSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDO1FBQzFDLE1BQU0sS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDO1FBQ2hDLE1BQU0sTUFBTSxHQUFVLEtBQUssQ0FBQztRQUU1QixPQUFPLEVBQUUsR0FBRyxFQUFFLFVBQVUsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFlLENBQUM7SUFDeEQsQ0FBQztTQUFNLElBQUksS0FBSyxDQUFDLE1BQU0sS0FBSyxLQUFLLEVBQUUsQ0FBQztRQUNuQyxNQUFNLENBQUMsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUN4QixNQUFNLENBQUMsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUN4QixNQUFNLENBQUMsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUN4QixNQUFNLE1BQU0sR0FBVSxLQUFLLENBQUM7UUFFNUIsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBZSxDQUFDO0lBQ3pDLENBQUM7U0FBTSxJQUFJLEtBQUssQ0FBQyxNQUFNLEtBQUssS0FBSyxFQUFFLENBQUM7UUFDbkMsTUFBTSxHQUFHLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUM7UUFDNUIsTUFBTSxLQUFLLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUM7UUFDaEMsTUFBTSxJQUFJLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUM7UUFDOUIsTUFBTSxNQUFNLEdBQVUsS0FBSyxDQUFDO1FBRTVCLE9BQU8sRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQWUsQ0FBQztJQUNsRCxDQUFDO1NBQU0sQ0FBQztRQUNQLE9BQU8sQ0FBQyxLQUFLLENBQUMsMkJBQTJCLENBQUMsQ0FBQztRQUMzQyxPQUFPLElBQUksQ0FBQztJQUNiLENBQUM7QUFDRixDQUFDO0FBRUQsTUFBTSxVQUFVLGtCQUFrQixDQUNqQyxLQUFzQjtJQUV0QixJQUFJLEtBQUssQ0FBQyxNQUFNLEtBQUssTUFBTSxFQUFFLENBQUM7UUFDN0IsTUFBTSxLQUFLLEdBQUc7WUFDYixJQUFJLEVBQUUsS0FBSyxDQUFDLElBQUk7WUFDaEIsT0FBTyxFQUFFLEtBQUssQ0FBQyxPQUFPO1lBQ3RCLE1BQU0sRUFBRSxLQUFLLENBQUMsTUFBTTtZQUNwQixHQUFHLEVBQUUsS0FBSyxDQUFDLEdBQUc7U0FDZCxDQUFDO1FBQ0YsTUFBTSxNQUFNLEdBQVcsTUFBTSxDQUFDO1FBRTlCLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFzQixDQUFDO0lBQzlDLENBQUM7U0FBTSxJQUFJLEtBQUssQ0FBQyxNQUFNLEtBQUssS0FBSyxFQUFFLENBQUM7UUFDbkMsTUFBTSxLQUFLLEdBQUcsRUFBRSxHQUFHLEVBQUUsS0FBSyxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQ2pDLE1BQU0sTUFBTSxHQUFVLEtBQUssQ0FBQztRQUU1QixPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBcUIsQ0FBQztJQUM3QyxDQUFDO1NBQU0sSUFBSSxLQUFLLENBQUMsTUFBTSxLQUFLLEtBQUssRUFBRSxDQUFDO1FBQ25DLE1BQU0sS0FBSyxHQUFHO1lBQ2IsR0FBRyxFQUFFLEtBQUssQ0FBQyxHQUFHO1lBQ2QsVUFBVSxFQUFFLEtBQUssQ0FBQyxVQUFVO1lBQzVCLFNBQVMsRUFBRSxLQUFLLENBQUMsU0FBUztTQUMxQixDQUFDO1FBQ0YsTUFBTSxNQUFNLEdBQVUsS0FBSyxDQUFDO1FBRTVCLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFxQixDQUFDO0lBQzdDLENBQUM7U0FBTSxJQUFJLEtBQUssQ0FBQyxNQUFNLEtBQUssS0FBSyxFQUFFLENBQUM7UUFDbkMsTUFBTSxLQUFLLEdBQUc7WUFDYixHQUFHLEVBQUUsS0FBSyxDQUFDLEdBQUc7WUFDZCxVQUFVLEVBQUUsS0FBSyxDQUFDLFVBQVU7WUFDNUIsS0FBSyxFQUFFLEtBQUssQ0FBQyxLQUFLO1NBQ2xCLENBQUM7UUFDRixNQUFNLE1BQU0sR0FBVSxLQUFLLENBQUM7UUFFNUIsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQXFCLENBQUM7SUFDN0MsQ0FBQztTQUFNLElBQUksS0FBSyxDQUFDLE1BQU0sS0FBSyxLQUFLLEVBQUUsQ0FBQztRQUNuQyxNQUFNLEtBQUssR0FBRztZQUNiLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUNWLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztZQUNWLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztTQUNWLENBQUM7UUFDRixNQUFNLE1BQU0sR0FBVSxLQUFLLENBQUM7UUFFNUIsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQXFCLENBQUM7SUFDN0MsQ0FBQztTQUFNLElBQUksS0FBSyxDQUFDLE1BQU0sS0FBSyxLQUFLLEVBQUUsQ0FBQztRQUNuQyxNQUFNLEtBQUssR0FBRztZQUNiLEdBQUcsRUFBRSxLQUFLLENBQUMsR0FBRztZQUNkLEtBQUssRUFBRSxLQUFLLENBQUMsS0FBSztZQUNsQixJQUFJLEVBQUUsS0FBSyxDQUFDLElBQUk7U0FDaEIsQ0FBQztRQUNGLE1BQU0sTUFBTSxHQUFVLEtBQUssQ0FBQztRQUU1QixPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBcUIsQ0FBQztJQUM3QyxDQUFDO1NBQU0sSUFBSSxLQUFLLENBQUMsTUFBTSxLQUFLLEtBQUssRUFBRSxDQUFDO1FBQ25DLE1BQU0sS0FBSyxHQUFHO1lBQ2IsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBQ1YsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBQ1YsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO1NBQ1YsQ0FBQztRQUNGLE1BQU0sTUFBTSxHQUFVLEtBQUssQ0FBQztRQUU1QixPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBcUIsQ0FBQztJQUM3QyxDQUFDO1NBQU0sQ0FBQztRQUNQLE9BQU8sQ0FBQyxLQUFLLENBQUMsMkJBQTJCLENBQUMsQ0FBQztRQUMzQyxPQUFPLElBQUksQ0FBQztJQUNiLENBQUM7QUFDRixDQUFDO0FBRUQsTUFBTSxVQUFVLHVCQUF1QixDQUN0QyxLQUE2QjtJQUU3QixJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDWixPQUFPLENBQUMsS0FBSyxDQUFDLG1EQUFtRCxDQUFDLENBQUM7UUFDbkUsT0FBTyxJQUFJLENBQUM7SUFDYixDQUFDO0lBRUQsSUFBSSxLQUFLLENBQUMsTUFBTSxLQUFLLE1BQU0sRUFBRSxDQUFDO1FBQzdCLE9BQU87WUFDTixJQUFJLEVBQUUsUUFBUSxLQUFLLENBQUMsSUFBSSxLQUFLLEtBQUssQ0FBQyxPQUFPLEtBQUssS0FBSyxDQUFDLE1BQU0sS0FBSyxLQUFLLENBQUMsR0FBRyxHQUFHO1lBQzVFLE1BQU0sRUFBRSxNQUFNO1NBQ2QsQ0FBQztJQUNILENBQUM7U0FBTSxJQUFJLEtBQUssQ0FBQyxNQUFNLEtBQUssS0FBSyxFQUFFLENBQUM7UUFDbkMsT0FBTyxLQUFLLENBQUM7SUFDZCxDQUFDO1NBQU0sSUFBSSxLQUFLLENBQUMsTUFBTSxLQUFLLEtBQUssRUFBRSxDQUFDO1FBQ25DLE9BQU87WUFDTixHQUFHLEVBQUUsT0FBTyxLQUFLLENBQUMsR0FBRyxLQUFLLEtBQUssQ0FBQyxVQUFVLE1BQU0sS0FBSyxDQUFDLFNBQVMsSUFBSTtZQUNuRSxNQUFNLEVBQUUsS0FBSztTQUNiLENBQUM7SUFDSCxDQUFDO1NBQU0sSUFBSSxLQUFLLENBQUMsTUFBTSxLQUFLLEtBQUssRUFBRSxDQUFDO1FBQ25DLE9BQU87WUFDTixHQUFHLEVBQUUsT0FBTyxLQUFLLENBQUMsR0FBRyxLQUFLLEtBQUssQ0FBQyxVQUFVLE1BQU0sS0FBSyxDQUFDLEtBQUssSUFBSTtZQUMvRCxNQUFNLEVBQUUsS0FBSztTQUNiLENBQUM7SUFDSCxDQUFDO1NBQU0sSUFBSSxLQUFLLENBQUMsTUFBTSxLQUFLLEtBQUssRUFBRSxDQUFDO1FBQ25DLE9BQU87WUFDTixHQUFHLEVBQUUsT0FBTyxLQUFLLENBQUMsQ0FBQyxLQUFLLEtBQUssQ0FBQyxDQUFDLEtBQUssS0FBSyxDQUFDLENBQUMsR0FBRztZQUM5QyxNQUFNLEVBQUUsS0FBSztTQUNiLENBQUM7SUFDSCxDQUFDO1NBQU0sSUFBSSxLQUFLLENBQUMsTUFBTSxLQUFLLElBQUksRUFBRSxDQUFDO1FBQ2xDLE9BQU87WUFDTixFQUFFLEVBQUUsTUFBTSxLQUFLLENBQUMsVUFBVSxNQUFNLEtBQUssQ0FBQyxTQUFTLElBQUk7WUFDbkQsTUFBTSxFQUFFLElBQUk7U0FDWixDQUFDO0lBQ0gsQ0FBQztTQUFNLElBQUksS0FBSyxDQUFDLE1BQU0sS0FBSyxJQUFJLEVBQUUsQ0FBQztRQUNsQyxPQUFPO1lBQ04sRUFBRSxFQUFFLE1BQU0sS0FBSyxDQUFDLFVBQVUsTUFBTSxLQUFLLENBQUMsS0FBSyxJQUFJO1lBQy9DLE1BQU0sRUFBRSxJQUFJO1NBQ1osQ0FBQztJQUNILENBQUM7U0FBTSxJQUFJLEtBQUssQ0FBQyxNQUFNLEtBQUssS0FBSyxFQUFFLENBQUM7UUFDbkMsT0FBTztZQUNOLEdBQUcsRUFBRSxPQUFPLEtBQUssQ0FBQyxHQUFHLEtBQUssS0FBSyxDQUFDLEtBQUssS0FBSyxLQUFLLENBQUMsSUFBSSxHQUFHO1lBQ3ZELE1BQU0sRUFBRSxLQUFLO1NBQ2IsQ0FBQztJQUNILENBQUM7U0FBTSxDQUFDO1FBQ1AsT0FBTyxDQUFDLEtBQUssQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO1FBQzNDLE9BQU8sSUFBSSxDQUFDO0lBQ2IsQ0FBQztBQUNGLENBQUM7QUFFRCxNQUFNLFVBQVUscUJBQXFCLENBQ3BDLE1BQStCLEVBQy9CLEtBQXNCO0lBRXRCLFFBQVEsTUFBTSxFQUFFLENBQUM7UUFDaEIsS0FBSyxNQUFNO1lBQ1YsT0FBTyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsS0FBa0MsRUFBRSxDQUFDO1FBQzlELEtBQUssS0FBSztZQUNULE9BQU8sRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLEtBQWlDLEVBQUUsQ0FBQztRQUM3RCxLQUFLLEtBQUs7WUFDVCxPQUFPLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxLQUFpQyxFQUFFLENBQUM7UUFDN0QsS0FBSyxLQUFLO1lBQ1QsT0FBTyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsS0FBaUMsRUFBRSxDQUFDO1FBQzdELEtBQUssS0FBSztZQUNULE9BQU8sRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLEtBQWlDLEVBQUUsQ0FBQztRQUM3RCxLQUFLLEtBQUs7WUFDVCxPQUFPLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxLQUFpQyxFQUFFLENBQUM7UUFDN0QsS0FBSyxLQUFLO1lBQ1QsT0FBTyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsS0FBaUMsRUFBRSxDQUFDO1FBQzdEO1lBQ0MsTUFBTSxJQUFJLEtBQUssQ0FBQyw2QkFBNkIsTUFBTSxFQUFFLENBQUMsQ0FBQztJQUN6RCxDQUFDO0FBQ0YsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLGVBQWUsR0FBRyxDQUM5QixNQUErQixFQUMvQixLQUFhLEVBQ0ssRUFBRTtJQUNwQixRQUFRLE1BQU0sRUFBRSxDQUFDO1FBQ2hCLEtBQUssS0FBSztZQUNULE9BQU8sRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsQ0FBQztRQUN0QyxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFDWixNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUMvQyxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxDQUFDO1FBQ3JELENBQUM7UUFDRCxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFDWixNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUMvQyxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxVQUFVLEVBQUUsQ0FBQyxFQUFFLFNBQVMsRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxDQUFDO1FBQy9ELENBQUM7UUFDRDtZQUNDLE1BQU0sSUFBSSxLQUFLLENBQUMsNkJBQTZCLE1BQU0sRUFBRSxDQUFDLENBQUM7SUFDekQsQ0FBQztBQUNGLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHR5cGVzIGZyb20gJy4uL2luZGV4JztcblxuZXhwb3J0IGZ1bmN0aW9uIHN0cmlwSGFzaEZyb21IZXgoaGV4OiB0eXBlcy5IZXgpOiB0eXBlcy5IZXgge1xuXHRyZXR1cm4gaGV4LmhleC5zdGFydHNXaXRoKCcjJylcblx0XHQ/IHsgaGV4OiBoZXguaGV4LnNsaWNlKDEpLCBmb3JtYXQ6ICdoZXgnIGFzIGNvbnN0IH1cblx0XHQ6IGhleDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZEhhc2hUb0hleChoZXg6IHR5cGVzLkhleCk6IHR5cGVzLkhleCB7XG5cdHJldHVybiBoZXguaGV4LnN0YXJ0c1dpdGgoJyMnKVxuXHRcdD8gaGV4XG5cdFx0OiB7IGhleDogYCMke2hleC5oZXh9YCwgZm9ybWF0OiAnaGV4JyBhcyBjb25zdCB9O1xufVxuXG4vLyBjb252ZXJ0cyBhIGNvbXBvbmVudCAoMC0yNTUpIHRvIGEgMi1kaWdpdCBoZXggc3RyaW5nXG5leHBvcnQgZnVuY3Rpb24gY29tcG9uZW50VG9IZXgoY29tcG9uZW50OiBudW1iZXIpOiBzdHJpbmcge1xuXHR0cnkge1xuXHRcdGNvbnN0IGhleCA9IE1hdGgubWF4KDAsIE1hdGgubWluKDI1NSwgY29tcG9uZW50KSkudG9TdHJpbmcoMTYpO1xuXHRcdHJldHVybiBoZXgubGVuZ3RoID09PSAxID8gJzAnICsgaGV4IDogaGV4O1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGNvbnNvbGUuZXJyb3IoYGNvbXBvbmVudFRvSGV4IGVycm9yOiAke2Vycm9yfWApO1xuXHRcdHJldHVybiAnMDAnO1xuXHR9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb2xvck9iamVjdFRvQ29sb3IoXG5cdGNvbG9yOiB0eXBlcy5Db2xvck9iamVjdERhdGFcbik6IHR5cGVzLkNvbG9yRGF0YSB8IG51bGwge1xuXHRpZiAoY29sb3IuZm9ybWF0ID09PSAnY215aycpIHtcblx0XHRjb25zdCBjeWFuID0gY29sb3IudmFsdWUuY3lhbjtcblx0XHRjb25zdCBtYWdlbnRhID0gY29sb3IudmFsdWUubWFnZW50YTtcblx0XHRjb25zdCB5ZWxsb3cgPSBjb2xvci52YWx1ZS55ZWxsb3c7XG5cdFx0Y29uc3Qga2V5ID0gY29sb3IudmFsdWUua2V5O1xuXHRcdGNvbnN0IGZvcm1hdDogJ2NteWsnID0gJ2NteWsnO1xuXG5cdFx0cmV0dXJuIHsgY3lhbiwgbWFnZW50YSwgeWVsbG93LCBrZXksIGZvcm1hdCB9IGFzIHR5cGVzLkNNWUs7XG5cdH0gZWxzZSBpZiAoY29sb3IuZm9ybWF0ID09PSAnaGV4Jykge1xuXHRcdGNvbnN0IGhleCA9IGNvbG9yLnZhbHVlLmhleDtcblx0XHRjb25zdCBmb3JtYXQ6ICdoZXgnID0gJ2hleCc7XG5cblx0XHRyZXR1cm4geyBoZXgsIGZvcm1hdCB9IGFzIHR5cGVzLkhleDtcblx0fSBlbHNlIGlmIChjb2xvci5mb3JtYXQgPT09ICdoc2wnKSB7XG5cdFx0Y29uc3QgaHVlID0gY29sb3IudmFsdWUuaHVlO1xuXHRcdGNvbnN0IHNhdHVyYXRpb24gPSBjb2xvci52YWx1ZS5zYXR1cmF0aW9uO1xuXHRcdGNvbnN0IGxpZ2h0bmVzcyA9IGNvbG9yLnZhbHVlLmxpZ2h0bmVzcztcblx0XHRjb25zdCBmb3JtYXQ6ICdoc2wnID0gJ2hzbCc7XG5cblx0XHRyZXR1cm4geyBodWUsIHNhdHVyYXRpb24sIGxpZ2h0bmVzcywgZm9ybWF0IH0gYXMgdHlwZXMuSFNMO1xuXHR9IGVsc2UgaWYgKGNvbG9yLmZvcm1hdCA9PT0gJ2hzdicpIHtcblx0XHRjb25zdCBodWUgPSBjb2xvci52YWx1ZS5odWU7XG5cdFx0Y29uc3Qgc2F0dXJhdGlvbiA9IGNvbG9yLnZhbHVlLnNhdHVyYXRpb247XG5cdFx0Y29uc3QgdmFsdWUgPSBjb2xvci52YWx1ZS52YWx1ZTtcblx0XHRjb25zdCBmb3JtYXQ6ICdoc3YnID0gJ2hzdic7XG5cblx0XHRyZXR1cm4geyBodWUsIHNhdHVyYXRpb24sIHZhbHVlLCBmb3JtYXQgfSBhcyB0eXBlcy5IU1Y7XG5cdH0gZWxzZSBpZiAoY29sb3IuZm9ybWF0ID09PSAnbGFiJykge1xuXHRcdGNvbnN0IGwgPSBjb2xvci52YWx1ZS5sO1xuXHRcdGNvbnN0IGEgPSBjb2xvci52YWx1ZS5hO1xuXHRcdGNvbnN0IGIgPSBjb2xvci52YWx1ZS5iO1xuXHRcdGNvbnN0IGZvcm1hdDogJ2xhYicgPSAnbGFiJztcblxuXHRcdHJldHVybiB7IGwsIGEsIGIsIGZvcm1hdCB9IGFzIHR5cGVzLkxBQjtcblx0fSBlbHNlIGlmIChjb2xvci5mb3JtYXQgPT09ICdyZ2InKSB7XG5cdFx0Y29uc3QgcmVkID0gY29sb3IudmFsdWUucmVkO1xuXHRcdGNvbnN0IGdyZWVuID0gY29sb3IudmFsdWUuZ3JlZW47XG5cdFx0Y29uc3QgYmx1ZSA9IGNvbG9yLnZhbHVlLmJsdWU7XG5cdFx0Y29uc3QgZm9ybWF0OiAncmdiJyA9ICdyZ2InO1xuXG5cdFx0cmV0dXJuIHsgcmVkLCBncmVlbiwgYmx1ZSwgZm9ybWF0IH0gYXMgdHlwZXMuUkdCO1xuXHR9IGVsc2Uge1xuXHRcdGNvbnNvbGUuZXJyb3IoJ1VucmVjb2duaXplZCBjb2xvciBmb3JtYXQnKTtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY29sb3JUb0NvbG9yT2JqZWN0KFxuXHRjb2xvcjogdHlwZXMuQ29sb3JEYXRhXG4pOiB0eXBlcy5Db2xvck9iamVjdERhdGEgfCBudWxsIHtcblx0aWYgKGNvbG9yLmZvcm1hdCA9PT0gJ2NteWsnKSB7XG5cdFx0Y29uc3QgdmFsdWUgPSB7XG5cdFx0XHRjeWFuOiBjb2xvci5jeWFuLFxuXHRcdFx0bWFnZW50YTogY29sb3IubWFnZW50YSxcblx0XHRcdHllbGxvdzogY29sb3IueWVsbG93LFxuXHRcdFx0a2V5OiBjb2xvci5rZXlcblx0XHR9O1xuXHRcdGNvbnN0IGZvcm1hdDogJ2NteWsnID0gJ2NteWsnO1xuXG5cdFx0cmV0dXJuIHsgdmFsdWUsIGZvcm1hdCB9IGFzIHR5cGVzLkNNWUtPYmplY3Q7XG5cdH0gZWxzZSBpZiAoY29sb3IuZm9ybWF0ID09PSAnaGV4Jykge1xuXHRcdGNvbnN0IHZhbHVlID0geyBoZXg6IGNvbG9yLmhleCB9O1xuXHRcdGNvbnN0IGZvcm1hdDogJ2hleCcgPSAnaGV4JztcblxuXHRcdHJldHVybiB7IHZhbHVlLCBmb3JtYXQgfSBhcyB0eXBlcy5IZXhPYmplY3Q7XG5cdH0gZWxzZSBpZiAoY29sb3IuZm9ybWF0ID09PSAnaHNsJykge1xuXHRcdGNvbnN0IHZhbHVlID0ge1xuXHRcdFx0aHVlOiBjb2xvci5odWUsXG5cdFx0XHRzYXR1cmF0aW9uOiBjb2xvci5zYXR1cmF0aW9uLFxuXHRcdFx0bGlnaHRuZXNzOiBjb2xvci5saWdodG5lc3Ncblx0XHR9O1xuXHRcdGNvbnN0IGZvcm1hdDogJ2hzbCcgPSAnaHNsJztcblxuXHRcdHJldHVybiB7IHZhbHVlLCBmb3JtYXQgfSBhcyB0eXBlcy5IU0xPYmplY3Q7XG5cdH0gZWxzZSBpZiAoY29sb3IuZm9ybWF0ID09PSAnaHN2Jykge1xuXHRcdGNvbnN0IHZhbHVlID0ge1xuXHRcdFx0aHVlOiBjb2xvci5odWUsXG5cdFx0XHRzYXR1cmF0aW9uOiBjb2xvci5zYXR1cmF0aW9uLFxuXHRcdFx0dmFsdWU6IGNvbG9yLnZhbHVlXG5cdFx0fTtcblx0XHRjb25zdCBmb3JtYXQ6ICdoc3YnID0gJ2hzdic7XG5cblx0XHRyZXR1cm4geyB2YWx1ZSwgZm9ybWF0IH0gYXMgdHlwZXMuSFNWT2JqZWN0O1xuXHR9IGVsc2UgaWYgKGNvbG9yLmZvcm1hdCA9PT0gJ2xhYicpIHtcblx0XHRjb25zdCB2YWx1ZSA9IHtcblx0XHRcdGw6IGNvbG9yLmwsXG5cdFx0XHRhOiBjb2xvci5hLFxuXHRcdFx0YjogY29sb3IuYlxuXHRcdH07XG5cdFx0Y29uc3QgZm9ybWF0OiAnbGFiJyA9ICdsYWInO1xuXG5cdFx0cmV0dXJuIHsgdmFsdWUsIGZvcm1hdCB9IGFzIHR5cGVzLkxBQk9iamVjdDtcblx0fSBlbHNlIGlmIChjb2xvci5mb3JtYXQgPT09ICdyZ2InKSB7XG5cdFx0Y29uc3QgdmFsdWUgPSB7XG5cdFx0XHRyZWQ6IGNvbG9yLnJlZCxcblx0XHRcdGdyZWVuOiBjb2xvci5ncmVlbixcblx0XHRcdGJsdWU6IGNvbG9yLmJsdWVcblx0XHR9O1xuXHRcdGNvbnN0IGZvcm1hdDogJ3JnYicgPSAncmdiJztcblxuXHRcdHJldHVybiB7IHZhbHVlLCBmb3JtYXQgfSBhcyB0eXBlcy5SR0JPYmplY3Q7XG5cdH0gZWxzZSBpZiAoY29sb3IuZm9ybWF0ID09PSAneHl6Jykge1xuXHRcdGNvbnN0IHZhbHVlID0ge1xuXHRcdFx0eDogY29sb3IueCxcblx0XHRcdHk6IGNvbG9yLnksXG5cdFx0XHR6OiBjb2xvci56XG5cdFx0fTtcblx0XHRjb25zdCBmb3JtYXQ6ICd4eXonID0gJ3h5eic7XG5cblx0XHRyZXR1cm4geyB2YWx1ZSwgZm9ybWF0IH0gYXMgdHlwZXMuWFlaT2JqZWN0O1xuXHR9IGVsc2Uge1xuXHRcdGNvbnNvbGUuZXJyb3IoJ1VucmVjb2duaXplZCBjb2xvciBmb3JtYXQnKTtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY29sb3JTdHJpbmdUb0JhcmVTdHJpbmcoXG5cdGNvbG9yOiB0eXBlcy5Db2xvclN0cmluZ0luZGV4XG4pOiB0eXBlcy5Db2xvckJhcmVTdHJpbmdJbmRleCB8IG51bGwge1xuXHRpZiAoIWNvbG9yKSB7XG5cdFx0Y29uc29sZS5lcnJvcignQ29sb3IgaXMgdW5kZWZpbmVkLiBDYW5ub3QgY29udmVydCB0byBiYXJlIHN0cmluZycpO1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblx0aWYgKGNvbG9yLmZvcm1hdCA9PT0gJ2NteWsnKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGNteWs6IGBjbXlrKCR7Y29sb3IuY3lhbn0sICR7Y29sb3IubWFnZW50YX0sICR7Y29sb3IueWVsbG93fSwgJHtjb2xvci5rZXl9KWAsXG5cdFx0XHRmb3JtYXQ6ICdjbXlrJ1xuXHRcdH07XG5cdH0gZWxzZSBpZiAoY29sb3IuZm9ybWF0ID09PSAnaGV4Jykge1xuXHRcdHJldHVybiBjb2xvcjtcblx0fSBlbHNlIGlmIChjb2xvci5mb3JtYXQgPT09ICdoc2wnKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGhzbDogYGhzbCgke2NvbG9yLmh1ZX0sICR7Y29sb3Iuc2F0dXJhdGlvbn0lLCAke2NvbG9yLmxpZ2h0bmVzc30lKWAsXG5cdFx0XHRmb3JtYXQ6ICdoc2wnXG5cdFx0fTtcblx0fSBlbHNlIGlmIChjb2xvci5mb3JtYXQgPT09ICdoc3YnKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGhzdjogYGhzdigke2NvbG9yLmh1ZX0sICR7Y29sb3Iuc2F0dXJhdGlvbn0lLCAke2NvbG9yLnZhbHVlfSUpYCxcblx0XHRcdGZvcm1hdDogJ2hzdidcblx0XHR9O1xuXHR9IGVsc2UgaWYgKGNvbG9yLmZvcm1hdCA9PT0gJ2xhYicpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0bGFiOiBgbGFiKCR7Y29sb3IubH0sICR7Y29sb3IuYX0sICR7Y29sb3IuYn0pYCxcblx0XHRcdGZvcm1hdDogJ2xhYidcblx0XHR9O1xuXHR9IGVsc2UgaWYgKGNvbG9yLmZvcm1hdCA9PT0gJ3NsJykge1xuXHRcdHJldHVybiB7XG5cdFx0XHRzbDogYHNsKCR7Y29sb3Iuc2F0dXJhdGlvbn0lLCAke2NvbG9yLmxpZ2h0bmVzc30lKWAsXG5cdFx0XHRmb3JtYXQ6ICdzbCdcblx0XHR9O1xuXHR9IGVsc2UgaWYgKGNvbG9yLmZvcm1hdCA9PT0gJ3N2Jykge1xuXHRcdHJldHVybiB7XG5cdFx0XHRzdjogYHN2KCR7Y29sb3Iuc2F0dXJhdGlvbn0lLCAke2NvbG9yLnZhbHVlfSUpYCxcblx0XHRcdGZvcm1hdDogJ3N2J1xuXHRcdH07XG5cdH0gZWxzZSBpZiAoY29sb3IuZm9ybWF0ID09PSAncmdiJykge1xuXHRcdHJldHVybiB7XG5cdFx0XHRyZ2I6IGByZ2IoJHtjb2xvci5yZWR9LCAke2NvbG9yLmdyZWVufSwgJHtjb2xvci5ibHVlfSlgLFxuXHRcdFx0Zm9ybWF0OiAncmdiJ1xuXHRcdH07XG5cdH0gZWxzZSB7XG5cdFx0Y29uc29sZS5lcnJvcignVW5yZWNvZ25pemVkIGNvbG9yIGZvcm1hdCcpO1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDb2xvck9iamVjdERhdGEoXG5cdGZvcm1hdDogdHlwZXMuQ29sb3JTcGFjZUZvcm1hdHMsXG5cdHZhbHVlOiB0eXBlcy5Db2xvckRhdGFcbik6IHR5cGVzLkNvbG9yT2JqZWN0RGF0YSB7XG5cdHN3aXRjaCAoZm9ybWF0KSB7XG5cdFx0Y2FzZSAnY215ayc6XG5cdFx0XHRyZXR1cm4geyBmb3JtYXQsIHZhbHVlOiB2YWx1ZSBhcyB0eXBlcy5DTVlLT2JqZWN0Wyd2YWx1ZSddIH07XG5cdFx0Y2FzZSAnaGV4Jzpcblx0XHRcdHJldHVybiB7IGZvcm1hdCwgdmFsdWU6IHZhbHVlIGFzIHR5cGVzLkhleE9iamVjdFsndmFsdWUnXSB9O1xuXHRcdGNhc2UgJ2hzbCc6XG5cdFx0XHRyZXR1cm4geyBmb3JtYXQsIHZhbHVlOiB2YWx1ZSBhcyB0eXBlcy5IU0xPYmplY3RbJ3ZhbHVlJ10gfTtcblx0XHRjYXNlICdoc3YnOlxuXHRcdFx0cmV0dXJuIHsgZm9ybWF0LCB2YWx1ZTogdmFsdWUgYXMgdHlwZXMuSFNWT2JqZWN0Wyd2YWx1ZSddIH07XG5cdFx0Y2FzZSAnbGFiJzpcblx0XHRcdHJldHVybiB7IGZvcm1hdCwgdmFsdWU6IHZhbHVlIGFzIHR5cGVzLkxBQk9iamVjdFsndmFsdWUnXSB9O1xuXHRcdGNhc2UgJ3JnYic6XG5cdFx0XHRyZXR1cm4geyBmb3JtYXQsIHZhbHVlOiB2YWx1ZSBhcyB0eXBlcy5SR0JPYmplY3RbJ3ZhbHVlJ10gfTtcblx0XHRjYXNlICd4eXonOlxuXHRcdFx0cmV0dXJuIHsgZm9ybWF0LCB2YWx1ZTogdmFsdWUgYXMgdHlwZXMuWFlaT2JqZWN0Wyd2YWx1ZSddIH07XG5cdFx0ZGVmYXVsdDpcblx0XHRcdHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgY29sb3IgZm9ybWF0OiAke2Zvcm1hdH1gKTtcblx0fVxufVxuXG5leHBvcnQgY29uc3QgcGFyc2VDb2xvclZhbHVlID0gKFxuXHRmb3JtYXQ6IHR5cGVzLkNvbG9yU3BhY2VGb3JtYXRzLFxuXHR2YWx1ZTogc3RyaW5nXG4pOiB0eXBlcy5Db2xvckRhdGEgPT4ge1xuXHRzd2l0Y2ggKGZvcm1hdCkge1xuXHRcdGNhc2UgJ2hleCc6XG5cdFx0XHRyZXR1cm4geyBoZXg6IHZhbHVlLCBmb3JtYXQ6ICdoZXgnIH07XG5cdFx0Y2FzZSAncmdiJzoge1xuXHRcdFx0Y29uc3QgW3IsIGcsIGJdID0gdmFsdWUuc3BsaXQoJywnKS5tYXAoTnVtYmVyKTtcblx0XHRcdHJldHVybiB7IHJlZDogciwgZ3JlZW46IGcsIGJsdWU6IGIsIGZvcm1hdDogJ3JnYicgfTtcblx0XHR9XG5cdFx0Y2FzZSAnaHNsJzoge1xuXHRcdFx0Y29uc3QgW2gsIHMsIGxdID0gdmFsdWUuc3BsaXQoJywnKS5tYXAoTnVtYmVyKTtcblx0XHRcdHJldHVybiB7IGh1ZTogaCwgc2F0dXJhdGlvbjogcywgbGlnaHRuZXNzOiBsLCBmb3JtYXQ6ICdoc2wnIH07XG5cdFx0fVxuXHRcdGRlZmF1bHQ6XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIGNvbG9yIGZvcm1hdDogJHtmb3JtYXR9YCk7XG5cdH1cbn07XG4iXX0=