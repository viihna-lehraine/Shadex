// File: src/paelette/common/paletteUtils/probability.js
import { data } from '../../../data/index.js';
import { log } from '../../../classes/logger/index.js';
const logMode = data.mode.logging;
const probabilities = data.consts.probabilities;
function getWeightedRandomInterval() {
    try {
        const weights = probabilities.weights;
        const probabilityValues = probabilities.values;
        const cumulativeProbabilities = probabilityValues.reduce((acc, prob, i) => {
            acc[i] = (acc[i - 1] || 0) + prob;
            return acc;
        }, []);
        const random = Math.random();
        for (let i = 0; i < cumulativeProbabilities.length; i++) {
            if (random < cumulativeProbabilities[i]) {
                return weights[i];
            }
        }
        return weights[weights.length - 1];
    }
    catch (error) {
        if (logMode.errors)
            log.error(`Error generating weighted random interval: ${error}`);
        return 50;
    }
}
export const probability = {
    getWeightedRandomInterval
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvYmFiaWxpdHkuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvcGFsZXR0ZS9jb21tb24vcGFsZXR0ZVV0aWxzL3Byb2JhYmlsaXR5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLHdEQUF3RDtBQUd4RCxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDOUMsT0FBTyxFQUFFLEdBQUcsRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBRXZELE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDO0FBQ2xDLE1BQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDO0FBRWhELFNBQVMseUJBQXlCO0lBQ2pDLElBQUksQ0FBQztRQUNKLE1BQU0sT0FBTyxHQUFHLGFBQWEsQ0FBQyxPQUFPLENBQUM7UUFDdEMsTUFBTSxpQkFBaUIsR0FBRyxhQUFhLENBQUMsTUFBTSxDQUFDO1FBQy9DLE1BQU0sdUJBQXVCLEdBQWEsaUJBQWlCLENBQUMsTUFBTSxDQUNqRSxDQUFDLEdBQWEsRUFBRSxJQUFZLEVBQUUsQ0FBUyxFQUFFLEVBQUU7WUFDMUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUM7WUFDbEMsT0FBTyxHQUFHLENBQUM7UUFDWixDQUFDLEVBQ0QsRUFBRSxDQUNGLENBQUM7UUFDRixNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7UUFFN0IsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLHVCQUF1QixDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO1lBQ3pELElBQUksTUFBTSxHQUFHLHVCQUF1QixDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7Z0JBQ3pDLE9BQU8sT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ25CLENBQUM7UUFDRixDQUFDO1FBRUQsT0FBTyxPQUFPLENBQUMsT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztJQUNwQyxDQUFDO0lBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztRQUNoQixJQUFJLE9BQU8sQ0FBQyxNQUFNO1lBQ2pCLEdBQUcsQ0FBQyxLQUFLLENBQUMsOENBQThDLEtBQUssRUFBRSxDQUFDLENBQUM7UUFFbEUsT0FBTyxFQUFFLENBQUM7SUFDWCxDQUFDO0FBQ0YsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLFdBQVcsR0FBb0M7SUFDM0QseUJBQXlCO0NBQ2hCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBGaWxlOiBzcmMvcGFlbGV0dGUvY29tbW9uL3BhbGV0dGVVdGlscy9wcm9iYWJpbGl0eS5qc1xuXG5pbXBvcnQgeyBQYWxldHRlQ29tbW9uX1V0aWxzX1Byb2JhYmlsaXR5IH0gZnJvbSAnLi4vLi4vLi4vaW5kZXgvaW5kZXguanMnO1xuaW1wb3J0IHsgZGF0YSB9IGZyb20gJy4uLy4uLy4uL2RhdGEvaW5kZXguanMnO1xuaW1wb3J0IHsgbG9nIH0gZnJvbSAnLi4vLi4vLi4vY2xhc3Nlcy9sb2dnZXIvaW5kZXguanMnO1xuXG5jb25zdCBsb2dNb2RlID0gZGF0YS5tb2RlLmxvZ2dpbmc7XG5jb25zdCBwcm9iYWJpbGl0aWVzID0gZGF0YS5jb25zdHMucHJvYmFiaWxpdGllcztcblxuZnVuY3Rpb24gZ2V0V2VpZ2h0ZWRSYW5kb21JbnRlcnZhbCgpOiBudW1iZXIge1xuXHR0cnkge1xuXHRcdGNvbnN0IHdlaWdodHMgPSBwcm9iYWJpbGl0aWVzLndlaWdodHM7XG5cdFx0Y29uc3QgcHJvYmFiaWxpdHlWYWx1ZXMgPSBwcm9iYWJpbGl0aWVzLnZhbHVlcztcblx0XHRjb25zdCBjdW11bGF0aXZlUHJvYmFiaWxpdGllczogbnVtYmVyW10gPSBwcm9iYWJpbGl0eVZhbHVlcy5yZWR1Y2UoXG5cdFx0XHQoYWNjOiBudW1iZXJbXSwgcHJvYjogbnVtYmVyLCBpOiBudW1iZXIpID0+IHtcblx0XHRcdFx0YWNjW2ldID0gKGFjY1tpIC0gMV0gfHwgMCkgKyBwcm9iO1xuXHRcdFx0XHRyZXR1cm4gYWNjO1xuXHRcdFx0fSxcblx0XHRcdFtdXG5cdFx0KTtcblx0XHRjb25zdCByYW5kb20gPSBNYXRoLnJhbmRvbSgpO1xuXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBjdW11bGF0aXZlUHJvYmFiaWxpdGllcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKHJhbmRvbSA8IGN1bXVsYXRpdmVQcm9iYWJpbGl0aWVzW2ldKSB7XG5cdFx0XHRcdHJldHVybiB3ZWlnaHRzW2ldO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB3ZWlnaHRzW3dlaWdodHMubGVuZ3RoIC0gMV07XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0aWYgKGxvZ01vZGUuZXJyb3JzKVxuXHRcdFx0bG9nLmVycm9yKGBFcnJvciBnZW5lcmF0aW5nIHdlaWdodGVkIHJhbmRvbSBpbnRlcnZhbDogJHtlcnJvcn1gKTtcblxuXHRcdHJldHVybiA1MDtcblx0fVxufVxuXG5leHBvcnQgY29uc3QgcHJvYmFiaWxpdHk6IFBhbGV0dGVDb21tb25fVXRpbHNfUHJvYmFiaWxpdHkgPSB7XG5cdGdldFdlaWdodGVkUmFuZG9tSW50ZXJ2YWxcbn0gYXMgY29uc3Q7XG4iXX0=