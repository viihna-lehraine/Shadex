import { palette } from '../palette-gen/palette-index.js';
import { convert } from '../color-conversion/conversion-index.js';
import { genPaletteBox } from '../dom/dom-main.js';
import { random } from '../utils/color-randomizer.js';
function adjustSL(color, amount = 10) {
    const adjustedSaturation = Math.min(Math.max(color.saturation + amount, 0), 100);
    const adjustedLightness = Math.min(Math.max(color.lightness + amount, 0), 100);
    return {
        hue: color.hue,
        saturation: adjustedSaturation,
        lightness: adjustedLightness,
        format: 'hsl'
    };
}
function genSelectedPaletteType(paletteType, numBoxes, baseColor, customColor = null, initialColorSpace = 'hex') {
    switch (paletteType) {
        case 1:
            return palette.genRandomPalette(numBoxes, customColor, initialColorSpace);
        case 2:
            return palette.genComplementaryPalette(numBoxes, baseColor, initialColorSpace);
        case 3:
            return palette.genTriadicPalette(numBoxes, baseColor, initialColorSpace);
        case 4:
            return palette.genTetradicPalette(numBoxes, baseColor, initialColorSpace);
        case 5:
            return palette.genSplitComplementaryPalette(numBoxes, baseColor, initialColorSpace);
        case 6:
            return palette.genAnalogousPalette(numBoxes, baseColor, initialColorSpace);
        case 7:
            return palette.genHexadicPalette(numBoxes, baseColor, initialColorSpace);
        case 8:
            return palette.genDiadicPalette(numBoxes, baseColor, initialColorSpace);
        case 9:
            return palette.genMonochromaticPalette(numBoxes, baseColor, initialColorSpace);
        default:
            console.error('DEFAULT CASE > unable to determine color scheme');
            return [];
    }
}
function startInHSL(color) {
    if (color.format === 'cmyk') {
        const cmyk = color;
        return convert.cmykToHSL(cmyk);
    }
    else if (color.format === 'hex') {
        const hex = color;
        return convert.hexToHSL(hex);
    }
    else if (color.format === 'hsl') {
        const hsl = color;
        return hsl;
    }
    else if (color.format === 'hsv') {
        const hsv = color;
        return convert.hsvToHSL(hsv);
    }
    else if (color.format === 'lab') {
        const lab = color;
        return convert.labToHSL(lab);
    }
    else if (color.format === 'rgb') {
        const rgb = color;
        return convert.rgbToHSL(rgb);
    }
    else {
        console.error('Unrecognized color format');
        return null;
    }
}
function genPalette(paletteType, numBoxes, initialColorSpace = 'hex', customColor) {
    let colors = [];
    const baseColor = customColor ??
        random.randomColor(initialColorSpace, 'flat');
    genSelectedPaletteType(paletteType, numBoxes, baseColor, customColor, initialColorSpace);
    if (colors.length === 0) {
        console.error('Colors array is empty or undefined.');
        return;
    }
    genPaletteBox(numBoxes, colors);
}
function initialHSLColorGen(color) {
    switch (color.format) {
        case 'cmyk':
            return convert.cmykToHSL(color.value);
        case 'hex':
            return convert.hexToHSL(color.value);
        case 'hsl':
            return color.value;
        case 'hsv':
            return convert.hsvToHSL(color.value);
        case 'lab':
            return convert.labToHSL(color.value);
        case 'rgb':
            return convert.rgbToHSL(color.value);
        default:
            return undefined;
    }
}
export const paletteHelpers = {
    adjustSL,
    genPalette,
    genSelectedPaletteType,
    initialHSLColorGen,
    startInHSL
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFsZXR0ZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9oZWxwZXJzL3BhbGV0dGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLDhCQUE4QixDQUFDO0FBQ3ZELE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxzQ0FBc0MsQ0FBQztBQUUvRCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDaEQsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBRW5ELFNBQVMsUUFBUSxDQUFDLEtBQWdCLEVBQUUsU0FBaUIsRUFBRTtJQUN0RCxNQUFNLGtCQUFrQixHQUFHLElBQUksQ0FBQyxHQUFHLENBQ2xDLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyxNQUFNLEVBQUUsQ0FBQyxDQUFDLEVBQ3RDLEdBQUcsQ0FDSCxDQUFDO0lBQ0YsTUFBTSxpQkFBaUIsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUNqQyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsTUFBTSxFQUFFLENBQUMsQ0FBQyxFQUNyQyxHQUFHLENBQ0gsQ0FBQztJQUVGLE9BQU87UUFDTixHQUFHLEVBQUUsS0FBSyxDQUFDLEdBQUc7UUFDZCxVQUFVLEVBQUUsa0JBQWtCO1FBQzlCLFNBQVMsRUFBRSxpQkFBaUI7UUFDNUIsTUFBTSxFQUFFLEtBQUs7S0FDYixDQUFDO0FBQ0gsQ0FBQztBQUVELFNBQVMsc0JBQXNCLENBQzlCLFdBQW1CLEVBQ25CLFFBQWdCLEVBQ2hCLFNBQTBCLEVBQzFCLGNBQXNDLElBQUksRUFDMUMsb0JBQXNDLEtBQUs7SUFFM0MsUUFBUSxXQUFXLEVBQUUsQ0FBQztRQUNyQixLQUFLLENBQUM7WUFDTCxPQUFPLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FDOUIsUUFBUSxFQUNSLFdBQVcsRUFDWCxpQkFBaUIsQ0FD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QVU7Q0FDVixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFsZXR0ZSB9IGZyb20gJy4uL3BhbGV0dGUtZ2VuL3BhbGV0dGUtaW5kZXgnO1xuaW1wb3J0IHsgY29udmVydCB9IGZyb20gJy4uL2NvbG9yLWNvbnZlcnNpb24vY29udmVyc2lvbi1pbmRleCc7XG5pbXBvcnQgKiBhcyB0eXBlcyBmcm9tICcuLi9pbmRleCc7XG5pbXBvcnQgeyBnZW5QYWxldHRlQm94IH0gZnJvbSAnLi4vZG9tL2RvbS1tYWluJztcbmltcG9ydCB7IHJhbmRvbSB9IGZyb20gJy4uL3V0aWxzL2NvbG9yLXJhbmRvbWl6ZXInO1xuXG5mdW5jdGlvbiBhZGp1c3RTTChjb2xvcjogdHlwZXMuSFNMLCBhbW91bnQ6IG51bWJlciA9IDEwKTogdHlwZXMuSFNMIHtcblx0Y29uc3QgYWRqdXN0ZWRTYXR1cmF0aW9uID0gTWF0aC5taW4oXG5cdFx0TWF0aC5tYXgoY29sb3Iuc2F0dXJhdGlvbiArIGFtb3VudCwgMCksXG5cdFx0MTAwXG5cdCk7XG5cdGNvbnN0IGFkanVzdGVkTGlnaHRuZXNzID0gTWF0aC5taW4oXG5cdFx0TWF0aC5tYXgoY29sb3IubGlnaHRuZXNzICsgYW1vdW50LCAwKSxcblx0XHQxMDBcblx0KTtcblxuXHRyZXR1cm4ge1xuXHRcdGh1ZTogY29sb3IuaHVlLFxuXHRcdHNhdHVyYXRpb246IGFkanVzdGVkU2F0dXJhdGlvbixcblx0XHRsaWdodG5lc3M6IGFkanVzdGVkTGlnaHRuZXNzLFxuXHRcdGZvcm1hdDogJ2hzbCdcblx0fTtcbn1cblxuZnVuY3Rpb24gZ2VuU2VsZWN0ZWRQYWxldHRlVHlwZShcblx0cGFsZXR0ZVR5cGU6IG51bWJlcixcblx0bnVtQm94ZXM6IG51bWJlcixcblx0YmFzZUNvbG9yOiB0eXBlcy5Db2xvckRhdGEsXG5cdGN1c3RvbUNvbG9yOiB0eXBlcy5Db2xvckRhdGEgfCBudWxsID0gbnVsbCxcblx0aW5pdGlhbENvbG9yU3BhY2U6IHR5cGVzLkNvbG9yU3BhY2UgPSAnaGV4J1xuKSB7XG5cdHN3aXRjaCAocGFsZXR0ZVR5cGUpIHtcblx0XHRjYXNlIDE6XG5cdFx0XHRyZXR1cm4gcGFsZXR0ZS5nZW5SYW5kb21QYWxldHRlKFxuXHRcdFx0XHRudW1Cb3hlcyxcblx0XHRcdFx0Y3VzdG9tQ29sb3IsXG5cdFx0XHRcdGluaXRpYWxDb2xvclNwYWNlXG5cdFx0XHQpO1xuXHRcdGNhc2UgMjpcblx0XHRcdHJldHVybiBwYWxldHRlLmdlbkNvbXBsZW1lbnRhcnlQYWxldHRlKFxuXHRcdFx0XHRudW1Cb3hlcyxcblx0XHRcdFx0YmFzZUNvbG9yLFxuXHRcdFx0XHRpbml0aWFsQ29sb3JTcGFjZVxuXHRcdFx0KTtcblx0XHRjYXNlIDM6XG5cdFx0XHRyZXR1cm4gcGFsZXR0ZS5nZW5UcmlhZGljUGFsZXR0ZShcblx0XHRcdFx0bnVtQm94ZXMsXG5cdFx0XHRcdGJhc2VDb2xvcixcblx0XHRcdFx0aW5pdGlhbENvbG9yU3BhY2Vcblx0XHRcdCk7XG5cdFx0Y2FzZSA0OlxuXHRcdFx0cmV0dXJuIHBhbGV0dGUuZ2VuVGV0cmFkaWNQYWxldHRlKFxuXHRcdFx0XHRudW1Cb3hlcyxcblx0XHRcdFx0YmFzZUNvbG9yLFxuXHRcdFx0XHRpbml0aWFsQ29sb3JTcGFjZVxuXHRcdFx0KTtcblx0XHRjYXNlIDU6XG5cdFx0XHRyZXR1cm4gcGFsZXR0ZS5nZW5TcGxpdENvbXBsZW1lbnRhcnlQYWxldHRlKFxuXHRcdFx0XHRudW1Cb3hlcyxcblx0XHRcdFx0YmFzZUNvbG9yLFxuXHRcdFx0XHRpbml0aWFsQ29sb3JTcGFjZVxuXHRcdFx0KTtcblx0XHRjYXNlIDY6XG5cdFx0XHRyZXR1cm4gcGFsZXR0ZS5nZW5BbmFsb2dvdXNQYWxldHRlKFxuXHRcdFx0XHRudW1Cb3hlcyxcblx0XHRcdFx0YmFzZUNvbG9yLFxuXHRcdFx0XHRpbml0aWFsQ29sb3JTcGFjZVxuXHRcdFx0KTtcblx0XHRjYXNlIDc6XG5cdFx0XHRyZXR1cm4gcGFsZXR0ZS5nZW5IZXhhZGljUGFsZXR0ZShcblx0XHRcdFx0bnVtQm94ZXMsXG5cdFx0XHRcdGJhc2VDb2xvcixcblx0XHRcdFx0aW5pdGlhbENvbG9yU3BhY2Vcblx0XHRcdCk7XG5cdFx0Y2FzZSA4OlxuXHRcdFx0cmV0dXJuIHBhbGV0dGUuZ2VuRGlhZGljUGFsZXR0ZShcblx0XHRcdFx0bnVtQm94ZXMsXG5cdFx0XHRcdGJhc2VDb2xvcixcblx0XHRcdFx0aW5pdGlhbENvbG9yU3BhY2Vcblx0XHRcdCk7XG5cdFx0Y2FzZSA5OlxuXHRcdFx0cmV0dXJuIHBhbGV0dGUuZ2VuTW9ub2Nocm9tYXRpY1BhbGV0dGUoXG5cdFx0XHRcdG51bUJveGVzLFxuXHRcdFx0XHRiYXNlQ29sb3IsXG5cdFx0XHRcdGluaXRpYWxDb2xvclNwYWNlXG5cdFx0XHQpO1xuXHRcdGRlZmF1bHQ6XG5cdFx0XHRjb25zb2xlLmVycm9yKCdERUZBVUxUIENBU0UgPiB1bmFibGUgdG8gZGV0ZXJtaW5lIGNvbG9yIHNjaGVtZScpO1xuXHRcdFx0cmV0dXJuIFtdO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHN0YXJ0SW5IU0woY29sb3I6IHR5cGVzLkNvbG9yRGF0YSk6IHR5cGVzLkhTTCB8IG51bGwge1xuXHRpZiAoY29sb3IuZm9ybWF0ID09PSAnY215aycpIHtcblx0XHRjb25zdCBjbXlrID0gY29sb3IgYXMgdHlwZXMuQ01ZSztcblx0XHRyZXR1cm4gY29udmVydC5jbXlrVG9IU0woY215ayk7XG5cdH0gZWxzZSBpZiAoY29sb3IuZm9ybWF0ID09PSAnaGV4Jykge1xuXHRcdGNvbnN0IGhleCA9IGNvbG9yIGFzIHR5cGVzLkhleDtcblx0XHRyZXR1cm4gY29udmVydC5oZXhUb0hTTChoZXgpO1xuXHR9IGVsc2UgaWYgKGNvbG9yLmZvcm1hdCA9PT0gJ2hzbCcpIHtcblx0XHRjb25zdCBoc2wgPSBjb2xvciBhcyB0eXBlcy5IU0w7XG5cdFx0cmV0dXJuIGhzbDtcblx0fSBlbHNlIGlmIChjb2xvci5mb3JtYXQgPT09ICdoc3YnKSB7XG5cdFx0Y29uc3QgaHN2ID0gY29sb3IgYXMgdHlwZXMuSFNWO1xuXHRcdHJldHVybiBjb252ZXJ0LmhzdlRvSFNMKGhzdik7XG5cdH0gZWxzZSBpZiAoY29sb3IuZm9ybWF0ID09PSAnbGFiJykge1xuXHRcdGNvbnN0IGxhYiA9IGNvbG9yIGFzIHR5cGVzLkxBQjtcblx0XHRyZXR1cm4gY29udmVydC5sYWJUb0hTTChsYWIpO1xuXHR9IGVsc2UgaWYgKGNvbG9yLmZvcm1hdCA9PT0gJ3JnYicpIHtcblx0XHRjb25zdCByZ2IgPSBjb2xvciBhcyB0eXBlcy5SR0I7XG5cdFx0cmV0dXJuIGNvbnZlcnQucmdiVG9IU0wocmdiKTtcblx0fSBlbHNlIHtcblx0XHRjb25zb2xlLmVycm9yKCdVbnJlY29nbml6ZWQgY29sb3IgZm9ybWF0Jyk7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cbn1cblxuZnVuY3Rpb24gZ2VuUGFsZXR0ZShcblx0cGFsZXR0ZVR5cGU6IG51bWJlcixcblx0bnVtQm94ZXM6IG51bWJlcixcblx0aW5pdGlhbENvbG9yU3BhY2U6IHR5cGVzLkNvbG9yU3BhY2UgPSAnaGV4Jyxcblx0Y3VzdG9tQ29sb3I/OiB0eXBlcy5Db2xvckRhdGEgfCBudWxsXG4pIHtcblx0bGV0IGNvbG9yczogdHlwZXMuQ29sb3JEYXRhW10gPSBbXTtcblxuXHRjb25zdCBiYXNlQ29sb3I6IHR5cGVzLkNvbG9yRGF0YSA9XG5cdFx0Y3VzdG9tQ29sb3IgPz9cblx0XHQocmFuZG9tLnJhbmRvbUNvbG9yKGluaXRpYWxDb2xvclNwYWNlLCAnZmxhdCcpIGFzIHR5cGVzLkNvbG9yRGF0YSk7XG5cblx0Z2VuU2VsZWN0ZWRQYWxldHRlVHlwZShcblx0XHRwYWxldHRlVHlwZSxcblx0XHRudW1Cb3hlcyxcblx0XHRiYXNlQ29sb3IsXG5cdFx0Y3VzdG9tQ29sb3IsXG5cdFx0aW5pdGlhbENvbG9yU3BhY2Vcblx0KTtcblxuXHRpZiAoY29sb3JzLmxlbmd0aCA9PT0gMCkge1xuXHRcdGNvbnNvbGUuZXJyb3IoJ0NvbG9ycyBhcnJheSBpcyBlbXB0eSBvciB1bmRlZmluZWQuJyk7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Z2VuUGFsZXR0ZUJveChudW1Cb3hlcywgY29sb3JzKTtcbn1cblxuZnVuY3Rpb24gaW5pdGlhbEhTTENvbG9yR2VuKFxuXHRjb2xvcjogdHlwZXMuQ29sb3JPYmplY3Q8XG5cdFx0dHlwZXMuQ01ZSyB8IHR5cGVzLkhleCB8IHR5cGVzLkhTTCB8IHR5cGVzLkhTViB8IHR5cGVzLkxBQiB8IHR5cGVzLlJHQlxuXHQ+XG4pOiB0eXBlcy5IU0wgfCB1bmRlZmluZWQge1xuXHRzd2l0Y2ggKGNvbG9yLmZvcm1hdCkge1xuXHRcdGNhc2UgJ2NteWsnOlxuXHRcdFx0cmV0dXJuIGNvbnZlcnQuY215a1RvSFNMKGNvbG9yLnZhbHVlIGFzIHR5cGVzLkNNWUspO1xuXHRcdGNhc2UgJ2hleCc6XG5cdFx0XHRyZXR1cm4gY29udmVydC5oZXhUb0hTTChjb2xvci52YWx1ZSBhcyB0eXBlcy5IZXgpO1xuXHRcdGNhc2UgJ2hzbCc6XG5cdFx0XHRyZXR1cm4gY29sb3IudmFsdWUgYXMgdHlwZXMuSFNMO1xuXHRcdGNhc2UgJ2hzdic6XG5cdFx0XHRyZXR1cm4gY29udmVydC5oc3ZUb0hTTChjb2xvci52YWx1ZSBhcyB0eXBlcy5IU1YpO1xuXHRcdGNhc2UgJ2xhYic6XG5cdFx0XHRyZXR1cm4gY29udmVydC5sYWJUb0hTTChjb2xvci52YWx1ZSBhcyB0eXBlcy5MQUIpO1xuXHRcdGNhc2UgJ3JnYic6XG5cdFx0XHRyZXR1cm4gY29udmVydC5yZ2JUb0hTTChjb2xvci52YWx1ZSBhcyB0eXBlcy5SR0IpO1xuXHRcdGRlZmF1bHQ6XG5cdFx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHR9XG59XG5cbmV4cG9ydCBjb25zdCBwYWxldHRlSGVscGVycyA9IHtcblx0YWRqdXN0U0wsXG5cdGdlblBhbGV0dGUsXG5cdGdlblNlbGVjdGVkUGFsZXR0ZVR5cGUsXG5cdGluaXRpYWxIU0xDb2xvckdlbixcblx0c3RhcnRJbkhTTFxufTtcbiJdfQ==