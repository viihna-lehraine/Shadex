import { genAllColorValues } from '../color-spaces/conversion.js';
import { conversionHelpers } from '../helpers/conversion.js';
import { paletteHelpers } from '../helpers/palette.js';
import { core } from '../utils/core.js';
function analogous(color, numBoxes) {
    try {
        if (!paletteHelpers.validateColorValues(color)) {
            console.error(`Invalid color value ${JSON.stringify(color)}`);
            return [];
        }
        const clonedColor = core.clone(color);
        const hslColor = clonedColor.format === 'hsl'
            ? clonedColor
            : conversionHelpers.convertColorToHSL(clonedColor);
        if (!hslColor) {
            console.error(`Failed to retrieve HSL color from ${color.format}`);
            return [];
        }
        const analogousHues = [];
        const baseHue = hslColor.value.hue;
        const maxTotalDistance = 60;
        const minTotalDistance = 10 + (numBoxes - 2) * 9;
        const totalIncrement = Math.floor(Math.random() * (maxTotalDistance - minTotalDistance + 1)) + minTotalDistance;
        const increment = Math.floor(totalIncrement / (numBoxes - 1));
        for (let i = 1; i < numBoxes; i++) {
            analogousHues.push((baseHue + increment * i) % 360);
        }
        return analogousHues;
    }
    catch (error) {
        console.error(`Error generating analogous hues: ${error}`);
        return [];
    }
}
function diadic(baseHue) {
    try {
        const clonedBaseHue = core.clone(baseHue);
        const diadicHues = [];
        const randomDistance = paletteHelpers.getWeightedRandomInterval();
        const hue1 = clonedBaseHue;
        const hue2 = (hue1 + randomDistance) % 360;
        diadicHues.push(hue1, hue2);
        return diadicHues;
    }
    catch (error) {
        console.error(`Error generating diadic hues: ${error}`);
        return [];
    }
}
function hexadic(color) {
    try {
        const clonedColor = core.clone(color);
        if (!paletteHelpers.validateColorValues(clonedColor)) {
            console.error(`Invalid color value ${JSON.stringify(clonedColor)}`);
            return [];
        }
        const clonedColorValues = genAllColorValues(clonedColor);
        const clonedBaseHSL = clonedColorValues.hsl;
        if (!clonedBaseHSL) {
            throw new Error('Unable to generate hexadic hues - missing HSL values');
        }
        const hexadicHues = [];
        const clonedBaseHue = clonedBaseHSL.value.hue;
        const hue1 = clonedBaseHue;
        const hue2 = (hue1 + 180) % 360;
        const randomDistance = Math.floor(Math.random() * 71 + 10);
        const hue3 = (hue1 + randomDistance) % 360;
        const hue4 = (hue3 + 180) % 360;
        const hue5 = (hue1 + 360 - randomDistance) % 360;
        const hue6 = (hue5 + 180) % 360;
        hexadicHues.push(hue1, hue2, hue3, hue4, hue5, hue6);
        return hexadicHues;
    }
    catch (error) {
        console.error(`Error generating hexadic hues: ${error}`);
        return [];
    }
}
function splitComplementary(baseHue) {
    try {
        const clonedBaseHue = core.clone(baseHue);
        const modifier = Math.floor(Math.random() * 11) + 20;
        return [
            (clonedBaseHue + 180 + modifier) % 360,
            (clonedBaseHue + 180 - modifier + 360) % 360
        ];
    }
    catch (error) {
        console.error(`Error generating split complementary hues: ${error}`);
        return [];
    }
}
function tetradic(baseHue) {
    try {
        const clonedBaseHue = core.clone(baseHue);
        const randomOffset = Math.floor(Math.random() * 46) + 20;
        const distance = 90 + (Math.random() < 0.5 ? -randomOffset : randomOffset);
        return [
            clonedBaseHue,
            (clonedBaseHue + 180) % 360,
            (clonedBaseHue + distance) % 360,
            (clonedBaseHue + distance + 180) % 360
        ];
    }
    catch (error) {
        console.error(`Error generating tetradic hues: ${error}`);
        return [];
    }
}
function triadic(baseHue) {
    try {
        const clonedBaseHue = core.clone(baseHue);
        return [120, 240].map(increment => (clonedBaseHue + increment) % 360);
    }
    catch (error) {
        console.error(`Error generating triadic hues: ${error}`);
        return [];
    }
}
export const genHues = {
    analogous,
    diadic,
    hexadic,
    splitComplementary,
    tetradic,
    triadic
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaHVlcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9wYWxldHRlLWdlbi9odWVzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQy9ELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQzFELE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUdwRCxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRXJDLFNBQVMsU0FBUyxDQUFDLEtBQW1CLEVBQUUsUUFBZ0I7SUFDdkQsSUFBSSxDQUFDO1FBQ0osSUFBSSxDQUFDLGNBQWMsQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO1lBQ2hELE9BQU8sQ0FBQyxLQUFLLENBQUMsdUJBQXVCLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBRTlELE9BQU8sRUFBRSxDQUFDO1FBQ1gsQ0FBQztRQUVELE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDdEMsTUFBTSxRQUFRLEdBQ2IsV0FBVyxDQUFDLE1BQU0sS0FBSyxLQUFLO1lBQzNCLENBQUMsQ0FBRSxXQUEwQjtZQUM3QixDQUFDLENBQUMsaUJBQWlCLENBQUMsaUJBQWlCLENBQUMsV0FBVyxDQUFDLENBQUM7UUFFckQsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO1lBQ2YsT0FBTyxDQUFDLEtBQUssQ0FBQyxxQ0FBcUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUM7WUFDbkUsT0FBTyxFQUFFLENBQUM7UUFDWCxDQUFDO1FBRUQsTUFBTSxhQUFhLEdBQWEsRUFBRSxDQUFDO1FBQ25DLE1BQU0sT0FBTyxHQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDO1FBQ25DLE1B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QztRQUNoQixPQUFPLENBQUMsS0FBSyxDQUFDLGtDQUFrQyxLQUFLLEVBQUUsQ0FBQyxDQUFDO1FBRXpELE9BQU8sRUFBRSxDQUFDO0lBQ1gsQ0FBQztBQUNGLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxPQUFPLEdBQXNCO0lBQ3pDLFNBQVM7SUFDVCxNQUFNO0lBQ04sT0FBTztJQUNQLGtCQUFrQjtJQUNsQixRQUFRO0lBQ1IsT0FBTztDQUNQLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZW5BbGxDb2xvclZhbHVlcyB9IGZyb20gJy4uL2NvbG9yLXNwYWNlcy9jb252ZXJzaW9uJztcbmltcG9ydCB7IGNvbnZlcnNpb25IZWxwZXJzIH0gZnJvbSAnLi4vaGVscGVycy9jb252ZXJzaW9uJztcbmltcG9ydCB7IHBhbGV0dGVIZWxwZXJzIH0gZnJvbSAnLi4vaGVscGVycy9wYWxldHRlJztcbmltcG9ydCAqIGFzIGNvbG9ycyBmcm9tICcuLi9pbmRleC9jb2xvcnMnO1xuaW1wb3J0ICogYXMgZm5PYmplY3RzIGZyb20gJy4uL2luZGV4L2ZuLW9iamVjdHMnO1xuaW1wb3J0IHsgY29yZSB9IGZyb20gJy4uL3V0aWxzL2NvcmUnO1xuXG5mdW5jdGlvbiBhbmFsb2dvdXMoY29sb3I6IGNvbG9ycy5Db2xvciwgbnVtQm94ZXM6IG51bWJlcik6IG51bWJlcltdIHtcblx0dHJ5IHtcblx0XHRpZiAoIXBhbGV0dGVIZWxwZXJzLnZhbGlkYXRlQ29sb3JWYWx1ZXMoY29sb3IpKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKGBJbnZhbGlkIGNvbG9yIHZhbHVlICR7SlNPTi5zdHJpbmdpZnkoY29sb3IpfWApO1xuXG5cdFx0XHRyZXR1cm4gW107XG5cdFx0fVxuXG5cdFx0Y29uc3QgY2xvbmVkQ29sb3IgPSBjb3JlLmNsb25lKGNvbG9yKTtcblx0XHRjb25zdCBoc2xDb2xvciA9XG5cdFx0XHRjbG9uZWRDb2xvci5mb3JtYXQgPT09ICdoc2wnXG5cdFx0XHRcdD8gKGNsb25lZENvbG9yIGFzIGNvbG9ycy5IU0wpXG5cdFx0XHRcdDogY29udmVyc2lvbkhlbHBlcnMuY29udmVydENvbG9yVG9IU0woY2xvbmVkQ29sb3IpO1xuXG5cdFx0aWYgKCFoc2xDb2xvcikge1xuXHRcdFx0Y29uc29sZS5lcnJvcihgRmFpbGVkIHRvIHJldHJpZXZlIEhTTCBjb2xvciBmcm9tICR7Y29sb3IuZm9ybWF0fWApO1xuXHRcdFx0cmV0dXJuIFtdO1xuXHRcdH1cblxuXHRcdGNvbnN0IGFuYWxvZ291c0h1ZXM6IG51bWJlcltdID0gW107XG5cdFx0Y29uc3QgYmFzZUh1ZSA9IGhzbENvbG9yLnZhbHVlLmh1ZTtcblx0XHRjb25zdCBtYXhUb3RhbERpc3RhbmNlID0gNjA7XG5cdFx0Y29uc3QgbWluVG90YWxEaXN0YW5jZSA9IDEwICsgKG51bUJveGVzIC0gMikgKiA5O1xuXHRcdGNvbnN0IHRvdGFsSW5jcmVtZW50ID1cblx0XHRcdE1hdGguZmxvb3IoXG5cdFx0XHRcdE1hdGgucmFuZG9tKCkgKiAobWF4VG90YWxEaXN0YW5jZSAtIG1pblRvdGFsRGlzdGFuY2UgKyAxKVxuXHRcdFx0KSArIG1pblRvdGFsRGlzdGFuY2U7XG5cdFx0Y29uc3QgaW5jcmVtZW50ID0gTWF0aC5mbG9vcih0b3RhbEluY3JlbWVudCAvIChudW1Cb3hlcyAtIDEpKTtcblxuXHRcdGZvciAobGV0IGkgPSAxOyBpIDwgbnVtQm94ZXM7IGkrKykge1xuXHRcdFx0YW5hbG9nb3VzSHVlcy5wdXNoKChiYXNlSHVlICsgaW5jcmVtZW50ICogaSkgJSAzNjApO1xuXHRcdH1cblxuXHRcdHJldHVybiBhbmFsb2dvdXNIdWVzO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGNvbnNvbGUuZXJyb3IoYEVycm9yIGdlbmVyYXRpbmcgYW5hbG9nb3VzIGh1ZXM6ICR7ZXJyb3J9YCk7XG5cblx0XHRyZXR1cm4gW107XG5cdH1cbn1cblxuZnVuY3Rpb24gZGlhZGljKGJhc2VIdWU6IG51bWJlcik6IG51bWJlcltdIHtcblx0dHJ5IHtcblx0XHRjb25zdCBjbG9uZWRCYXNlSHVlID0gY29yZS5jbG9uZShiYXNlSHVlKTtcblx0XHRjb25zdCBkaWFkaWNIdWVzID0gW107XG5cdFx0Y29uc3QgcmFuZG9tRGlzdGFuY2UgPSBwYWxldHRlSGVscGVycy5nZXRXZWlnaHRlZFJhbmRvbUludGVydmFsKCk7XG5cdFx0Y29uc3QgaHVlMSA9IGNsb25lZEJhc2VIdWU7XG5cdFx0Y29uc3QgaHVlMiA9IChodWUxICsgcmFuZG9tRGlzdGFuY2UpICUgMzYwO1xuXG5cdFx0ZGlhZGljSHVlcy5wdXNoKGh1ZTEsIGh1ZTIpO1xuXG5cdFx0cmV0dXJuIGRpYWRpY0h1ZXM7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Y29uc29sZS5lcnJvcihgRXJyb3IgZ2VuZXJhdGluZyBkaWFkaWMgaHVlczogJHtlcnJvcn1gKTtcblx0XHRyZXR1cm4gW107XG5cdH1cbn1cblxuZnVuY3Rpb24gaGV4YWRpYyhcblx0Y29sb3I6IEV4Y2x1ZGU8Y29sb3JzLkNvbG9yLCBjb2xvcnMuU0wgfCBjb2xvcnMuU1Y+XG4pOiBudW1iZXJbXSB7XG5cdHRyeSB7XG5cdFx0Y29uc3QgY2xvbmVkQ29sb3IgPSBjb3JlLmNsb25lKGNvbG9yKTtcblxuXHRcdGlmICghcGFsZXR0ZUhlbHBlcnMudmFsaWRhdGVDb2xvclZhbHVlcyhjbG9uZWRDb2xvcikpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoYEludmFsaWQgY29sb3IgdmFsdWUgJHtKU09OLnN0cmluZ2lmeShjbG9uZWRDb2xvcil9YCk7XG5cblx0XHRcdHJldHVybiBbXTtcblx0XHR9XG5cblx0XHRjb25zdCBjbG9uZWRDb2xvclZhbHVlcyA9IGdlbkFsbENvbG9yVmFsdWVzKGNsb25lZENvbG9yKTtcblx0XHRjb25zdCBjbG9uZWRCYXNlSFNMID0gY2xvbmVkQ29sb3JWYWx1ZXMuaHNsIGFzIGNvbG9ycy5IU0w7XG5cblx0XHRpZiAoIWNsb25lZEJhc2VIU0wpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcblx0XHRcdFx0J1VuYWJsZSB0byBnZW5lcmF0ZSBoZXhhZGljIGh1ZXMgLSBtaXNzaW5nIEhTTCB2YWx1ZXMnXG5cdFx0XHQpO1xuXHRcdH1cblxuXHRcdGNvbnN0IGhleGFkaWNIdWVzOiBudW1iZXJbXSA9IFtdO1xuXHRcdGNvbnN0IGNsb25lZEJhc2VIdWUgPSBjbG9uZWRCYXNlSFNMLnZhbHVlLmh1ZTtcblxuXHRcdGNvbnN0IGh1ZTEgPSBjbG9uZWRCYXNlSHVlO1xuXHRcdGNvbnN0IGh1ZTIgPSAoaHVlMSArIDE4MCkgJSAzNjA7XG5cdFx0Y29uc3QgcmFuZG9tRGlzdGFuY2UgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA3MSArIDEwKTtcblx0XHRjb25zdCBodWUzID0gKGh1ZTEgKyByYW5kb21EaXN0YW5jZSkgJSAzNjA7XG5cdFx0Y29uc3QgaHVlNCA9IChodWUzICsgMTgwKSAlIDM2MDtcblx0XHRjb25zdCBodWU1ID0gKGh1ZTEgKyAzNjAgLSByYW5kb21EaXN0YW5jZSkgJSAzNjA7XG5cdFx0Y29uc3QgaHVlNiA9IChodWU1ICsgMTgwKSAlIDM2MDtcblxuXHRcdGhleGFkaWNIdWVzLnB1c2goaHVlMSwgaHVlMiwgaHVlMywgaHVlNCwgaHVlNSwgaHVlNik7XG5cblx0XHRyZXR1cm4gaGV4YWRpY0h1ZXM7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Y29uc29sZS5lcnJvcihgRXJyb3IgZ2VuZXJhdGluZyBoZXhhZGljIGh1ZXM6ICR7ZXJyb3J9YCk7XG5cblx0XHRyZXR1cm4gW107XG5cdH1cbn1cblxuZnVuY3Rpb24gc3BsaXRDb21wbGVtZW50YXJ5KGJhc2VIdWU6IG51bWJlcik6IG51bWJlcltdIHtcblx0dHJ5IHtcblx0XHRjb25zdCBjbG9uZWRCYXNlSHVlID0gY29yZS5jbG9uZShiYXNlSHVlKTtcblx0XHRjb25zdCBtb2RpZmllciA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDExKSArIDIwO1xuXG5cdFx0cmV0dXJuIFtcblx0XHRcdChjbG9uZWRCYXNlSHVlICsgMTgwICsgbW9kaWZpZXIpICUgMzYwLFxuXHRcdFx0KGNsb25lZEJhc2VIdWUgKyAxODAgLSBtb2RpZmllciArIDM2MCkgJSAzNjBcblx0XHRdO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGNvbnNvbGUuZXJyb3IoYEVycm9yIGdlbmVyYXRpbmcgc3BsaXQgY29tcGxlbWVudGFyeSBodWVzOiAke2Vycm9yfWApO1xuXG5cdFx0cmV0dXJuIFtdO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHRldHJhZGljKGJhc2VIdWU6IG51bWJlcik6IG51bWJlcltdIHtcblx0dHJ5IHtcblx0XHRjb25zdCBjbG9uZWRCYXNlSHVlID0gY29yZS5jbG9uZShiYXNlSHVlKTtcblx0XHRjb25zdCByYW5kb21PZmZzZXQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA0NikgKyAyMDtcblx0XHRjb25zdCBkaXN0YW5jZSA9XG5cdFx0XHQ5MCArIChNYXRoLnJhbmRvbSgpIDwgMC41ID8gLXJhbmRvbU9mZnNldCA6IHJhbmRvbU9mZnNldCk7XG5cblx0XHRyZXR1cm4gW1xuXHRcdFx0Y2xvbmVkQmFzZUh1ZSxcblx0XHRcdChjbG9uZWRCYXNlSHVlICsgMTgwKSAlIDM2MCxcblx0XHRcdChjbG9uZWRCYXNlSHVlICsgZGlzdGFuY2UpICUgMzYwLFxuXHRcdFx0KGNsb25lZEJhc2VIdWUgKyBkaXN0YW5jZSArIDE4MCkgJSAzNjBcblx0XHRdO1xuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdGNvbnNvbGUuZXJyb3IoYEVycm9yIGdlbmVyYXRpbmcgdGV0cmFkaWMgaHVlczogJHtlcnJvcn1gKTtcblxuXHRcdHJldHVybiBbXTtcblx0fVxufVxuXG5mdW5jdGlvbiB0cmlhZGljKGJhc2VIdWU6IG51bWJlcik6IG51bWJlcltdIHtcblx0dHJ5IHtcblx0XHRjb25zdCBjbG9uZWRCYXNlSHVlID0gY29yZS5jbG9uZShiYXNlSHVlKTtcblxuXHRcdHJldHVybiBbMTIwLCAyNDBdLm1hcChpbmNyZW1lbnQgPT4gKGNsb25lZEJhc2VIdWUgKyBpbmNyZW1lbnQpICUgMzYwKTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRjb25zb2xlLmVycm9yKGBFcnJvciBnZW5lcmF0aW5nIHRyaWFkaWMgaHVlczogJHtlcnJvcn1gKTtcblxuXHRcdHJldHVybiBbXTtcblx0fVxufVxuXG5leHBvcnQgY29uc3QgZ2VuSHVlczogZm5PYmplY3RzLkdlbkh1ZXMgPSB7XG5cdGFuYWxvZ291cyxcblx0ZGlhZGljLFxuXHRoZXhhZGljLFxuXHRzcGxpdENvbXBsZW1lbnRhcnksXG5cdHRldHJhZGljLFxuXHR0cmlhZGljXG59O1xuIl19